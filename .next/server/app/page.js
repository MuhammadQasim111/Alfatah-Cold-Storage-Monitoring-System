(()=>{var t={};t.id=931,t.ids=[931],t.modules={2934:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:t=>{"use strict";t.exports=require("assert")},8893:t=>{"use strict";t.exports=require("buffer")},4770:t=>{"use strict";t.exports=require("crypto")},665:t=>{"use strict";t.exports=require("dns")},7702:t=>{"use strict";t.exports=require("events")},2615:t=>{"use strict";t.exports=require("http")},8791:t=>{"use strict";t.exports=require("https")},8216:t=>{"use strict";t.exports=require("net")},6162:t=>{"use strict";t.exports=require("stream")},2452:t=>{"use strict";t.exports=require("tls")},4175:t=>{"use strict";t.exports=require("tty")},7360:t=>{"use strict";t.exports=require("url")},1764:t=>{"use strict";t.exports=require("util")},1568:t=>{"use strict";t.exports=require("zlib")},7529:()=>{},8359:()=>{},3739:()=>{},4374:(t,e,i)=>{"use strict";i.r(e),i.d(e,{GlobalError:()=>o.a,__next_app__:()=>d,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>h}),i(908),i(1506),i(5866);var r=i(3191),s=i(8716),n=i(7922),o=i.n(n),a=i(5231),l={};for(let t in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(t)&&(l[t]=()=>a[t]);i.d(e,l);let h=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,908)),"C:\\Users\\hp\\Desktop\\smart monitoring\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,1506)),"C:\\Users\\hp\\Desktop\\smart monitoring\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\hp\\Desktop\\smart monitoring\\app\\page.tsx"],u="/page",d={require:i,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:h}})},6351:(t,e,i)=>{Promise.resolve().then(i.bind(i,9981))},4806:(t,e,i)=>{Promise.resolve().then(i.t.bind(i,2994,23)),Promise.resolve().then(i.t.bind(i,6114,23)),Promise.resolve().then(i.t.bind(i,9727,23)),Promise.resolve().then(i.t.bind(i,9671,23)),Promise.resolve().then(i.t.bind(i,1868,23)),Promise.resolve().then(i.t.bind(i,4759,23))},9245:()=>{},9981:(t,e,i)=>{"use strict";let r;i.r(e),i.d(e,{default:()=>oR});var s,n=i(326),o=i(7577);let a=({name:t,type:e,temperature:i,humidity:r,lastUpdated:s,status:o,onClick:a,isSelected:l})=>(0,n.jsxs)("div",{onClick:a,className:`p-6 rounded-xl border-2 transition-all cursor-pointer shadow-sm hover:shadow-md
        ${l?"border-blue-500 ring-2 ring-blue-100":"border-slate-100 bg-white"}
      `,children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,n.jsxs)("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-800",children:t}),n.jsx("p",{className:"text-sm text-slate-500",children:e})]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold border ${(t=>{switch(t){case"OK":return"bg-green-100 text-green-800 border-green-200";case"WARNING":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"CRITICAL":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(o)}`,children:o})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg",children:[n.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Temp"}),n.jsx("p",{className:`text-2xl font-mono font-semibold ${(i||0)>10?"text-red-600":"text-slate-700"}`,children:"number"!=typeof i||isNaN(i)?"--":`${i.toFixed(1)}\xb0C`})]}),(0,n.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg",children:[n.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Humidity"}),n.jsx("p",{className:"text-2xl font-mono font-semibold text-blue-600",children:"number"!=typeof r||isNaN(r)?"--":`${r.toFixed(1)}%`})]})]}),n.jsx("div",{className:"mt-4 text-right",children:(0,n.jsxs)("p",{className:"text-xs text-slate-400",children:["Last updated: ",s?new Date(s).toLocaleTimeString():"Never"]})})]});function l(t){return t+.5|0}let h=(t,e,i)=>Math.max(Math.min(t,i),e);function c(t){return h(l(2.55*t),0,255)}function u(t){return h(l(255*t),0,255)}function d(t){return h(l(t/2.55)/100,0,1)}function f(t){return h(l(100*t),0,100)}let p={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},g=[..."0123456789ABCDEF"],m=t=>g[15&t],b=t=>g[(240&t)>>4]+g[15&t],_=t=>(240&t)>>4==(15&t),y=t=>_(t.r)&&_(t.g)&&_(t.b)&&_(t.a),v=(t,e)=>t<255?e(t):"",w=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function x(t,e,i){let r=e*Math.min(i,1-i),s=(e,s=(e+t/30)%12)=>i-r*Math.max(Math.min(s-3,9-s,1),-1);return[s(0),s(8),s(4)]}function S(t,e,i){let r=(r,s=(r+t/60)%6)=>i-i*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function k(t,e,i){let r;let s=x(t,1,.5);for(e+i>1&&(r=1/(e+i),e*=r,i*=r),r=0;r<3;r++)s[r]*=1-e-i,s[r]+=e;return s}function E(t){let e,i,r;let s=t.r/255,n=t.g/255,o=t.b/255,a=Math.max(s,n,o),l=Math.min(s,n,o),h=(a+l)/2;return a!==l&&(r=a-l,i=h>.5?r/(2-a-l):r/(a+l),e=60*(e=s===a?(n-o)/r+(n<o?6:0):n===a?(o-s)/r+2:(s-n)/r+4)+.5),[0|e,i||0,h]}function M(t,e,i,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,r)).map(u)}function I(t){return(t%360+360)%360}let T={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},O={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},A=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,C=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,P=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function R(t,e,i){if(t){let r=E(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*i,0===e?360:1)),r=M(x,r,void 0,void 0),t.r=r[0],t.g=r[1],t.b=r[2]}}function B(t,e){return t?Object.assign(e||{},t):t}function N(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=u(t[3]))):(e=B(t,{r:0,g:0,b:0,a:1})).a=u(e.a),e}class D{constructor(t){let e;if(t instanceof D)return t;let i=typeof t;"object"===i?e=N(t):"string"===i&&(e=function(t){var e,i=t.length;return"#"===t[0]&&(4===i||5===i?e={r:255&17*p[t[1]],g:255&17*p[t[2]],b:255&17*p[t[3]],a:5===i?17*p[t[4]]:255}:(7===i||9===i)&&(e={r:p[t[1]]<<4|p[t[2]],g:p[t[3]]<<4|p[t[4]],b:p[t[5]]<<4|p[t[6]],a:9===i?p[t[7]]<<4|p[t[8]]:255})),e}(t)||function(t){r||((r=function(){let t,e,i,r,s;let n={},o=Object.keys(O),a=Object.keys(T);for(t=0;t<o.length;t++){for(e=0,r=s=o[t];e<a.length;e++)i=a[e],s=s.replace(i,T[i]);i=parseInt(O[r],16),n[s]=[i>>16&255,i>>8&255,255&i]}return n}()).transparent=[0,0,0,0]);let e=r[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(t)||function(t){return"r"===t.charAt(0)?function(t){let e,i,r;let s=A.exec(t),n=255;if(s){if(s[7]!==e){let t=+s[7];n=s[8]?c(t):h(255*t,0,255)}return e=+s[1],i=+s[3],r=+s[5],{r:e=255&(s[2]?c(e):h(e,0,255)),g:i=255&(s[4]?c(i):h(i,0,255)),b:r=255&(s[6]?c(r):h(r,0,255)),a:n}}}(t):function(t){let e;let i=w.exec(t),r=255;if(!i)return;i[5]!==e&&(r=i[6]?c(+i[5]):u(+i[5]));let s=I(+i[2]),n=+i[3]/100,o=+i[4]/100;return{r:(e="hwb"===i[1]?M(k,s,n,o):"hsv"===i[1]?M(S,s,n,o):M(x,s,n,o))[0],g:e[1],b:e[2],a:r}}(t)}(t)),this._rgb=e,this._valid=!!e}get valid(){return this._valid}get rgb(){var t=B(this._rgb);return t&&(t.a=d(t.a)),t}set rgb(t){this._rgb=N(t)}rgbString(){var t;return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${d(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0}hexString(){var t,e;return this._valid?(e=y(t=this._rgb)?m:b,t?"#"+e(t.r)+e(t.g)+e(t.b)+v(t.a,e):void 0):void 0}hslString(){return this._valid?function(t){if(!t)return;let e=E(t),i=e[0],r=f(e[1]),s=f(e[2]);return t.a<255?`hsla(${i}, ${r}%, ${s}%, ${d(t.a)})`:`hsl(${i}, ${r}%, ${s}%)`}(this._rgb):void 0}mix(t,e){if(t){let i;let r=this.rgb,s=t.rgb,n=e===i?.5:e,o=2*n-1,a=r.a-s.a,l=((o*a==-1?o:(o+a)/(1+o*a))+1)/2;i=1-l,r.r=255&l*r.r+i*s.r+.5,r.g=255&l*r.g+i*s.g+.5,r.b=255&l*r.b+i*s.b+.5,r.a=n*r.a+(1-n)*s.a,this.rgb=r}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,i){let r=P(d(t.r)),s=P(d(t.g)),n=P(d(t.b));return{r:u(C(r+i*(P(d(e.r))-r))),g:u(C(s+i*(P(d(e.g))-s))),b:u(C(n+i*(P(d(e.b))-n))),a:t.a+i*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new D(this.rgb)}alpha(t){return this._rgb.a=u(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=l(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return R(this._rgb,2,t),this}darken(t){return R(this._rgb,2,-t),this}saturate(t){return R(this._rgb,1,t),this}desaturate(t){return R(this._rgb,1,-t),this}rotate(t){var e,i;return(i=E(e=this._rgb))[0]=I(i[0]+t),i=M(x,i,void 0,void 0),e.r=i[0],e.g=i[1],e.b=i[2],this}}function L(){}let j=(()=>{let t=0;return()=>t++})();function F(t){return null==t}function U(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function W(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function H(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function z(t,e){return H(t)?t:e}function V(t,e){return void 0===t?e:t}let $=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/e,q=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function K(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function G(t,e,i,r){let s,n,o;if(U(t)){if(n=t.length,r)for(s=n-1;s>=0;s--)e.call(i,t[s],s);else for(s=0;s<n;s++)e.call(i,t[s],s)}else if(W(t))for(s=0,n=(o=Object.keys(t)).length;s<n;s++)e.call(i,t[o[s]],o[s])}function Y(t,e){let i,r,s,n;if(!t||!e||t.length!==e.length)return!1;for(i=0,r=t.length;i<r;++i)if(s=t[i],n=e[i],s.datasetIndex!==n.datasetIndex||s.index!==n.index)return!1;return!0}function Q(t){if(U(t))return t.map(Q);if(W(t)){let e=Object.create(null),i=Object.keys(t),r=i.length,s=0;for(;s<r;++s)e[i[s]]=Q(t[i[s]]);return e}return t}function X(t){return -1===["__proto__","prototype","constructor"].indexOf(t)}function Z(t,e,i,r){if(!X(t))return;let s=e[t],n=i[t];W(s)&&W(n)?J(s,n,r):e[t]=Q(n)}function J(t,e,i){let r;let s=U(e)?e:[e],n=s.length;if(!W(t))return t;let o=(i=i||{}).merger||Z;for(let e=0;e<n;++e){if(!W(r=s[e]))continue;let n=Object.keys(r);for(let e=0,s=n.length;e<s;++e)o(n[e],t,r,i)}return t}function tt(t,e){return J(t,e,{merger:te})}function te(t,e,i){if(!X(t))return;let r=e[t],s=i[t];W(r)&&W(s)?tt(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Q(s))}let ti={"":t=>t,x:t=>t.x,y:t=>t.y};function tr(t,e){return(ti[e]||(ti[e]=function(t){let e=function(t){let e=t.split("."),i=[],r="";for(let t of e)(r+=t).endsWith("\\")?r=r.slice(0,-1)+".":(i.push(r),r="");return i}(t);return t=>{for(let i of e){if(""===i)break;t=t&&t[i]}return t}}(e)))(t)}function ts(t){return t.charAt(0).toUpperCase()+t.slice(1)}let tn=t=>void 0!==t,to=t=>"function"==typeof t,ta=(t,e)=>{if(t.size!==e.size)return!1;for(let i of t)if(!e.has(i))return!1;return!0},tl=Math.PI,th=2*tl,tc=th+tl,tu=Number.POSITIVE_INFINITY,td=tl/180,tf=tl/2,tp=tl/4,tg=2*tl/3,tm=Math.log10,tb=Math.sign;function t_(t,e,i){return Math.abs(t-e)<i}function ty(t){let e=Math.round(t),i=Math.pow(10,Math.floor(tm(t=t_(t,e,t/1e3)?e:t))),r=t/i;return(r<=1?1:r<=2?2:r<=5?5:10)*i}function tv(t){return!("symbol"==typeof t||"object"==typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t))&&!isNaN(parseFloat(t))&&isFinite(t)}function tw(t,e,i){let r,s,n;for(r=0,s=t.length;r<s;r++)isNaN(n=t[r][i])||(e.min=Math.min(e.min,n),e.max=Math.max(e.max,n))}function tx(t){return tl/180*t}function tS(t){if(!H(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function tk(t,e){let i=e.x-t.x,r=e.y-t.y,s=Math.atan2(r,i);return s<-.5*tl&&(s+=th),{angle:s,distance:Math.sqrt(i*i+r*r)}}function tE(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function tM(t,e){return(t-e+tc)%th-tl}function tI(t){return(t%th+th)%th}function tT(t,e,i,r){let s=tI(t),n=tI(e),o=tI(i),a=tI(n-s),l=tI(o-s),h=tI(s-n),c=tI(s-o);return s===n||s===o||r&&n===o||a>l&&h<c}function tO(t,e,i){return Math.max(e,Math.min(i,t))}function tA(t,e,i,r=1e-6){return t>=Math.min(e,i)-r&&t<=Math.max(e,i)+r}function tC(t,e,i){let r;i=i||(i=>t[i]<e);let s=t.length-1,n=0;for(;s-n>1;)i(r=n+s>>1)?n=r:s=r;return{lo:n,hi:s}}let tP=(t,e,i,r)=>tC(t,i,r?r=>{let s=t[r][e];return s<i||s===i&&t[r+1][e]===i}:r=>t[r][e]<i),tR=(t,e,i)=>tC(t,i,r=>t[r][e]>=i),tB=["push","pop","shift","splice","unshift"];function tN(t,e){let i=t._chartjs;if(!i)return;let r=i.listeners,s=r.indexOf(e);-1!==s&&r.splice(s,1),r.length>0||(tB.forEach(e=>{delete t[e]}),delete t._chartjs)}function tD(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}let tL="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function tj(t,e){let i=[],r=!1;return function(...s){i=s,r||(r=!0,tL.call(window,()=>{r=!1,t.apply(e,i)}))}}let tF=t=>"start"===t?"left":"end"===t?"right":"center",tU=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2,tW=(t,e,i,r)=>t===(r?"left":"right")?i:"center"===t?(e+i)/2:e;function tH(t,e,i){let r=e.length,s=0,n=r;if(t._sorted){let{iScale:o,vScale:a,_parsed:l}=t,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,c=o.axis,{min:u,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(s=Math.min(tP(l,c,u).lo,i?r:tP(e,c,o.getPixelForValue(u)).lo),h){let t=l.slice(0,s+1).reverse().findIndex(t=>!F(t[a.axis]));s-=Math.max(0,t)}s=tO(s,0,r-1)}if(p){let t=Math.max(tP(l,o.axis,d,!0).hi+1,i?0:tP(e,c,o.getPixelForValue(d),!0).hi+1);if(h){let e=l.slice(t-1).findIndex(t=>!F(t[a.axis]));t+=Math.max(0,e)}n=tO(t,s,r)-s}else n=r-s}return{start:s,count:n}}function tz(t){let{xScale:e,yScale:i,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!r)return t._scaleRanges=s,!0;let n=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==i.min||r.ymax!==i.max;return Object.assign(r,s),n}let tV=t=>0===t||1===t,t$=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*th/i)),tq=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*th/i)+1,tK={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*tf)+1,easeOutSine:t=>Math.sin(t*tf),easeInOutSine:t=>-.5*(Math.cos(tl*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>tV(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(-Math.pow(2,-10*(2*t-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>tV(t)?t:t$(t,.075,.3),easeOutElastic:t=>tV(t)?t:tq(t,.075,.3),easeInOutElastic:t=>tV(t)?t:t<.5?.5*t$(2*t,.1125,.45):.5+.5*tq(2*t-1,.1125,.45),easeInBack:t=>t*t*(2.70158*t-1.70158),easeOutBack:t=>(t-=1)*t*(2.70158*t+1.70158)+1,easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*(((e*=1.525)+1)*t-e)*.5:.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-tK.easeOutBounce(1-t),easeOutBounce:t=>t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375,easeInOutBounce:t=>t<.5?.5*tK.easeInBounce(2*t):.5*tK.easeOutBounce(2*t-1)+.5};function tG(t){if(t&&"object"==typeof t){let e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function tY(t){return tG(t)?t:new D(t)}function tQ(t){return tG(t)?t:new D(t).saturate(.5).darken(.1).hexString()}let tX=["x","y","borderWidth","radius","tension"],tZ=["color","borderColor","backgroundColor"],tJ=new Map;function t0(t,e,i){return(function(t,e){let i=t+JSON.stringify(e=e||{}),r=tJ.get(i);return r||(r=new Intl.NumberFormat(t,e),tJ.set(i,r)),r})(e,i).format(t)}let t1={values:t=>U(t)?t:""+t,numeric(t,e,i){let r;if(0===t)return"0";let s=this.chart.options.locale,n=t;if(i.length>1){let e;let s=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(s<1e-4||s>1e15)&&(r="scientific"),Math.abs(e=i.length>3?i[2].value-i[1].value:i[1].value-i[0].value)>=1&&t!==Math.floor(t)&&(e=t-Math.floor(t)),n=e}let o=tm(Math.abs(n)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),t0(t,s,l)},logarithmic(t,e,i){return 0===t?"0":[1,2,3,5,10,15].includes(i[e].significand||t/Math.pow(10,Math.floor(tm(t))))||e>.8*i.length?t1.numeric.call(this,t,e,i):""}};var t2={formatters:t1};let t5=Object.create(null),t4=Object.create(null);function t3(t,e){if(!e)return t;let i=e.split(".");for(let e=0,r=i.length;e<r;++e){let r=i[e];t=t[r]||(t[r]=Object.create(null))}return t}function t6(t,e,i){return"string"==typeof e?J(t3(t,e),i):J(t3(t,""),e)}class t8{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>tQ(e.backgroundColor),this.hoverBorderColor=(t,e)=>tQ(e.borderColor),this.hoverColor=(t,e)=>tQ(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return t6(this,t,e)}get(t){return t3(this,t)}describe(t,e){return t6(t4,t,e)}override(t,e){return t6(t5,t,e)}route(t,e,i,r){let s=t3(this,t),n=t3(this,i),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let t=this[o],e=n[r];return W(t)?Object.assign({},e,t):V(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach(t=>t(this))}}var t9=new t8({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:tZ},numbers:{type:"number",properties:tX}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:t2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function t7(t,e,i,r,s){let n=e[s];return n||(n=e[s]=t.measureText(s).width,i.push(s)),n>r&&(r=n),r}function et(t,e,i){let r=t.currentDevicePixelRatio,s=0!==i?Math.max(i/2,.5):0;return Math.round((e-s)*r)/r+s}function ee(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function ei(t,e,i,r){er(t,e,i,r,null)}function er(t,e,i,r,s){let n,o,a,l,h,c,u,d;let f=e.pointStyle,p=e.rotation,g=e.radius,m=(p||0)*td;if(f&&"object"==typeof f&&("[object HTMLImageElement]"===(n=f.toString())||"[object HTMLCanvasElement]"===n)){t.save(),t.translate(i,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!isNaN(g)&&!(g<=0)){switch(t.beginPath(),f){default:s?t.ellipse(i,r,s/2,g,0,0,th):t.arc(i,r,g,0,th),t.closePath();break;case"triangle":c=s?s/2:g,t.moveTo(i+Math.sin(m)*c,r-Math.cos(m)*g),m+=tg,t.lineTo(i+Math.sin(m)*c,r-Math.cos(m)*g),m+=tg,t.lineTo(i+Math.sin(m)*c,r-Math.cos(m)*g),t.closePath();break;case"rectRounded":h=.516*g,o=Math.cos(m+tp)*(l=g-h),u=Math.cos(m+tp)*(s?s/2-h:l),a=Math.sin(m+tp)*l,d=Math.sin(m+tp)*(s?s/2-h:l),t.arc(i-u,r-a,h,m-tl,m-tf),t.arc(i+d,r-o,h,m-tf,m),t.arc(i+u,r+a,h,m,m+tf),t.arc(i-d,r+o,h,m+tf,m+tl),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,c=s?s/2:l,t.rect(i-c,r-l,2*c,2*l);break}m+=tp;case"rectRot":u=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(i-u,r-a),t.lineTo(i+d,r-o),t.lineTo(i+u,r+a),t.lineTo(i-d,r+o),t.closePath();break;case"crossRot":m+=tp;case"cross":u=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(i-u,r-a),t.lineTo(i+u,r+a),t.moveTo(i+d,r-o),t.lineTo(i-d,r+o);break;case"star":u=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(i-u,r-a),t.lineTo(i+u,r+a),t.moveTo(i+d,r-o),t.lineTo(i-d,r+o),m+=tp,u=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(s?s/2:g),t.moveTo(i-u,r-a),t.lineTo(i+u,r+a),t.moveTo(i+d,r-o),t.lineTo(i-d,r+o);break;case"line":o=s?s/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(i-o,r-a),t.lineTo(i+o,r+a);break;case"dash":t.moveTo(i,r),t.lineTo(i+Math.cos(m)*(s?s/2:g),r+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function es(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function en(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function eo(t){t.restore()}function ea(t,e,i,r,s){if(!e)return t.lineTo(i.x,i.y);if("middle"===s){let r=(e.x+i.x)/2;t.lineTo(r,e.y),t.lineTo(r,i.y)}else"after"===s!=!!r?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function el(t,e,i,r){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?i.cp2x:i.cp1x,r?i.cp2y:i.cp1y,i.x,i.y)}function eh(t,e,i,r,s,n={}){let o,a;let l=U(e)?e:[e],h=n.strokeWidth>0&&""!==n.strokeColor;for(t.save(),t.font=s.string,n.translation&&t.translate(n.translation[0],n.translation[1]),F(n.rotation)||t.rotate(n.rotation),n.color&&(t.fillStyle=n.color),n.textAlign&&(t.textAlign=n.textAlign),n.textBaseline&&(t.textBaseline=n.textBaseline),o=0;o<l.length;++o)a=l[o],n.backdrop&&function(t,e){let i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}(t,n.backdrop),h&&(n.strokeColor&&(t.strokeStyle=n.strokeColor),F(n.strokeWidth)||(t.lineWidth=n.strokeWidth),t.strokeText(a,i,r,n.maxWidth)),t.fillText(a,i,r,n.maxWidth),function(t,e,i,r,s){if(s.strikethrough||s.underline){let n=t.measureText(r),o=e-n.actualBoundingBoxLeft,a=e+n.actualBoundingBoxRight,l=i-n.actualBoundingBoxAscent,h=i+n.actualBoundingBoxDescent,c=s.strikethrough?(l+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,c),t.lineTo(a,c),t.stroke()}}(t,i,r,a,n),r+=Number(s.lineHeight);t.restore()}function ec(t,e){let{x:i,y:r,w:s,h:n,radius:o}=e;t.arc(i+o.topLeft,r+o.topLeft,o.topLeft,1.5*tl,tl,!0),t.lineTo(i,r+n-o.bottomLeft),t.arc(i+o.bottomLeft,r+n-o.bottomLeft,o.bottomLeft,tl,tf,!0),t.lineTo(i+s-o.bottomRight,r+n),t.arc(i+s-o.bottomRight,r+n-o.bottomRight,o.bottomRight,tf,0,!0),t.lineTo(i+s,r+o.topRight),t.arc(i+s-o.topRight,r+o.topRight,o.topRight,0,-tf,!0),t.lineTo(i+o.topLeft,r)}let eu=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ed=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,ef=t=>+t||0;function ep(t,e){let i={},r=W(e),s=r?Object.keys(e):e,n=W(t)?r?i=>V(t[i],t[e[i]]):e=>t[e]:()=>t;for(let t of s)i[t]=ef(n(t));return i}function eg(t){return ep(t,{top:"y",right:"x",bottom:"y",left:"x"})}function em(t){return ep(t,["topLeft","topRight","bottomLeft","bottomRight"])}function eb(t){let e=eg(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function e_(t,e){t=t||{},e=e||t9.font;let i=V(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let r=V(t.style,e.style);r&&!(""+r).match(ed)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let s={family:V(t.family,e.family),lineHeight:function(t,e){let i=(""+t).match(eu);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}(V(t.lineHeight,e.lineHeight),i),size:i,style:r,weight:V(t.weight,e.weight),string:""};return s.string=!s||F(s.size)||F(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family,s}function ey(t,e,i,r){let s,n,o,a=!0;for(s=0,n=t.length;s<n;++s)if(void 0!==(o=t[s])&&(void 0!==e&&"function"==typeof o&&(o=o(e),a=!1),void 0!==i&&U(o)&&(o=o[i%o.length],a=!1),void 0!==o))return r&&!a&&(r.cacheable=!1),o}function ev(t,e){return Object.assign(Object.create(t),e)}function ew(t,e=[""],i,r,s=()=>t[0]){let n=i||t;return void 0===r&&(r=eA("_fallback",t)),new Proxy({[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:r,_getTarget:s,override:i=>ew([i,...t],e,n,r)},{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,r)=>eM(i,r,()=>(function(t,e,i,r){let s;for(let n of e)if(void 0!==(s=eA(ek(n,t),i)))return eE(t,s)?eT(i,r,t,s):s})(r,e,t,i)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>eC(t).includes(e),ownKeys:t=>eC(t),set(t,e,i){let r=t._storage||(t._storage=s());return t[e]=r[e]=i,delete t._keys,!0}})}function ex(t,e,i,r){return new Proxy({_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:eS(t,r),setContext:e=>ex(t,e,i,r),override:s=>ex(t.override(s),e,i,r)},{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>eM(t,e,()=>(function(t,e,i){let{_proxy:r,_context:s,_subProxy:n,_descriptors:o}=t,a=r[e];return to(a)&&o.isScriptable(e)&&(a=function(t,e,i,r){let{_proxy:s,_context:n,_subProxy:o,_stack:a}=i;if(a.has(t))throw Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(n,o||r);return a.delete(t),eE(t,l)&&(l=eT(s._scopes,s,t,l)),l}(e,a,t,i)),U(a)&&a.length&&(a=function(t,e,i,r){let{_proxy:s,_context:n,_subProxy:o,_descriptors:a}=i;if(void 0!==n.index&&r(t))return e[n.index%e.length];if(W(e[0])){let i=e,r=s._scopes.filter(t=>t!==i);for(let l of(e=[],i)){let i=eT(r,s,t,l);e.push(ex(i,n,o&&o[t],a))}}return e}(e,a,t,o.isIndexable)),eE(e,a)&&(a=ex(a,s,n&&n[e],o)),a})(t,e,i)),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,r)=>(t[i]=r,delete e[i],!0)})}function eS(t,e={scriptable:!0,indexable:!0}){let{_scriptable:i=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:i,indexable:r,isScriptable:to(i)?i:()=>i,isIndexable:to(r)?r:()=>r}}let ek=(t,e)=>t?t+ts(e):e,eE=(t,e)=>W(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function eM(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];let r=i();return t[e]=r,r}let eI=(t,e)=>!0===t?e:"string"==typeof t?tr(e,t):void 0;function eT(t,e,i,r){var s;let n=e._rootScopes,o=to(s=e._fallback)?s(i,r):s,a=[...t,...n],l=new Set;l.add(r);let h=eO(l,a,i,o||i,r);return null!==h&&(void 0===o||o===i||null!==(h=eO(l,a,o,h,r)))&&ew(Array.from(l),[""],n,o,()=>(function(t,e,i){let r=t._getTarget();e in r||(r[e]={});let s=r[e];return U(s)&&W(i)?i:s||{}})(e,i,r))}function eO(t,e,i,r,s){for(;i;)i=function(t,e,i,r,s){for(let o of e){let e=eI(i,o);if(e){var n;t.add(e);let o=to(n=e._fallback)?n(i,s):n;if(void 0!==o&&o!==i&&o!==r)return o}else if(!1===e&&void 0!==r&&i!==r)return null}return!1}(t,e,i,r,s);return i}function eA(t,e){for(let i of e){if(!i)continue;let e=i[t];if(void 0!==e)return e}}function eC(t){let e=t._keys;return e||(e=t._keys=function(t){let e=new Set;for(let i of t)for(let t of Object.keys(i).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function eP(t,e,i,r){let s,n,o;let{iScale:a}=t,{key:l="r"}=this._parsing,h=Array(r);for(s=0;s<r;++s)o=e[n=s+i],h[s]={r:a.parse(tr(o,l),n)};return h}let eR=Number.EPSILON||1e-14,eB=(t,e)=>e<t.length&&!t[e].skip&&t[e],eN=t=>"x"===t?"y":"x";function eD(t,e,i){return Math.max(Math.min(t,i),e)}function eL(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ej(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function eF(t,e,i){let r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[i])):r=t,r}let eU=t=>t.ownerDocument.defaultView.getComputedStyle(t,null),eW=["top","right","bottom","left"];function eH(t,e,i){let r={};i=i?"-"+i:"";for(let s=0;s<4;s++){let n=eW[s];r[n]=parseFloat(t[e+"-"+n+i])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}let ez=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function eV(t,e){if("native"in t)return t;let{canvas:i,currentDevicePixelRatio:r}=e,s=eU(i),n="border-box"===s.boxSizing,o=eH(s,"padding"),a=eH(s,"border","width"),{x:l,y:h,box:c}=function(t,e){let i,r;let s=t.touches,n=s&&s.length?s[0]:t,{offsetX:o,offsetY:a}=n,l=!1;if(ez(o,a,t.target))i=o,r=a;else{let t=e.getBoundingClientRect();i=n.clientX-t.left,r=n.clientY-t.top,l=!0}return{x:i,y:r,box:l}}(t,i),u=o.left+(c&&a.left),d=o.top+(c&&a.top),{width:f,height:p}=e;return n&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*i.width/r),y:Math.round((h-d)/p*i.height/r)}}let e$=t=>Math.round(10*t)/10;function eq(t,e,i){let r=e||1,s=e$(t.height*r),n=e$(t.width*r);t.height=e$(t.height),t.width=e$(t.width);let o=t.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==r||o.height!==s||o.width!==n)&&(t.currentDevicePixelRatio=r,o.height=s,o.width=n,t.ctx.setTransform(r,0,0,r,0,0),!0)}let eK=function(){let t=!1;try{let e={get passive(){return t=!0,!1}};eL()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function eG(t,e){let i=eU(t).getPropertyValue(e),r=i&&i.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function eY(t,e,i,r){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function eQ(t,e,i,r){return{x:t.x+i*(e.x-t.x),y:"middle"===r?i<.5?t.y:e.y:"after"===r?i<1?t.y:e.y:i>0?e.y:t.y}}function eX(t,e,i,r){let s={x:t.cp2x,y:t.cp2y},n={x:e.cp1x,y:e.cp1y},o=eY(t,s,i),a=eY(s,n,i),l=eY(n,e,i),h=eY(o,a,i),c=eY(a,l,i);return eY(h,c,i)}function eZ(t,e,i){var r;return t?(r=i,{x:t=>e+e+r-t,setWidth(t){r=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function eJ(t,e){let i,r;("ltr"===e||"rtl"===e)&&(r=[(i=t.canvas.style).getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=r)}function e0(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function e1(t){return"angle"===t?{between:tT,compare:tM,normalize:tI}:{between:tA,compare:(t,e)=>t-e,normalize:t=>t}}function e2({start:t,end:e,count:i,loop:r,style:s}){return{start:t%i,end:e%i,loop:r&&(e-t+1)%i==0,style:s}}function e5(t,e,i){let r,s,n;if(!i)return[t];let{property:o,start:a,end:l}=i,h=e.length,{compare:c,between:u,normalize:d}=e1(o),{start:f,end:p,loop:g,style:m}=function(t,e,i){let r;let{property:s,start:n,end:o}=i,{between:a,normalize:l}=e1(s),h=e.length,{start:c,end:u,loop:d}=t;if(d){for(c+=h,u+=h,r=0;r<h&&a(l(e[c%h][s]),n,o);++r)c--,u--;c%=h,u%=h}return u<c&&(u+=h),{start:c,end:u,loop:d,style:t.style}}(t,e,i),b=[],_=!1,y=null,v=()=>u(a,n,r)&&0!==c(a,n),w=()=>0===c(l,r)||u(l,n,r),x=()=>_||v(),S=()=>!_||w();for(let t=f,i=f;t<=p;++t)(s=e[t%h]).skip||(r=d(s[o]))===n||(_=u(r,a,l),null===y&&x()&&(y=0===c(r,a)?t:i),null!==y&&S()&&(b.push(e2({start:y,end:t,loop:g,count:h,style:m})),y=null),i=t,n=r);return null!==y&&b.push(e2({start:y,end:p,loop:g,count:h,style:m})),b}function e4(t,e){let i=[],r=t.segments;for(let s=0;s<r.length;s++){let n=e5(r[s],t.points,e);n.length&&i.push(...n)}return i}function e3(t,e,i,r){return r&&r.setContext&&i?function(t,e,i,r){let s=t._chart.getContext(),n=e6(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=i.length,h=[],c=n,u=e[0].start,d=u;function f(t,e,r,s){let n=a?-1:1;if(t!==e){for(t+=l;i[t%l].skip;)t-=n;for(;i[e%l].skip;)e+=n;t%l!=e%l&&(h.push({start:t%l,end:e%l,loop:r,style:s}),c=s,u=e%l)}}for(let t of e){let e;let n=i[(u=a?u:t.start)%l];for(d=u+1;d<=t.end;d++){let a=i[d%l];(function(t,e){if(!e)return!1;let i=[],r=function(t,e){return tG(e)?(i.includes(e)||i.push(e),i.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)})(e=e6(r.setContext(ev(s,{type:"segment",p0:n,p1:a,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),c)&&f(u,d-1,t.loop,c),n=a,c=e}u<d-1&&f(u,d-1,t.loop,c)}return h}(t,e,i,r):e}function e6(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function e8(t,e,i){return t.options.clip?t[i]:e[i]}class e9{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){let s=e.listeners[r],n=e.duration;s.forEach(r=>r({chart:t,initial:e.initial,numSteps:n,currentStep:Math.min(i-e.start,n)}))}_refresh(){this._request||(this._running=!0,this._request=tL.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{let s;if(!i.running||!i.items.length)return;let n=i.items,o=n.length-1,a=!1;for(;o>=0;--o)(s=n[o])._active?(s._total>i.duration&&(i.duration=s._total),s.tick(t),a=!0):(n[o]=n[n.length-1],n.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),n.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=n.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!!e&&!!e.running&&!!e.items.length}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var e7=new e9;let it="transparent",ie={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){let r=tY(t||it),s=r.valid&&tY(e||it);return s&&s.valid?s.mix(r,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class ii{constructor(t,e,i,r){let s=e[i];r=ey([t.to,r,s,t.from]);let n=ey([t.from,s,r]);this._active=!0,this._fn=t.fn||ie[t.type||typeof n],this._easing=tK[t.easing]||tK.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=n,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,n=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(n,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=ey([t.to,e,r,t.from]),this._from=ey([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e;let i=t-this._start,r=this._duration,s=this._prop,n=this._from,o=this._loop,a=this._to;if(this._active=n!==a&&(o||i<r),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=n;return}e=i/r%2,e=o&&e>1?2-e:e,e=this._easing(Math.min(1,Math.max(0,e))),this._target[s]=this._fn(n,a,e)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}class ir{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!W(t))return;let e=Object.keys(t9.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{let s=t[r];if(!W(s))return;let n={};for(let t of e)n[t]=s[t];(U(s.properties)&&s.properties||[r]).forEach(t=>{t!==r&&i.has(t)||i.set(t,n)})})}_animateOptions(t,e){let i=e.options,r=function(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}(t,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&(function(t,e){let i=[],r=Object.keys(e);for(let e=0;e<r.length;e++){let s=t[r[e]];s&&s.active()&&i.push(s.wait())}return Promise.all(i)})(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){let i;let r=this._properties,s=[],n=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();for(i=o.length-1;i>=0;--i){let l=o[i];if("$"===l.charAt(0))continue;if("options"===l){s.push(...this._animateOptions(t,e));continue}let h=e[l],c=n[l],u=r.get(l);if(c){if(u&&c.active()){c.update(u,h,a);continue}c.cancel()}if(!u||!u.duration){t[l]=h;continue}n[l]=c=new ii(u,t,l,h),s.push(c)}return s}update(t,e){if(0===this._properties.size){Object.assign(t,e);return}let i=this._createAnimations(t,e);if(i.length)return e7.add(this._chart,i),!0}}function is(t,e){let i=t&&t.options||{},r=i.reverse,s=void 0===i.min?e:0,n=void 0===i.max?e:0;return{start:r?n:s,end:r?s:n}}function io(t,e){let i,r;let s=[],n=t._getSortedDatasetMetas(e);for(i=0,r=n.length;i<r;++i)s.push(n[i].index);return s}function ia(t,e,i,r={}){let s,n,o,a;let l=t.keys,h="single"===r.mode;if(null===e)return;let c=!1;for(s=0,n=l.length;s<n;++s){if((o=+l[s])===i){if(c=!0,r.all)continue;break}H(a=t.values[o])&&(h||0===e||tb(e)===tb(a))&&(e+=a)}return c||r.all?e:0}function il(t,e){let i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function ih(t,e,i,r){for(let s of e.getMatchingVisibleMetas(r).reverse()){let e=t[s.index];if(i&&e>0||!i&&e<0)return s.index}return null}function ic(t,e){let i;let{chart:r,_cachedMeta:s}=t,n=r._stacks||(r._stacks={}),{iScale:o,vScale:a,index:l}=s,h=o.axis,c=a.axis,u=`${o.id}.${a.id}.${s.stack||s.type}`,d=e.length;for(let t=0;t<d;++t){let r=e[t],{[h]:o,[c]:d}=r;(i=(r._stacks||(r._stacks={}))[c]=function(t,e,i){let r=t[e]||(t[e]={});return r[i]||(r[i]={})}(n,u,o))[l]=d,i._top=ih(i,a,!0,s.type),i._bottom=ih(i,a,!1,s.type),(i._visualValues||(i._visualValues={}))[l]=d}}function iu(t,e){let i=t.scales;return Object.keys(i).filter(t=>i[t].axis===e).shift()}function id(t,e){let i=t.controller.index,r=t.vScale&&t.vScale.axis;if(r)for(let s of e=e||t._parsed){let t=s._stacks;if(!t||void 0===t[r]||void 0===t[r][i])return;delete t[r][i],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[i]&&delete t[r]._visualValues[i]}}let ip=t=>"reset"===t||"none"===t,ig=(t,e)=>e?t:Object.assign({},t),im=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:io(i,!0),values:null};class ib{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=il(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&id(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(t,e,i,r)=>"x"===t?e:"r"===t?r:i,s=e.xAxisID=V(i.xAxisID,iu(t,"x")),n=e.yAxisID=V(i.yAxisID,iu(t,"y")),o=e.rAxisID=V(i.rAxisID,iu(t,"r")),a=e.indexAxis,l=e.iAxisID=r(a,s,n,o),h=e.vAxisID=r(a,n,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(n),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&tN(this._data,this),t._stacked&&id(t)}_dataCheck(){let t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(W(e)){let t=this._cachedMeta;this._data=function(t,e){let i,r,s;let{iScale:n,vScale:o}=e,a="x"===n.axis?"x":"y",l="x"===o.axis?"x":"y",h=Object.keys(t),c=Array(h.length);for(i=0,r=h.length;i<r;++i)s=h[i],c[i]={[a]:s,[l]:t[s]};return c}(e,t)}else if(i!==e){if(i){tN(i,this);let t=this._cachedMeta;id(t),t._parsed=[]}e&&Object.isExtensible(e)&&function(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),tB.forEach(e=>{let i="_onData"+ts(e),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){let s=r.apply(this,e);return t._chartjs.listeners.forEach(t=>{"function"==typeof t[i]&&t[i](...e)}),s}})})}(e,this),this._syncList=[],this._data=e}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let e=this._cachedMeta,i=this.getDataset(),r=!1;this._dataCheck();let s=e._stacked;e._stacked=il(e.vScale,e),e.stack!==i.stack&&(r=!0,id(e),e.stack=i.stack),this._resyncElements(t),(r||s!==e._stacked)&&(ic(this,e._parsed),e._stacked=il(e.vScale,e))}configure(){let t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){let i,r,s;let{_cachedMeta:n,_data:o}=this,{iScale:a,_stacked:l}=n,h=a.axis,c=0===t&&e===o.length||n._sorted,u=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=o,n._sorted=!0,s=o;else{s=U(o[t])?this.parseArrayData(n,o,t,e):W(o[t])?this.parseObjectData(n,o,t,e):this.parsePrimitiveData(n,o,t,e);let a=()=>null===r[h]||u&&r[h]<u[h];for(i=0;i<e;++i)n._parsed[i+t]=r=s[i],c&&(a()&&(c=!1),u=r);n._sorted=c}l&&ic(this,s)}parsePrimitiveData(t,e,i,r){let s,n;let{iScale:o,vScale:a}=t,l=o.axis,h=a.axis,c=o.getLabels(),u=o===a,d=Array(r);for(s=0;s<r;++s)n=s+i,d[s]={[l]:u||o.parse(c[n],n),[h]:a.parse(e[n],n)};return d}parseArrayData(t,e,i,r){let s,n,o;let{xScale:a,yScale:l}=t,h=Array(r);for(s=0;s<r;++s)o=e[n=s+i],h[s]={x:a.parse(o[0],n),y:l.parse(o[1],n)};return h}parseObjectData(t,e,i,r){let s,n,o;let{xScale:a,yScale:l}=t,{xAxisKey:h="x",yAxisKey:c="y"}=this._parsing,u=Array(r);for(s=0;s<r;++s)o=e[n=s+i],u[s]={x:a.parse(tr(o,h),n),y:l.parse(tr(o,c),n)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){let r=this.chart,s=this._cachedMeta,n=e[t.axis];return ia({keys:io(r,!0),values:e._stacks[t.axis]._visualValues},n,s.index,{mode:i})}updateRangeFromParsed(t,e,i,r){let s=i[e.axis],n=null===s?NaN:s,o=r&&i._stacks[e.axis];r&&o&&(r.values=o,n=ia(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,n),t.max=Math.max(t.max,n)}getMinMax(t,e){let i,r;let s=this._cachedMeta,n=s._parsed,o=s._sorted&&t===s.iScale,a=n.length,l=this._getOtherScale(t),h=im(e,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=function(t){let{min:e,max:i,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}(l);function f(){let e=(r=n[i])[l.axis];return!H(r[t.axis])||u>e||d<e}for(i=0;i<a&&(f()||(this.updateRangeFromParsed(c,t,r,h),!o));++i);if(o){for(i=a-1;i>=0;--i)if(!f()){this.updateRangeFromParsed(c,t,r,h);break}}return c}getAllParsedValues(t){let e,i,r;let s=this._cachedMeta._parsed,n=[];for(e=0,i=s.length;e<i;++e)H(r=s[e][t.axis])&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){let e=this._cachedMeta,i=e.iScale,r=e.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){var e;let i,r,s,n;let o=this._cachedMeta;this.update(t||"default"),o._clip=(W(e=V(this.options.clip,function(t,e,i){if(!1===i)return!1;let r=is(t,i),s=is(e,i);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}(o.xScale,o.yScale,this.getMaxOverflow())))?(i=e.top,r=e.right,s=e.bottom,n=e.left):i=r=s=n=e,{top:i,right:r,bottom:s,left:n,disabled:!1===e})}update(t){}draw(){let t;let e=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],n=i.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,h=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(e,n,a,l),t=a;t<a+l;++t){let i=s[t];i.hidden||(i.active&&h?o.push(i):i.draw(e,n))}for(t=0;t<o.length;++t)o[t].draw(e,n)}getStyle(t,e){let i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){var r;let s;let n=this.getDataset();if(t>=0&&t<this._cachedMeta.data.length){let e=this._cachedMeta.data[t];(s=e.$context||(e.$context=ev(this.getContext(),{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"}))).parsed=this.getParsed(t),s.raw=n.data[t],s.index=s.dataIndex=t}else(s=this.$context||(this.$context=ev(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:r=this.index,index:r,mode:"default",type:"dataset"}))).dataset=n,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){let r="active"===e,s=this._cachedDataOpts,n=t+"-"+e,o=s[n],a=this.enableOptionSharing&&tn(i);if(o)return ig(o,a);let l=this.chart.config,h=l.datasetElementScopeKeys(this._type,t),c=r?[`${t}Hover`,"hover",t,""]:[t,""],u=l.getOptionScopes(this.getDataset(),h),d=Object.keys(t9.elements[t]),f=l.resolveNamedOptions(u,d,()=>this.getContext(i,r,e),c);return f.$shared&&(f.$shared=a,s[n]=Object.freeze(ig(f,a))),f}_resolveAnimations(t,e,i){let r;let s=this.chart,n=this._cachedDataOpts,o=`animation-${e}`,a=n[o];if(a)return a;if(!1!==s.options.animation){let s=this.chart.config,n=s.datasetAnimationScopeKeys(this._type,e),o=s.getOptionScopes(this.getDataset(),n);r=s.createResolver(o,this.getContext(t,i,e))}let l=new ir(s,r&&r.animations);return r&&r._cacheable&&(n[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||ip(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){let i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,s=this.getSharedOptions(i),n=this.includeOptions(e,s)||s!==r;return this.updateSharedOptions(s,e,i),{sharedOptions:s,includeOptions:n}}updateElement(t,e,i,r){ip(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!ip(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;let s=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let e=this._data,i=this._cachedMeta.data;for(let[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];let r=i.length,s=e.length,n=Math.min(s,r);n&&this.parse(0,n),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,e,i=!0){let r;let s=this._cachedMeta,n=s.data,o=t+e,a=t=>{for(t.length+=e,r=t.length-1;r>=o;r--)t[r]=t[r-e]};for(a(n),r=t;r<o;++r)n[r]=new this.dataElementType;this._parsing&&a(s._parsed),this.parse(t,e),i&&this.updateElements(n,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){let i=this._cachedMeta;if(this._parsing){let r=i._parsed.splice(t,e);i._stacked&&id(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function i_(t,e,i,r){return U(t)?function(t,e,i,r){let s=i.parse(t[0],r),n=i.parse(t[1],r),o=Math.min(s,n),a=Math.max(s,n),l=o,h=a;Math.abs(o)>Math.abs(a)&&(l=a,h=o),e[i.axis]=h,e._custom={barStart:l,barEnd:h,start:s,end:n,min:o,max:a}}(t,e,i,r):e[i.axis]=i.parse(t,r),e}function iy(t,e,i,r){let s,n,o,a;let l=t.iScale,h=t.vScale,c=l.getLabels(),u=l===h,d=[];for(s=i,n=i+r;s<n;++s)a=e[s],(o={})[l.axis]=u||l.parse(c[s],s),d.push(i_(a,o,h,s));return d}function iv(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function iw(t,e,i,r){var s;return t=r?ix(t=(s=t)===e?i:s===i?e:s,i,e):ix(t,e,i)}function ix(t,e,i){return"start"===t?e:"end"===t?i:t}class iS extends ib{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,r){return iy(t,e,i,r)}parseArrayData(t,e,i,r){return iy(t,e,i,r)}parseObjectData(t,e,i,r){let s,n,o,a;let{iScale:l,vScale:h}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,d="x"===l.axis?c:u,f="x"===h.axis?c:u,p=[];for(s=i,n=i+r;s<n;++s)a=e[s],(o={})[l.axis]=l.parse(tr(a,d),s),p.push(i_(tr(a,f),o,h,s));return p}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);let s=i._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let{iScale:e,vScale:i}=this._cachedMeta,r=this.getParsed(t),s=r._custom,n=iv(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+e.getLabelForValue(r[e.axis]),value:n}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){let e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){let s="reset"===r,{index:n,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),h=this._getRuler(),{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,r);for(let d=e;d<e+i;d++){let e=this.getParsed(d),i=s||F(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,h),p=(e._stacks||{})[o.axis],g={horizontal:l,base:i.base,enableBorderRadius:!p||iv(e._custom)||n===p._top||n===p._bottom,x:l?i.head:f.center,y:l?f.center:i.head,height:l?f.size:Math.abs(i.size),width:l?Math.abs(i.size):f.size};u&&(g.options=c||this.resolveDataElementOptions(d,t[d].active?"active":r));let m=g.options||t[d].options;(function(t,e,i,r){let s,n,o,a,l,h=e.borderSkipped,c={};if(!h){t.borderSkipped=c;return}if(!0===h){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:u,end:d,reverse:f,top:p,bottom:g}=(t.horizontal?(s=t.base>t.x,n="left",o="right"):(s=t.base<t.y,n="bottom",o="top"),s?(a="end",l="start"):(a="start",l="end"),{start:n,end:o,reverse:s,top:a,bottom:l});"middle"===h&&i&&(t.enableBorderRadius=!0,(i._top||0)===r?h=p:(i._bottom||0)===r?h=g:(c[iw(g,u,d,f)]=!0,h=p)),c[iw(h,u,d,f)]=!0,t.borderSkipped=c})(g,m,p,n),function(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}(g,m,h.ratio),this.updateElement(t[d],d,g,r)}}_getStacks(t,e){let{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),s=i.options.stacked,n=[],o=this._cachedMeta.controller.getParsed(e),a=o&&o[i.axis],l=t=>{let e=t._parsed.find(t=>t[i.axis]===a),r=e&&e[t.vScale.axis];if(F(r)||isNaN(r))return!0};for(let i of r)if(!(void 0!==e&&l(i))&&((!1===s||-1===n.indexOf(i.stack)||void 0===s&&void 0===i.stack)&&n.push(i.stack),i.index===t))break;return n.length||n.push(void 0),n}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){let t={},e=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[V("x"===this.chart.options.indexAxis?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){let r=this._getStacks(t,i),s=void 0!==e?r.indexOf(e):-1;return -1===s?r.length-1:s}_getRuler(){let t,e;let i=this.options,r=this._cachedMeta,s=r.iScale,n=[];for(t=0,e=r.data.length;t<e;++t)n.push(s.getPixelForValue(this.getParsed(t)[s.axis],t));let o=i.barThickness;return{min:o||function(t){let e,i,r,s;let n=t.iScale,o=function(t,e){if(!t._cache.$bar){let i=t.getMatchingVisibleMetas(e),r=[];for(let e=0,s=i.length;e<s;e++)r=r.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=tD(r.sort((t,e)=>t-e))}return t._cache.$bar}(n,t.type),a=n._length,l=()=>{32767!==r&&-32768!==r&&(tn(s)&&(a=Math.min(a,Math.abs(r-s)||a)),s=r)};for(e=0,i=o.length;e<i;++e)r=n.getPixelForValue(o[e]),l();for(e=0,s=void 0,i=n.ticks.length;e<i;++e)r=n.getPixelForTick(e),l();return a}(r),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:i.grouped,ratio:o?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(t){let e,i;let{_cachedMeta:{vScale:r,_stacked:s,index:n},options:{base:o,minBarLength:a}}=this,l=o||0,h=this.getParsed(t),c=h._custom,u=iv(c),d=h[r.axis],f=0,p=s?this.applyStack(r,h,s):d;p!==d&&(f=p-d,p=d),u&&(d=c.barStart,p=c.barEnd-c.barStart,0!==d&&tb(d)!==tb(c.barEnd)&&(f=0),f+=d);let g=F(o)||u?f:o,m=r.getPixelForValue(g);if(Math.abs(i=(e=this.chart.getDataVisibility(t)?r.getPixelForValue(f+p):m)-m)<a){var b;i=(0!==(b=i)?tb(b):(r.isHorizontal()?1:-1)*(r.min>=l?1:-1))*a,d===l&&(m-=i/2);let t=r.getPixelForDecimal(0),o=r.getPixelForDecimal(1);e=(m=Math.max(Math.min(m,Math.max(t,o)),Math.min(t,o)))+i,s&&!u&&(h._stacks[r.axis]._visualValues[n]=r.getValueForPixel(e)-r.getValueForPixel(m))}if(m===r.getPixelForValue(l)){let t=tb(i)*r.getLineWidthForValue(l)/2;m+=t,i-=t}return{size:i,base:m,head:e,center:e+i/2}}_calculateBarIndexPixels(t,e){let i,r;let s=e.scale,n=this.options,o=n.skipNull,a=V(n.maxBarThickness,1/0),l=this._getAxisCount();if(e.grouped){let s=o?this._getStackCount(t):e.stackCount,h="flex"===n.barThickness?function(t,e,i,r){let s=e.pixels,n=s[t],o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null,l=i.categoryPercentage;null===o&&(o=n-(null===a?e.end-e.start:a-n)),null===a&&(a=n+n-o);let h=n-(n-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:i.barPercentage,start:h}}(t,e,n,s*l):function(t,e,i,r){let s,n;let o=i.barThickness;return F(o)?(s=e.min*i.categoryPercentage,n=i.barPercentage):(s=o*r,n=1),{chunk:s/r,ratio:n,start:e.pixels[t]-s/2}}(t,e,n,s*l),c="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(V(c,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+u;i=h.start+h.chunk*d+h.chunk/2,r=Math.min(a,h.chunk*h.ratio)}else i=s.getPixelForValue(this.getParsed(t)[s.axis],t),r=Math.min(a,e.min*e.ratio);return{base:i-r/2,head:i+r/2,center:i,size:r}}draw(){let t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length,s=0;for(;s<r;++s)null===this.getParsed(s)[e.axis]||i[s].hidden||i[s].draw(this._ctx)}}class ik extends ib{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,r){let s=super.parsePrimitiveData(t,e,i,r);for(let t=0;t<s.length;t++)s[t]._custom=this.resolveDataElementOptions(t+i).radius;return s}parseArrayData(t,e,i,r){let s=super.parseArrayData(t,e,i,r);for(let t=0;t<s.length;t++){let r=e[i+t];s[t]._custom=V(r[2],this.resolveDataElementOptions(t+i).radius)}return s}parseObjectData(t,e,i,r){let s=super.parseObjectData(t,e,i,r);for(let t=0;t<s.length;t++){let r=e[i+t];s[t]._custom=V(r&&r.r&&+r.r,this.resolveDataElementOptions(t+i).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=e,n=this.getParsed(t),o=r.getLabelForValue(n.x),a=s.getLabelForValue(n.y),l=n._custom;return{label:i[t]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(t){let e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,r){let s="reset"===r,{iScale:n,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,r),h=n.axis,c=o.axis;for(let u=e;u<e+i;u++){let e=t[u],i=!s&&this.getParsed(u),d={},f=d[h]=s?n.getPixelForDecimal(.5):n.getPixelForValue(i[h]),p=d[c]=s?o.getBasePixel():o.getPixelForValue(i[c]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(u,e.active?"active":r),s&&(d.options.radius=0)),this.updateElement(e,u,d,r)}}resolveDataElementOptions(t,e){let i=this.getParsed(t),r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));let s=r.radius;return"active"!==e&&(r.radius=0),r.radius+=V(i&&i._custom,s),r}}class iE extends ib{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data,{labels:{pointStyle:i,textAlign:r,color:s,useBorderRadius:n,borderRadius:o}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((e,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:e,fillStyle:l.backgroundColor,fontColor:s,hidden:!t.getDataVisibility(a),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:r,pointStyle:i,borderRadius:n&&(o||l.borderRadius),index:a}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){let i=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=i;else{let s,n,o=t=>+i[t];if(W(i[t])){let{key:t="value"}=this._parsing;o=e=>+tr(i[e],t)}for(s=t,n=t+e;s<n;++s)r._parsed[s]=o(s)}}_getRotation(){return tx(this.options.rotation-90)}_getCircumference(){return tx(this.options.circumference)}_getRotationExtents(){let t=th,e=-th;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),n=r._getCircumference();t=Math.min(t,s),e=Math.max(e,s+n)}return{rotation:t,circumference:e-t}}update(t){let{chartArea:e}=this.chart,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,n=Math.max((Math.min(e.width,e.height)-s)/2,0),o=Math.min($(this.options.cutout,n),1),a=this._getRingWeight(this.index),{circumference:l,rotation:h}=this._getRotationExtents(),{ratioX:c,ratioY:u,offsetX:d,offsetY:f}=function(t,e,i){let r=1,s=1,n=0,o=0;if(e<th){let a=t+e,l=Math.cos(t),h=Math.sin(t),c=Math.cos(a),u=Math.sin(a),d=(e,r,s)=>tT(e,t,a,!0)?1:Math.max(r,r*i,s,s*i),f=(e,r,s)=>tT(e,t,a,!0)?-1:Math.min(r,r*i,s,s*i),p=d(0,l,c),g=d(tf,h,u),m=f(tl,l,c),b=f(tl+tf,h,u);r=(p-m)/2,s=(g-b)/2,n=-(p+m)/2,o=-(g+b)/2}return{ratioX:r,ratioY:s,offsetX:n,offsetY:o}}(h,l,o),p=(e.width-s)/c,g=(e.height-s)/u,m=q(this.options.radius,Math.max(Math.min(p,g)/2,0)),b=Math.max(m*o,0),_=(m-b)/this._getVisibleDatasetWeightTotal();this.offsetX=d*m,this.offsetY=f*m,i.total=this.calculateTotal(),this.outerRadius=m-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*a,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){let i=this.options,r=this._cachedMeta,s=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*s/th)}updateElements(t,e,i,r){let s;let n="reset"===r,o=this.chart,a=o.chartArea,l=o.options.animation,h=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=n&&l.animateScale,d=u?0:this.innerRadius,f=u?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(e,r),m=this._getRotation();for(s=0;s<e;++s)m+=this._circumference(s,n);for(s=e;s<e+i;++s){let e=this._circumference(s,n),i=t[s],o={x:h+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:f,innerRadius:d};g&&(o.options=p||this.resolveDataElementOptions(s,i.active?"active":r)),m+=e,this.updateElement(i,s,o,r)}}calculateTotal(){let t;let e=this._cachedMeta,i=e.data,r=0;for(t=0;t<i.length;t++){let s=e._parsed[t];null!==s&&!isNaN(s)&&this.chart.getDataVisibility(t)&&!i[t].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){let e=this._cachedMeta.total;return e>0&&!isNaN(t)?Math.abs(t)/e*th:0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=t0(e._parsed[t],i.options.locale);return{label:r[t]||"",value:s}}getMaxBorderWidth(t){let e,i,r,s,n,o=0,a=this.chart;if(!t){for(e=0,i=a.data.datasets.length;e<i;++e)if(a.isDatasetVisible(e)){t=(r=a.getDatasetMeta(e)).data,s=r.controller;break}}if(!t)return 0;for(e=0,i=t.length;e<i;++e)"inner"!==(n=s.resolveDataElementOptions(e)).borderAlign&&(o=Math.max(o,n.borderWidth||0,n.hoverBorderWidth||0));return o}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){let t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(V(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class iM extends ib{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let e=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=e,n=this.chart._animationsDisabled,{start:o,count:a}=tH(e,r,n);this._drawStart=o,this._drawCount=a,tz(e)&&(o=0,a=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;let l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!n,options:l},t),this.updateElements(r,o,a,t)}updateElements(t,e,i,r){let s="reset"===r,{iScale:n,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:h,includeOptions:c}=this._getSharedOptions(e,r),u=n.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=tv(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||"none"===r,b=e+i,_=t.length,y=e>0&&this.getParsed(e-1);for(let i=0;i<_;++i){let f=t[i],_=m?f:{};if(i<e||i>=b){_.skip=!0;continue}let v=this.getParsed(i),w=F(v[d]),x=_[u]=n.getPixelForValue(v[u],i),S=_[d]=s||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],i);_.skip=isNaN(x)||isNaN(S)||w,_.stop=i>0&&Math.abs(v[u]-y[u])>g,p&&(_.parsed=v,_.raw=l.data[i]),c&&(_.options=h||this.resolveDataElementOptions(i,f.active?"active":r)),m||this.updateElement(f,i,_,r),y=v}}getMaxOverflow(){let t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];return r.length?Math.max(i,r[0].size(this.resolveDataElementOptions(0)),r[r.length-1].size(this.resolveDataElementOptions(r.length-1)))/2:i}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class iI extends ib{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((e,s)=>{let n=t.getDatasetMeta(0).controller.getStyle(s);return{text:e,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,fontColor:r,lineWidth:n.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=t0(e._parsed[t].r,i.options.locale);return{label:r[t]||"",value:s}}parseObjectData(t,e,i,r){return eP.bind(this)(t,e,i,r)}update(t){let e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){let t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,i)=>{let r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){let t=this.chart,e=t.chartArea,i=t.options,r=Math.max(Math.min(e.right-e.left,e.bottom-e.top)/2,0),s=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),n=(r-s)/t.getVisibleDatasetCount();this.outerRadius=r-n*this.index,this.innerRadius=this.outerRadius-n}updateElements(t,e,i,r){let s;let n="reset"===r,o=this.chart,a=o.options.animation,l=this._cachedMeta.rScale,h=l.xCenter,c=l.yCenter,u=l.getIndexAngle(0)-.5*tl,d=u,f=360/this.countVisibleElements();for(s=0;s<e;++s)d+=this._computeAngle(s,r,f);for(s=e;s<e+i;s++){let e=t[s],i=d,p=d+this._computeAngle(s,r,f),g=o.getDataVisibility(s)?l.getDistanceFromCenterForValue(this.getParsed(s).r):0;d=p,n&&(a.animateScale&&(g=0),a.animateRotate&&(i=p=u));let m={x:h,y:c,innerRadius:0,outerRadius:g,startAngle:i,endAngle:p,options:this.resolveDataElementOptions(s,e.active?"active":r)};this.updateElement(e,s,m,r)}}countVisibleElements(){let t=this._cachedMeta,e=0;return t.data.forEach((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?tx(this.resolveDataElementOptions(t,e).angle||i):0}}class iT extends iE{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class iO extends ib{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return eP.bind(this)(t,e,i,r)}update(t){let e=this._cachedMeta,i=e.dataset,r=e.data||[],s=e.iScale.getLabels();if(i.points=r,"resize"!==t){let e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);let n={_loop:!0,_fullLoop:s.length===r.length,options:e};this.updateElement(i,void 0,n,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){let s=this._cachedMeta.rScale,n="reset"===r;for(let o=e;o<e+i;o++){let e=t[o],i=this.resolveDataElementOptions(o,e.active?"active":r),a=s.getPointPositionForValue(o,this.getParsed(o).r),l=n?s.xCenter:a.x,h=n?s.yCenter:a.y,c={x:l,y:h,angle:a.angle,skip:isNaN(l)||isNaN(h),options:i};this.updateElement(e,o,c,r)}}}class iA extends ib{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=e,n=this.getParsed(t),o=r.getLabelForValue(n.x),a=s.getLabelForValue(n.y);return{label:i[t]||"",value:"("+o+", "+a+")"}}update(t){let e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled,{start:s,count:n}=tH(e,i,r);if(this._drawStart=s,this._drawCount=n,tz(e)&&(s=0,n=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:s,_dataset:n}=e;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!n._decimated,s.points=i;let o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:o},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,s,n,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){let s="reset"===r,{iScale:n,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,h=this.resolveDataElementOptions(e,r),c=this.getSharedOptions(h),u=this.includeOptions(r,c),d=n.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=tv(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||"none"===r,_=e>0&&this.getParsed(e-1);for(let h=e;h<e+i;++h){let e=t[h],i=this.getParsed(h),p=b?e:{},y=F(i[f]),v=p[d]=n.getPixelForValue(i[d],h),w=p[f]=s||y?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,i,a):i[f],h);p.skip=isNaN(v)||isNaN(w)||y,p.stop=h>0&&Math.abs(i[d]-_[d])>m,g&&(p.parsed=i,p.raw=l.data[h]),u&&(p.options=c||this.resolveDataElementOptions(h,e.active?"active":r)),b||this.updateElement(e,h,p,r),_=i}this.updateSharedOptions(c,r,h)}getMaxOverflow(){let t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}let i=t.dataset,r=i.options&&i.options.borderWidth||0;return e.length?Math.max(r,e[0].size(this.resolveDataElementOptions(0)),e[e.length-1].size(this.resolveDataElementOptions(e.length-1)))/2:r}}function iC(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}class iP{static override(t){Object.assign(iP.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return iC()}parse(){return iC()}format(){return iC()}add(){return iC()}diff(){return iC()}startOf(){return iC()}endOf(){return iC()}}var iR={_date:iP};function iB(t,e,i,r,s){let n=t.getSortedVisibleDatasetMetas(),o=i[e];for(let t=0,i=n.length;t<i;++t){let{index:i,data:a}=n[t],{lo:l,hi:h}=function(t,e,i,r){let{controller:s,data:n,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&"r"!==e&&o&&n.length){let o=a._reversePixels?tR:tP;if(r){if(s._sharedOptions){let t=n[0],r="function"==typeof t.getRange&&t.getRange(e);if(r){let t=o(n,e,i-r),s=o(n,e,i+r);return{lo:t.lo,hi:s.hi}}}}else{let r=o(n,e,i);if(l){let{vScale:e}=s._cachedMeta,{_parsed:i}=t,n=i.slice(0,r.lo+1).reverse().findIndex(t=>!F(t[e.axis]));r.lo-=Math.max(0,n);let o=i.slice(r.hi).findIndex(t=>!F(t[e.axis]));r.hi+=Math.max(0,o)}return r}}return{lo:0,hi:n.length-1}}(n[t],e,o,s);for(let t=l;t<=h;++t){let e=a[t];e.skip||r(e,i,t)}}}function iN(t,e,i,r,s){let n=[];return(s||t.isPointInArea(e))&&iB(t,i,e,function(i,o,a){(s||es(i,t.chartArea,0))&&i.inRange(e.x,e.y,r)&&n.push({element:i,datasetIndex:o,index:a})},!0),n}function iD(t,e,i,r,s,n){let o;return n||t.isPointInArea(e)?"r"!==i||r?function(t,e,i,r,s,n){let o=[],a=function(t){let e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,r){return Math.sqrt(Math.pow(e?Math.abs(t.x-r.x):0,2)+Math.pow(i?Math.abs(t.y-r.y):0,2))}}(i),l=Number.POSITIVE_INFINITY;return iB(t,i,e,function(i,h,c){let u=i.inRange(e.x,e.y,s);if(r&&!u)return;let d=i.getCenterPoint(s);if(!(n||t.isPointInArea(d))&&!u)return;let f=a(e,d);f<l?(o=[{element:i,datasetIndex:h,index:c}],l=f):f===l&&o.push({element:i,datasetIndex:h,index:c})}),o}(t,e,i,r,s,n):(o=[],iB(t,i,e,function(t,i,r){let{startAngle:n,endAngle:a}=t.getProps(["startAngle","endAngle"],s),{angle:l}=tk(t,{x:e.x,y:e.y});tT(l,n,a)&&o.push({element:t,datasetIndex:i,index:r})}),o):[]}function iL(t,e,i,r,s){let n=[],o="x"===i?"inXRange":"inYRange",a=!1;return(iB(t,i,e,(t,r,l)=>{t[o]&&t[o](e[i],s)&&(n.push({element:t,datasetIndex:r,index:l}),a=a||t.inRange(e.x,e.y,s))}),r&&!a)?[]:n}var ij={modes:{index(t,e,i,r){let s=eV(e,t),n=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?iN(t,s,n,r,o):iD(t,s,n,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{let e=a[0].index,i=t.data[e];i&&!i.skip&&l.push({element:i,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,i,r){let s=eV(e,t),n=i.axis||"xy",o=i.includeInvisible||!1,a=i.intersect?iN(t,s,n,r,o):iD(t,s,n,!1,r,o);if(a.length>0){let e=a[0].datasetIndex,i=t.getDatasetMeta(e).data;a=[];for(let t=0;t<i.length;++t)a.push({element:i[t],datasetIndex:e,index:t})}return a},point(t,e,i,r){let s=eV(e,t);return iN(t,s,i.axis||"xy",r,i.includeInvisible||!1)},nearest(t,e,i,r){let s=eV(e,t),n=i.axis||"xy",o=i.includeInvisible||!1;return iD(t,s,n,i.intersect,r,o)},x(t,e,i,r){let s=eV(e,t);return iL(t,s,"x",i.intersect,r)},y(t,e,i,r){let s=eV(e,t);return iL(t,s,"y",i.intersect,r)}}};let iF=["left","top","right","bottom"];function iU(t,e){return t.filter(t=>t.pos===e)}function iW(t,e){return t.filter(t=>-1===iF.indexOf(t.pos)&&t.box.axis===e)}function iH(t,e){return t.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function iz(t,e,i,r){return Math.max(t[i],e[i])+Math.max(t[r],e[r])}function iV(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function i$(t,e,i,r){let s,n,o,a,l,h;let c=[];for(s=0,n=t.length,l=0;s<n;++s){(a=(o=t[s]).box).update(o.width||e.w,o.height||e.h,function(t,e){let i=e.maxPadding;return function(t){let r={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{r[t]=Math.max(e[t],i[t])}),r}(t?["left","right"]:["top","bottom"])}(o.horizontal,e));let{same:n,other:u}=function(t,e,i,r){let{pos:s,box:n}=i,o=t.maxPadding;if(!W(s)){i.size&&(t[s]-=i.size);let e=r[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?n.height:n.width),i.size=e.size/e.count,t[s]+=i.size}n.getPadding&&iV(o,n.getPadding());let a=Math.max(0,e.outerWidth-iz(o,t,"left","right")),l=Math.max(0,e.outerHeight-iz(o,t,"top","bottom")),h=a!==t.w,c=l!==t.h;return t.w=a,t.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}(e,i,o,r);l|=n&&c.length,h=h||u,a.fullSize||c.push(o)}return l&&i$(c,e,i,r)||h}function iq(t,e,i,r,s){t.top=i,t.left=e,t.right=e+r,t.bottom=i+s,t.width=r,t.height=s}function iK(t,e,i,r){let s=i.padding,{x:n,y:o}=e;for(let a of t){let t=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/l.weight||1;if(a.horizontal){let r=e.w*h,n=l.size||t.height;tn(l.start)&&(o=l.start),t.fullSize?iq(t,s.left,o,i.outerWidth-s.right-s.left,n):iq(t,e.left+l.placed,o,r,n),l.start=o,l.placed+=r,o=t.bottom}else{let r=e.h*h,o=l.size||t.width;tn(l.start)&&(n=l.start),t.fullSize?iq(t,n,s.top,o,i.outerHeight-s.bottom-s.top):iq(t,n,e.top+l.placed,o,r),l.start=n,l.placed+=r,n=t.right}}e.x=n,e.y=o}var iG={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){let i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,r){if(!t)return;let s=eb(t.options.layout.padding),n=Math.max(e-s.width,0),o=Math.max(i-s.height,0),a=function(t){let e=function(t){let e,i,r,s,n,o;let a=[];for(e=0,i=(t||[]).length;e<i;++e)r=t[e],({position:s,options:{stack:n,stackWeight:o=1}}=r),a.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:n&&s+n,stackWeight:o});return a}(t),i=iH(e.filter(t=>t.box.fullSize),!0),r=iH(iU(e,"left"),!0),s=iH(iU(e,"right")),n=iH(iU(e,"top"),!0),o=iH(iU(e,"bottom")),a=iW(e,"x"),l=iW(e,"y");return{fullSize:i,leftAndTop:r.concat(n),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:iU(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:n.concat(o).concat(a)}}(t.boxes),l=a.vertical,h=a.horizontal;G(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});let c=Object.freeze({outerWidth:e,outerHeight:i,padding:s,availableWidth:n,availableHeight:o,vBoxMaxWidth:n/2/(l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1),hBoxMaxHeight:o/2}),u=Object.assign({},s);iV(u,eb(r));let d=Object.assign({maxPadding:u,w:n,h:o,x:s.left,y:s.top},s),f=function(t,e){let i,r,s;let n=function(t){let e={};for(let i of t){let{stack:t,pos:r,stackWeight:s}=i;if(!t||!iF.includes(r))continue;let n=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});n.count++,n.weight+=s}return e}(t),{vBoxMaxWidth:o,hBoxMaxHeight:a}=e;for(i=0,r=t.length;i<r;++i){let{fullSize:r}=(s=t[i]).box,l=n[s.stack],h=l&&s.stackWeight/l.weight;s.horizontal?(s.width=h?h*o:r&&e.availableWidth,s.height=a):(s.width=o,s.height=h?h*a:r&&e.availableHeight)}return n}(l.concat(h),c);i$(a.fullSize,d,c,f),i$(l,d,c,f),i$(h,d,c,f)&&i$(l,d,c,f),function(t){let e=t.maxPadding;function i(i){let r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(d),iK(a.leftAndTop,d,c,f),d.x+=d.w,d.y+=d.h,iK(a.rightAndBottom,d,c,f),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},G(a.chartArea,e=>{let i=e.box;Object.assign(i,t.chartArea),i.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class iY{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class iQ extends iY{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}let iX="$chartjs",iZ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},iJ=t=>null===t||""===t,i0=!!eK&&{passive:!0};function i1(t,e){for(let i of t)if(i===e||i.contains(e))return!0}function i2(t,e,i){let r=t.canvas,s=new MutationObserver(t=>{let e=!1;for(let i of t)e=(e=e||i1(i.addedNodes,r))&&!i1(i.removedNodes,r);e&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function i5(t,e,i){let r=t.canvas,s=new MutationObserver(t=>{let e=!1;for(let i of t)e=(e=e||i1(i.removedNodes,r))&&!i1(i.addedNodes,r);e&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}let i4=new Map,i3=0;function i6(){let t=window.devicePixelRatio;t!==i3&&(i3=t,i4.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function i8(t,e,i){let r=t.canvas,s=r&&ej(r);if(!s)return;let n=tj((t,e)=>{let r=s.clientWidth;i(t,e),r<s.clientWidth&&i()},window),o=new ResizeObserver(t=>{let e=t[0],i=e.contentRect.width,r=e.contentRect.height;(0!==i||0!==r)&&n(i,r)});return o.observe(s),i4.size||window.addEventListener("resize",i6),i4.set(t,n),o}function i9(t,e,i){i&&i.disconnect(),"resize"===e&&(i4.delete(t),i4.size||window.removeEventListener("resize",i6))}function i7(t,e,i){let r=t.canvas,s=tj(e=>{null!==t.ctx&&i(function(t,e){let i=iZ[t.type]||t.type,{x:r,y:s}=eV(t,e);return{type:i,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==s?s:null}}(e,t))},t);return r&&r.addEventListener(e,s,i0),s}class rt extends iY{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){let i=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[iX]={initial:{height:r,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",iJ(s)){let e=eG(t,"width");void 0!==e&&(t.width=e)}if(iJ(r)){if(""===t.style.height)t.height=t.width/(e||2);else{let e=eG(t,"height");void 0!==e&&(t.height=e)}}}(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[iX])return!1;let i=e[iX].initial;["height","width"].forEach(t=>{let r=i[t];F(r)?e.removeAttribute(t):e.setAttribute(t,r)});let r=i.style||{};return Object.keys(r).forEach(t=>{e.style[t]=r[t]}),e.width=e.width,delete e[iX],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let r=t.$proxies||(t.$proxies={}),s={attach:i2,detach:i5,resize:i8}[e]||i7;r[e]=s(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),r=i[e];r&&((({attach:i9,detach:i9,resize:i9})[e]||function(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,i0)})(t,e,r),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return function(t,e,i,r){let s=eU(t),n=eH(s,"margin"),o=eF(s.maxWidth,t,"clientWidth")||tu,a=eF(s.maxHeight,t,"clientHeight")||tu,l=function(t,e,i){let r,s;if(void 0===e||void 0===i){let n=t&&ej(t);if(n){let t=n.getBoundingClientRect(),o=eU(n),a=eH(o,"border","width"),l=eH(o,"padding");e=t.width-l.width-a.width,i=t.height-l.height-a.height,r=eF(o.maxWidth,n,"clientWidth"),s=eF(o.maxHeight,n,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:r||tu,maxHeight:s||tu}}(t,e,i),{width:h,height:c}=l;if("content-box"===s.boxSizing){let t=eH(s,"border","width"),e=eH(s,"padding");h-=e.width+t.width,c-=e.height+t.height}return h=Math.max(0,h-n.width),c=Math.max(0,r?h/r:c-n.height),h=e$(Math.min(h,o,l.maxWidth)),c=e$(Math.min(c,a,l.maxHeight)),h&&!c&&(c=e$(h/2)),(void 0!==e||void 0!==i)&&r&&l.height&&c>l.height&&(h=e$(Math.floor((c=l.height)*r))),{width:h,height:c}}(t,e,i,r)}isAttached(t){let e=t&&ej(t);return!!(e&&e.isConnected)}}class re{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return tv(this.x)&&tv(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let r={};return t.forEach(t=>{r[t]=i[t]&&i[t].active()?i[t]._to:this[t]}),r}}function ri(t,e,i,r,s){let n,o,a;let l=V(r,0),h=Math.min(V(s,t.length),t.length),c=0;for(i=Math.ceil(i),s&&(i=(n=s-r)/Math.floor(n/i)),a=l;a<0;)a=Math.round(l+ ++c*i);for(o=Math.max(l,0);o<h;o++)o===a&&(e.push(t[o]),a=Math.round(l+ ++c*i))}let rr=t=>"left"===t?"right":"right"===t?"left":t,rs=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i,rn=(t,e)=>Math.min(e||t,t);function ro(t,e){let i=[],r=t.length/e,s=t.length,n=0;for(;n<s;n+=r)i.push(t[Math.floor(n)]);return i}function ra(t){return t.drawTicks?t.tickLength:0}function rl(t,e){if(!t.display)return 0;let i=e_(t.font,e),r=eb(t.padding);return(U(t.text)?t.text.length:1)*i.lineHeight+r.height}class rh extends re{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=z(t,Number.POSITIVE_INFINITY),e=z(e,Number.NEGATIVE_INFINITY),i=z(i,Number.POSITIVE_INFINITY),r=z(r,Number.NEGATIVE_INFINITY),{min:z(t,i),max:z(e,r),minDefined:H(t),maxDefined:H(e)}}getMinMax(t){let e,{min:i,max:r,minDefined:s,maxDefined:n}=this.getUserBounds();if(s&&n)return{min:i,max:r};let o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)e=o[a].controller.getMinMax(this,t),s||(i=Math.min(i,e.min)),n||(r=Math.max(r,e.max));return i=n&&i>r?r:i,r=s&&i>r?i:r,{min:z(i,z(r,i)),max:z(r,z(i,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){K(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:r,grace:s,ticks:n}=this.options,o=n.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,i){let{min:r,max:s}=t,n=q(e,(s-r)/2),o=(t,e)=>i&&0===t?0:t+e;return{min:o(r,-Math.abs(n)),max:o(s,n)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let a=o<this.ticks.length;this._convertTicksToLabels(a?ro(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),n.display&&(n.autoSkip||"auto"===n.source)&&(this.ticks=function(t,e){let i=t.options.ticks,r=function(t){let e=t.options.offset,i=t._tickSize();return Math.floor(Math.min(t._length/i+(e?0:1),t._maxLength/i))}(t),s=Math.min(i.maxTicksLimit||r,r),n=i.major.enabled?function(t){let e,i;let r=[];for(e=0,i=t.length;e<i;e++)t[e].major&&r.push(e);return r}(e):[],o=n.length,a=n[0],l=n[o-1],h=[];if(o>s)return function(t,e,i,r){let s,n=0,o=i[0];for(s=0,r=Math.ceil(r);s<t.length;s++)s===o&&(e.push(t[s]),o=i[++n*r])}(e,h,n,o/s),h;let c=function(t,e,i){let r=function(t){let e,i;let r=t.length;if(r<2)return!1;for(i=t[0],e=1;e<r;++e)if(t[e]-t[e-1]!==i)return!1;return i}(t),s=e.length/i;if(!r)return Math.max(s,1);let n=function(t){let e;let i=[],r=Math.sqrt(t);for(e=1;e<r;e++)t%e==0&&(i.push(e),i.push(t/e));return r===(0|r)&&i.push(r),i.sort((t,e)=>t-e).pop(),i}(r);for(let t=0,e=n.length-1;t<e;t++){let e=n[t];if(e>s)return e}return Math.max(s,1)}(n,e,s);if(o>0){let t,i;let r=o>1?Math.round((l-a)/(o-1)):null;for(ri(e,h,c,F(r)?0:a-r,a),t=0,i=o-1;t<i;t++)ri(e,h,c,n[t],n[t+1]);return ri(e,h,c,l,F(r)?e.length:l+r),h}return ri(e,h,c),h}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){K(this.options.afterUpdate,[this])}beforeSetDimensions(){K(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){K(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),K(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){K(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e,i,r;let s=this.options.ticks;for(e=0,i=t.length;e<i;e++)(r=t[e]).label=K(s.callback,[r.value,e,t],this)}afterTickToLabelConversion(){K(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){K(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t,e,i;let r=this.options,s=r.ticks,n=rn(this.ticks.length,r.ticks.maxTicksLimit),o=s.minRotation||0,a=s.maxRotation,l=o;if(!this._isVisible()||!s.display||o>=a||n<=1||!this.isHorizontal()){this.labelRotation=o;return}let h=this._getLabelSizes(),c=h.widest.width,u=h.highest.height,d=tO(this.chart.width-c,0,this.maxWidth);c+6>(t=r.offset?this.maxWidth/n:d/(n-1))&&(t=d/(n-(r.offset?.5:1)),e=this.maxHeight-ra(r.grid)-s.padding-rl(r.title,this.chart.options.font),i=Math.sqrt(c*c+u*u),l=Math.max(o,Math.min(a,l=180/tl*Math.min(Math.asin(tO((h.highest.height+6)/t,-1,1)),Math.asin(tO(e/i,-1,1))-Math.asin(tO(u/i,-1,1)))))),this.labelRotation=l}afterCalculateLabelRotation(){K(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){K(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,n=this._isVisible(),o=this.isHorizontal();if(n){let n=rl(r,e.options.font);if(o?(t.width=this.maxWidth,t.height=ra(s)+n):(t.height=this.maxHeight,t.width=ra(s)+n),i.display&&this.ticks.length){let{first:e,last:r,widest:s,highest:n}=this._getLabelSizes(),a=2*i.padding,l=tx(this.labelRotation),h=Math.cos(l),c=Math.sin(l);if(o){let e=i.mirror?0:c*s.width+h*n.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{let e=i.mirror?0:h*s.width+c*n.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,r,c,h)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){let{ticks:{align:s,padding:n},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){let o=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),c=0,u=0;a?l?(c=r*t.width,u=i*e.height):(c=i*t.height,u=r*e.width):"start"===s?u=e.width:"end"===s?c=t.width:"inner"!==s&&(c=t.width/2,u=e.width/2),this.paddingLeft=Math.max((c-o+n)*this.width/(this.width-o),0),this.paddingRight=Math.max((u-h+n)*this.width/(this.width-h),0)}else{let i=e.height/2,r=t.height/2;"start"===s?(i=0,r=t.height):"end"===s&&(i=e.height,r=0),this.paddingTop=i+n,this.paddingBottom=r+n}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){K(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)F(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=ro(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let r,s,n,o,a,l,h,c,u,d,f;let{ctx:p,_longestTextCache:g}=this,m=[],b=[],_=Math.floor(e/rn(e,i)),y=0,v=0;for(r=0;r<e;r+=_){if(o=t[r].label,a=this._resolveTickFontOptions(r),p.font=l=a.string,h=g[l]=g[l]||{data:{},gc:[]},c=a.lineHeight,u=d=0,F(o)||U(o)){if(U(o))for(s=0,n=o.length;s<n;++s)F(f=o[s])||U(f)||(u=t7(p,h.data,h.gc,u,f),d+=c)}else u=t7(p,h.data,h.gc,u,o),d=c;m.push(u),b.push(d),y=Math.max(u,y),v=Math.max(d,v)}G(g,t=>{let i;let r=t.gc,s=r.length/2;if(s>e){for(i=0;i<s;++i)delete t.data[r[i]];r.splice(0,s)}});let w=m.indexOf(y),x=b.indexOf(v),S=t=>({width:m[t]||0,height:b[t]||0});return{first:S(0),last:S(e-1),widest:S(w),highest:S(x),widths:m,heights:b}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return tO(this._alignToPixels?et(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let i=e[t];return i.$context||(i.$context=ev(this.getContext(),{tick:i,index:t,type:"tick"}))}return this.$context||(this.$context=ev(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){let t=this.options.ticks,e=tx(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),n=t.autoSkipPadding||0,o=s?s.widest.width+n:0,a=s?s.highest.height+n:0;return this.isHorizontal()?a*i>o*r?o/i:a/r:a*r<o*i?a/i:o/r}_isVisible(){let t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e,i,r,s,n,o,a,l,h,c,u,d;let f=this.axis,p=this.chart,g=this.options,{grid:m,position:b,border:_}=g,y=m.offset,v=this.isHorizontal(),w=this.ticks.length+(y?1:0),x=ra(m),S=[],k=_.setContext(this.getContext()),E=k.display?k.width:0,M=E/2,I=function(t){return et(p,t,E)};if("top"===b)e=I(this.bottom),o=this.bottom-x,l=e-M,c=I(t.top)+M,d=t.bottom;else if("bottom"===b)e=I(this.top),c=t.top,d=I(t.bottom)-M,o=e+M,l=this.top+x;else if("left"===b)e=I(this.right),n=this.right-x,a=e-M,h=I(t.left)+M,u=t.right;else if("right"===b)e=I(this.left),h=t.left,u=I(t.right)-M,n=e+M,a=this.left+x;else if("x"===f){if("center"===b)e=I((t.top+t.bottom)/2+.5);else if(W(b)){let t=Object.keys(b)[0],i=b[t];e=I(this.chart.scales[t].getPixelForValue(i))}c=t.top,d=t.bottom,l=(o=e+M)+x}else if("y"===f){if("center"===b)e=I((t.left+t.right)/2);else if(W(b)){let t=Object.keys(b)[0],i=b[t];e=I(this.chart.scales[t].getPixelForValue(i))}a=(n=e-M)-x,h=t.left,u=t.right}let T=V(g.ticks.maxTicksLimit,w),O=Math.max(1,Math.ceil(w/T));for(i=0;i<w;i+=O){let t=this.getContext(i),e=m.setContext(t),f=_.setContext(t),g=e.lineWidth,b=e.color,w=f.dash||[],x=f.dashOffset,k=e.tickWidth,E=e.tickColor,M=e.tickBorderDash||[],I=e.tickBorderDashOffset;void 0!==(r=function(t,e,i){let r;let s=t.ticks.length,n=Math.min(e,s-1),o=t._startPixel,a=t._endPixel,l=t.getPixelForTick(n);if(!i||(r=1===s?Math.max(l-o,a-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(n-1))/2,!((l+=n<e?r:-r)<o-1e-6)&&!(l>a+1e-6)))return l}(this,i,y))&&(s=et(p,r,g),v?n=a=h=u=s:o=l=c=d=s,S.push({tx1:n,ty1:o,tx2:a,ty2:l,x1:h,y1:c,x2:u,y2:d,width:g,color:b,borderDash:w,borderDashOffset:x,tickWidth:k,tickColor:E,tickBorderDash:M,tickBorderDashOffset:I}))}return this._ticksLength=w,this._borderValue=e,S}_computeLabelItems(t){let e,i,r,s,n,o,a,l,h,c,u;let d=this.axis,f=this.options,{position:p,ticks:g}=f,m=this.isHorizontal(),b=this.ticks,{align:_,crossAlign:y,padding:v,mirror:w}=g,x=ra(f.grid),S=x+v,k=w?-v:S,E=-tx(this.labelRotation),M=[],I="middle";if("top"===p)n=this.bottom-k,o=this._getXAxisLabelAlignment();else if("bottom"===p)n=this.top+k,o=this._getXAxisLabelAlignment();else if("left"===p){let t=this._getYAxisLabelAlignment(x);o=t.textAlign,s=t.x}else if("right"===p){let t=this._getYAxisLabelAlignment(x);o=t.textAlign,s=t.x}else if("x"===d){if("center"===p)n=(t.top+t.bottom)/2+S;else if(W(p)){let t=Object.keys(p)[0],e=p[t];n=this.chart.scales[t].getPixelForValue(e)+S}o=this._getXAxisLabelAlignment()}else if("y"===d){if("center"===p)s=(t.left+t.right)/2-S;else if(W(p)){let t=Object.keys(p)[0],e=p[t];s=this.chart.scales[t].getPixelForValue(e)}o=this._getYAxisLabelAlignment(x).textAlign}"y"===d&&("start"===_?I="top":"end"===_&&(I="bottom"));let T=this._getLabelSizes();for(e=0,i=b.length;e<i;++e){let t;r=b[e].label;let d=g.setContext(this.getContext(e));a=this.getPixelForTick(e)+g.labelOffset,h=(l=this._resolveTickFontOptions(e)).lineHeight;let f=(c=U(r)?r.length:1)/2,_=d.color,v=d.textStrokeColor,x=d.textStrokeWidth,S=o;if(m?(s=a,"inner"===o&&(S=e===i-1?this.options.reverse?"left":"right":0===e?this.options.reverse?"right":"left":"center"),u="top"===p?"near"===y||0!==E?-c*h+h/2:"center"===y?-T.highest.height/2-f*h+h:-T.highest.height+h/2:"near"===y||0!==E?h/2:"center"===y?T.highest.height/2-f*h:T.highest.height-c*h,w&&(u*=-1),0===E||d.showLabelBackdrop||(s+=h/2*Math.sin(E))):(n=a,u=(1-c)*h/2),d.showLabelBackdrop){let r=eb(d.backdropPadding),s=T.heights[e],n=T.widths[e],a=u-r.top,l=0-r.left;switch(I){case"middle":a-=s/2;break;case"bottom":a-=s}switch(o){case"center":l-=n/2;break;case"right":l-=n;break;case"inner":e===i-1?l-=n:e>0&&(l-=n/2)}t={left:l,top:a,width:n+r.width,height:s+r.height,color:d.backdropColor}}M.push({label:r,font:l,textOffset:u,options:{rotation:E,color:_,strokeColor:v,strokeWidth:x,textAlign:S,textBaseline:I,translation:[s,n],backdrop:t}})}return M}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-tx(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){let e,i;let{position:r,ticks:{crossAlign:s,mirror:n,padding:o}}=this.options,a=this._getLabelSizes(),l=t+o,h=a.widest.width;return"left"===r?n?(i=this.right+o,"near"===s?e="left":"center"===s?(e="center",i+=h/2):(e="right",i+=h)):(i=this.right-l,"near"===s?e="right":"center"===s?(e="center",i-=h/2):(e="left",i=this.left)):"right"===r?n?(i=this.left+o,"near"===s?e="right":"center"===s?(e="center",i-=h/2):(e="left",i-=h)):(i=this.left+l,"near"===s?e="left":"center"===s?(e="center",i+=h/2):(e="right",i=this.right)):e="right",{textAlign:e,x:i}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:n}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,n),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let i=this.ticks.findIndex(e=>e.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){let e,i;let r=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),o=(t,e,i)=>{i.width&&i.color&&(s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.setLineDash(i.borderDash||[]),s.lineDashOffset=i.borderDashOffset,s.beginPath(),s.moveTo(t.x,t.y),s.lineTo(e.x,e.y),s.stroke(),s.restore())};if(r.display)for(e=0,i=n.length;e<i;++e){let t=n[e];r.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),r.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){let t,e,i,r;let{chart:s,ctx:n,options:{border:o,grid:a}}=this,l=o.setContext(this.getContext()),h=o.display?l.width:0;if(!h)return;let c=a.setContext(this.getContext(0)).lineWidth,u=this._borderValue;this.isHorizontal()?(t=et(s,this.left,h)-h/2,e=et(s,this.right,c)+c/2,i=r=u):(i=et(s,this.top,h)-h/2,r=et(s,this.bottom,c)+c/2,t=e=u),n.save(),n.lineWidth=l.width,n.strokeStyle=l.color,n.beginPath(),n.moveTo(t,i),n.lineTo(e,r),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;let e=this.ctx,i=this._computeLabelArea();for(let r of(i&&en(e,i),this.getLabelItems(t))){let t=r.options,i=r.font;eh(e,r.label,0,r.textOffset,i,t)}i&&eo(e)}drawTitle(){let t;let{ctx:e,options:{position:i,title:r,reverse:s}}=this;if(!r.display)return;let n=e_(r.font),o=eb(r.padding),a=r.align,l=n.lineHeight/2;"bottom"===i||"center"===i||W(i)?(l+=o.bottom,U(r.text)&&(l+=n.lineHeight*(r.text.length-1))):l+=o.top;let{titleX:h,titleY:c,maxWidth:u,rotation:d}=function(t,e,i,r){let s,n,o;let{top:a,left:l,bottom:h,right:c,chart:u}=t,{chartArea:d,scales:f}=u,p=0,g=h-a,m=c-l;if(t.isHorizontal()){if(n=tU(r,l,c),W(i)){let t=Object.keys(i)[0],r=i[t];o=f[t].getPixelForValue(r)+g-e}else o="center"===i?(d.bottom+d.top)/2+g-e:rs(t,i,e);s=c-l}else{if(W(i)){let t=Object.keys(i)[0],r=i[t];n=f[t].getPixelForValue(r)-m+e}else n="center"===i?(d.left+d.right)/2-m+e:rs(t,i,e);o=tU(r,h,a),p="left"===i?-tf:tf}return{titleX:n,titleY:o,maxWidth:s,rotation:p}}(this,l,i,a);eh(e,r.text,0,0,n,{color:r.color,maxWidth:u,rotation:d,textAlign:(t=tF(a),(s&&"right"!==i||!s&&"right"===i)&&(t=rr(t)),t),textBaseline:"middle",translation:[h,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=V(t.grid&&t.grid.z,-1),r=V(t.border&&t.border.z,0);return this._isVisible()&&this.draw===rh.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){let e,i;let r=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];for(e=0,i=r.length;e<i;++e){let i=r[e];i[s]!==this.id||t&&i.type!==t||n.push(i)}return n}_resolveTickFontOptions(t){return e_(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class rc{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e;let i=Object.getPrototypeOf(t);"id"in i&&"defaults"in i&&(e=this.register(i));let r=this.items,s=t.id,n=this.scope+"."+s;if(!s)throw Error("class does not have id: "+t);return s in r||(r[s]=t,function(t,e,i){let r=J(Object.create(null),[i?t9.get(i):{},t9.get(e),t.defaults]);t9.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(i=>{let r=i.split("."),s=r.pop(),n=[t].concat(r).join("."),o=e[i].split("."),a=o.pop(),l=o.join(".");t9.route(n,s,l,a)})}(e,t.defaultRoutes),t.descriptors&&t9.describe(e,t.descriptors)}(t,n,e),this.override&&t9.override(t.id,t.overrides)),n}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in t9[r]&&(delete t9[r][i],this.override&&delete t5[i])}}class ru{constructor(){this.controllers=new rc(ib,"datasets",!0),this.elements=new rc(re,"elements"),this.plugins=new rc(Object,"plugins"),this.scales=new rc(rh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(e=>{let r=i||this._getRegistryForType(e);i||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):G(e,e=>{let r=i||this._getRegistryForType(e);this._exec(t,r,e)})})}_exec(t,e,i){let r=ts(t);K(i["before"+r],[],i),e[t](i),K(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let r=e.get(t);if(void 0===r)throw Error('"'+t+'" is not a registered '+i+".");return r}}var rd=new ru;class rf{constructor(){this._init=void 0}notify(t,e,i,r){if("beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),void 0===this._init)return;let s=r?this._descriptors(t).filter(r):this._descriptors(t),n=this._notify(s,t,e,i);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),n}_notify(t,e,i,r){for(let s of(r=r||{},t)){let t=s.plugin;if(!1===K(t[i],[e,r,s.options],t)&&r.cancelable)return!1}return!0}invalidate(){F(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,r=V(i.options&&i.options.plugins,{}),s=function(t){let e={},i=[],r=Object.keys(rd.plugins.items);for(let t=0;t<r.length;t++)i.push(rd.getPlugin(r[t]));let s=t.plugins||[];for(let t=0;t<s.length;t++){let r=s[t];-1===i.indexOf(r)&&(i.push(r),e[r.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==r||e?function(t,{plugins:e,localIds:i},r,s){let n=[],o=t.getContext();for(let l of e){var a;let e=l.id,h=(a=r[e],s||!1!==a?!0===a?{}:a:null);null!==h&&n.push({plugin:l,options:function(t,{plugin:e,local:i},r,s){let n=t.pluginScopeKeys(e),o=t.getOptionScopes(r,n);return i&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(t.config,{plugin:l,local:i[e]},h,o)})}return n}(t,s,r,e):[]}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,r=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function rp(t,e){let i=t9.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function rg(t){if("x"===t||"y"===t||"r"===t)return t}function rm(t,...e){if(rg(t))return t;for(let r of e){var i;let e=r.axis||("top"===(i=r.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&rg(t[0].toLowerCase());if(e)return e}throw Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function rb(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function r_(t){let e=t.options||(t.options={});e.plugins=V(e.plugins,{}),e.scales=function(t,e){let i=t5[t.type]||{scales:{}},r=e.scales||{},s=rp(t.type,e),n=Object.create(null);return Object.keys(r).forEach(e=>{let o=r[e];if(!W(o))return console.error(`Invalid scale configuration for scale: ${e}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);let a=rm(e,o,function(t,e){if(e.data&&e.data.datasets){let i=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(i.length)return rb(t,"x",i[0])||rb(t,"y",i[0])}return{}}(e,t),t9.scales[o.type]),l=a===s?"_index_":"_value_",h=i.scales||{};n[e]=tt(Object.create(null),[{axis:a},o,h[a],h[l]])}),t.data.datasets.forEach(i=>{let s=i.type||t.type,o=i.indexAxis||rp(s,e),a=(t5[s]||{}).scales||{};Object.keys(a).forEach(t=>{let e;let s=(e=t,"_index_"===t?e=o:"_value_"===t&&(e="x"===o?"y":"x"),e),l=i[s+"AxisID"]||s;n[l]=n[l]||Object.create(null),tt(n[l],[{axis:s},r[l],a[t]])})}),Object.keys(n).forEach(t=>{let e=n[t];tt(e,[t9.scales[e.type],t9.scale])}),n}(t,e)}function ry(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}let rv=new Map,rw=new Set;function rx(t,e){let i=rv.get(t);return i||(i=e(),rv.set(t,i),rw.add(i)),i}let rS=(t,e,i)=>{let r=tr(e,i);void 0!==r&&t.add(r)};class rk{constructor(t){this._config=function(t){return(t=t||{}).data=ry(t.data),r_(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ry(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),r_(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return rx(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return rx(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return rx(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return rx(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){let{options:r,type:s}=this,n=this._cachedScopes(t,i),o=n.get(e);if(o)return o;let a=new Set;e.forEach(e=>{t&&(a.add(t),e.forEach(e=>rS(a,t,e))),e.forEach(t=>rS(a,r,t)),e.forEach(t=>rS(a,t5[s]||{},t)),e.forEach(t=>rS(a,t9,t)),e.forEach(t=>rS(a,t4,t))});let l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),rw.has(e)&&n.set(e,l),l}chartOptionScopes(){let{options:t,type:e}=this;return[t,t5[e]||{},t9.datasets[e]||{},{type:e},t9,t4]}resolveNamedOptions(t,e,i,r=[""]){let s={$shared:!0},{resolver:n,subPrefixes:o}=rE(this._resolverCache,t,r),a=n;if(function(t,e){let{isScriptable:i,isIndexable:r}=eS(t);for(let s of e){let e=i(s),n=r(s),o=(n||e)&&t[s];if(e&&(to(o)||rM(o))||n&&U(o))return!0}return!1}(n,e)){s.$shared=!1,i=to(i)?i():i;let e=this.createResolver(t,i,o);a=ex(n,i,e)}for(let t of e)s[t]=a[t];return s}createResolver(t,e,i=[""],r){let{resolver:s}=rE(this._resolverCache,t,i);return W(e)?ex(s,e,void 0,r):s}}function rE(t,e,i){let r=t.get(e);r||(r=new Map,t.set(e,r));let s=i.join(),n=r.get(s);return n||(n={resolver:ew(e,i),subPrefixes:i.filter(t=>!t.toLowerCase().includes("hover"))},r.set(s,n)),n}let rM=t=>W(t)&&Object.getOwnPropertyNames(t).some(e=>to(t[e])),rI=["top","bottom","left","right","chartArea"];function rT(t,e){return"top"===t||"bottom"===t||-1===rI.indexOf(t)&&"x"===e}function rO(t,e){return function(i,r){return i[t]===r[t]?i[e]-r[e]:i[t]-r[t]}}function rA(t){let e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),K(i&&i.onComplete,[t],e)}function rC(t){let e=t.chart,i=e.options.animation;K(i&&i.onProgress,[t],e)}function rP(t){return eL()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}let rR={},rB=t=>{let e=rP(t);return Object.values(rR).filter(t=>t.canvas===e).pop()};class rN{static defaults=t9;static instances=rR;static overrides=t5;static registry=rd;static version="4.5.1";static getChart=rB;static register(...t){rd.add(...t),rD()}static unregister(...t){rd.remove(...t),rD()}constructor(t,e){let i=this.config=new rk(e),r=rP(t),s=rB(r);if(s)throw Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let n=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||(!eL()||"undefined"!=typeof OffscreenCanvas&&r instanceof OffscreenCanvas?iQ:rt)),this.platform.updateConfig(i);let o=this.platform.acquireContext(r,n.aspectRatio),a=o&&o.canvas,l=a&&a.height,h=a&&a.width;if(this.id=j(),this.ctx=o,this.canvas=a,this.width=h,this.height=l,this._options=n,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new rf,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let i;return function(...r){return e?(clearTimeout(i),i=setTimeout(t,e,r)):t.apply(this,r),e}}(t=>this.update(t),n.resizeDelay||0),this._dataChanges=[],rR[this.id]=this,!o||!a){console.error("Failed to create chart: can't acquire context from the given item");return}e7.listen(this,"complete",rA),e7.listen(this,"progress",rC),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:s}=this;return F(t)?e&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return rd}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():eq(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ee(this.canvas,this.ctx),this}stop(){return e7.stop(this),this}resize(t,e){e7.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,n=this.platform.getMaximumSize(r,t,e,s),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=n.width,this.height=n.height,this._aspectRatio=this.aspectRatio,eq(this,o,!0)&&(this.notifyPlugins("resize",{size:n}),K(i.onResize,[this,n],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){G(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){let t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((t,e)=>(t[e]=!1,t),{}),s=[];e&&(s=s.concat(Object.keys(e).map(t=>{let i=e[t],r=rm(t,i),s="r"===r,n="x"===r;return{options:i,dposition:s?"chartArea":n?"bottom":"left",dtype:s?"radialLinear":n?"category":"linear"}}))),G(s,e=>{let s=e.options,n=s.id,o=rm(n,s),a=V(s.type,e.dtype);(void 0===s.position||rT(s.position,o)!==rT(e.dposition))&&(s.position=e.dposition),r[n]=!0;let l=null;n in i&&i[n].type===a?l=i[n]:i[(l=new(rd.getScale(a))({id:n,type:a,ctx:this.ctx,chart:this})).id]=l,l.init(s,t)}),G(r,(t,e)=>{t||delete i[e]}),G(i,t=>{iG.configure(this,t,t.options),iG.addBox(this,t)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((t,e)=>t.index-e.index),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(rO("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,i)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){let t,e;let i=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),t=0,e=r.length;t<e;t++){let e=r[t],s=this.getDatasetMeta(t),n=e.type||this.config.type;if(s.type&&s.type!==n&&(this._destroyDatasetMeta(t),s=this.getDatasetMeta(t)),s.type=n,s.indexAxis=e.indexAxis||rp(n,this.options),s.order=e.order||0,s.index=t,s.label=""+e.label,s.visible=this.isDatasetVisible(t),s.controller)s.controller.updateIndex(t),s.controller.linkScales();else{let e=rd.getController(n),{datasetElementType:r,dataElementType:o}=t9.datasets[n];Object.assign(e,{dataElementType:rd.getElement(o),datasetElementType:r&&rd.getElement(r)}),s.controller=new e(this,t),i.push(s.controller)}}return this._updateMetasets(),i}_resetElements(){G(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let n=0;for(let t=0,e=this.data.datasets.length;t<e;t++){let{controller:e}=this.getDatasetMeta(t),i=!r&&-1===s.indexOf(e);e.buildOrUpdateElements(i),n=Math.max(+e.getMaxOverflow(),n)}n=this._minPadding=i.layout.autoPadding?n:0,this._updateLayout(n),r||G(s,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(rO("z","_idx"));let{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){G(this.scales,t=>{iG.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options;ta(new Set(Object.keys(this._listeners)),new Set(t.events))&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this;for(let{method:e,start:i,count:r}of this._getUniformDataChanges()||[])!function(t,e,i){for(let r of Object.keys(t)){let s=+r;if(s>=e){let n=t[r];delete t[r],(i>0||s>e)&&(t[s+i]=n)}}}(t,i,"_removeElements"===e?-r:r)}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,i=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),r=i(0);for(let t=1;t<e;t++)if(!ta(r,i(t)))return;return Array.from(r).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;iG.update(this,this.width,this.height,t);let e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],G(this.boxes,t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,to(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(e7.has(this)?this.attached&&!e7.running(this)&&e7.start(this):(this.draw(),rA({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e,i;let r=this._sortedMetasets,s=[];for(e=0,i=r.length;e<i;++e){let i=r[e];(!t||i.visible)&&s.push(i)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=function(t,e){let i=e._clip;if(i.disabled)return!1;let r=function(t,e){let{xScale:i,yScale:r}=t;return i&&r?{left:e8(i,e,"left"),right:e8(i,e,"right"),top:e8(r,e,"top"),bottom:e8(r,e,"bottom")}:e}(e,t.chartArea);return{left:!1===i.left?0:r.left-(!0===i.left?0:i.left),right:!1===i.right?t.width:r.right+(!0===i.right?0:i.right),top:!1===i.top?0:r.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?t.height:r.bottom+(!0===i.bottom?0:i.bottom)}}(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(r&&en(e,r),t.controller.draw(),r&&eo(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return es(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){let s=ij.modes[e];return"function"==typeof s?s(this,t,i,r):[]}getDatasetMeta(t){let e=this.data.datasets[t],i=this._metasets,r=i.filter(t=>t&&t._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ev(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){let r=i?"show":"hide",s=this.getDatasetMeta(t),n=s.controller._resolveAnimations(void 0,r);tn(e)?(s.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),n.update(s,{visible:i}),this.update(e=>e.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),e7.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ee(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete rR[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,i=(i,r)=>{e.addEventListener(this,i,r),t[i]=r},r=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};G(this.options.events,t=>i(t,r))}bindResponsiveEvents(){let t;this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,i=this.platform,r=(t,r)=>{i.addEventListener(this,t,r),e[t]=r},s=(t,r)=>{e[t]&&(i.removeEventListener(this,t,r),delete e[t])},n=(t,e)=>{this.canvas&&this.resize(t,e)},o=()=>{s("attach",o),this.attached=!0,this.resize(),r("resize",n),r("detach",t)};t=()=>{this.attached=!1,s("resize",n),this._stop(),this._resize(0,0),r("attach",o)},i.isAttached(this.canvas)?o():t()}unbindEvents(){G(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},G(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){let r,s,n;let o=i?"set":"remove";for("dataset"===e&&this.getDatasetMeta(t[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),s=0,n=t.length;s<n;++s){let e=(r=t[s])&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],i=t.map(({datasetIndex:t,index:e})=>{let i=this.getDatasetMeta(t);if(!i)throw Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}});Y(i,e)||(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,i){let r=this.options.hover,s=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),n=s(e,t),o=i?t:s(t,e);n.length&&this.updateHoverStyle(n,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,e){let i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,r))return;let s=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,e,i){var r;let{_active:s=[],options:n}=this,o=this._getActiveElements(t,s,i,e),a="mouseup"===t.type||"click"===t.type||"contextmenu"===t.type,l=(r=this._lastEvent,i&&"mouseout"!==t.type?a?r:t:null);i&&(this._lastEvent=null,K(n.onHover,[t,o,this],this),a&&K(n.onClick,[t,o,this],this));let h=!Y(o,s);return(h||e)&&(this._active=o,this._updateHoverStyles(o,s,e)),this._lastEvent=l,h}_getActiveElements(t,e,i,r){if("mouseout"===t.type)return[];if(!i)return e;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}function rD(){return G(rN.instances,t=>t._plugins.invalidate())}function rL(t,e,i,r){return{x:i+t*Math.cos(e),y:r+t*Math.sin(e)}}function rj(t,e,i,r,s,n){let{x:o,y:a,startAngle:l,pixelMargin:h,innerRadius:c}=e,u=Math.max(e.outerRadius+r+i-h,0),d=c>0?c+r+i+h:0,f=0,p=s-l;if(r){let t=u>0?u-r:0,e=((c>0?c-r:0)+t)/2;f=(p-(0!==e?p*e/(e+r):p))/2}let g=Math.max(.001,p*u-i/tl)/u,m=(p-g)/2,b=l+m+f,_=s-m-f,{outerStart:y,outerEnd:v,innerStart:w,innerEnd:x}=function(t,e,i,r){let s=ep(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),n=(i-e)/2,o=Math.min(n,r*e/2),a=t=>{let e=(i-Math.min(n,t))*r/2;return tO(t,0,Math.min(n,e))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:tO(s.innerStart,0,o),innerEnd:tO(s.innerEnd,0,o)}}(e,d,u,_-b),S=u-y,k=u-v,E=b+y/S,M=_-v/k,I=d+w,T=d+x,O=b+w/I,A=_-x/T;if(t.beginPath(),n){let e=(E+M)/2;if(t.arc(o,a,u,E,e),t.arc(o,a,u,e,M),v>0){let e=rL(k,M,o,a);t.arc(e.x,e.y,v,M,_+tf)}let i=rL(T,_,o,a);if(t.lineTo(i.x,i.y),x>0){let e=rL(T,A,o,a);t.arc(e.x,e.y,x,_+tf,A+Math.PI)}let r=(_-x/d+(b+w/d))/2;if(t.arc(o,a,d,_-x/d,r,!0),t.arc(o,a,d,r,b+w/d,!0),w>0){let e=rL(I,O,o,a);t.arc(e.x,e.y,w,O+Math.PI,b-tf)}let s=rL(S,b,o,a);if(t.lineTo(s.x,s.y),y>0){let e=rL(S,E,o,a);t.arc(e.x,e.y,y,b-tf,E)}}else{t.moveTo(o,a);let e=Math.cos(E)*u+o,i=Math.sin(E)*u+a;t.lineTo(e,i);let r=Math.cos(M)*u+o,s=Math.sin(M)*u+a;t.lineTo(r,s)}t.closePath()}class rF extends re{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let{angle:r,distance:s}=tk(this.getProps(["x","y"],i),{x:t,y:e}),{startAngle:n,endAngle:o,innerRadius:a,outerRadius:l,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),c=(this.options.spacing+this.options.borderWidth)/2,u=V(h,o-n),d=tT(r,n,o)&&n!==o,f=u>=th||d,p=tA(s,a+c,l+c);return f&&p}getCenterPoint(t){let{x:e,y:i,startAngle:r,endAngle:s,innerRadius:n,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,h=(r+s)/2,c=(n+o+l+a)/2;return{x:e+Math.cos(h)*c,y:i+Math.sin(h)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,n=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>th?Math.floor(i/th):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();let o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*r,Math.sin(o)*r);let a=r*(1-Math.sin(Math.min(tl,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,i,r,s){let{fullCircles:n,startAngle:o,circumference:a}=e,l=e.endAngle;if(n){rj(t,e,i,r,l,s);for(let e=0;e<n;++e)t.fill();isNaN(a)||(l=o+(a%th||th))}rj(t,e,i,r,l,s),t.fill()}(t,this,a,s,n),function(t,e,i,r,s){let{fullCircles:n,startAngle:o,circumference:a,options:l}=e,{borderWidth:h,borderJoinStyle:c,borderDash:u,borderDashOffset:d,borderRadius:f}=l,p="inner"===l.borderAlign;if(!h)return;t.setLineDash(u||[]),t.lineDashOffset=d,p?(t.lineWidth=2*h,t.lineJoin=c||"round"):(t.lineWidth=h,t.lineJoin=c||"bevel");let g=e.endAngle;if(n){rj(t,e,i,r,g,s);for(let e=0;e<n;++e)t.stroke();isNaN(a)||(g=o+(a%th||th))}p&&function(t,e,i){let{startAngle:r,pixelMargin:s,x:n,y:o,outerRadius:a,innerRadius:l}=e,h=s/a;t.beginPath(),t.arc(n,o,a,r-h,i+h),l>s?(h=s/l,t.arc(n,o,l,i+h,r-h,!0)):t.arc(n,o,s,i+tf,r-tf),t.closePath(),t.clip()}(t,e,g),l.selfJoin&&g-o>=tl&&0===f&&"miter"!==c&&function(t,e,i){let{startAngle:r,x:s,y:n,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:h,borderJoinStyle:c}=l,u=Math.min(h/o,tI(r-i));if(t.beginPath(),t.arc(s,n,o-h/2,r+u/2,i-u/2),a>0){let e=Math.min(h/a,tI(r-i));t.arc(s,n,a+h/2,i-e/2,r+e/2,!0)}else{let e=Math.min(h/2,o*tI(r-i));if("round"===c)t.arc(s,n,e,i-tl/2,r+tl/2,!0);else if("bevel"===c){let o=2*e*e,a=-o*Math.cos(i+tl/2)+s,l=-o*Math.sin(i+tl/2)+n,h=o*Math.cos(r+tl/2)+s,c=o*Math.sin(r+tl/2)+n;t.lineTo(a,l),t.lineTo(h,c)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,g),n||(rj(t,e,i,r,g,s),t.stroke())}(t,this,a,s,n),t.restore()}}function rU(t,e,i=e){t.lineCap=V(i.borderCapStyle,e.borderCapStyle),t.setLineDash(V(i.borderDash,e.borderDash)),t.lineDashOffset=V(i.borderDashOffset,e.borderDashOffset),t.lineJoin=V(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=V(i.borderWidth,e.borderWidth),t.strokeStyle=V(i.borderColor,e.borderColor)}function rW(t,e,i){t.lineTo(i.x,i.y)}function rH(t,e,i={}){let r=t.length,{start:s=0,end:n=r-1}=i,{start:o,end:a}=e,l=Math.max(s,o),h=Math.min(n,a);return{count:r,start:l,loop:e.loop,ilen:h<l&&!(s<o&&n<o||s>a&&n>a)?r+h-l:h-l}}function rz(t,e,i,r){let s,n,o;let{points:a,options:l}=e,{count:h,start:c,loop:u,ilen:d}=rH(a,i,r),f=l.stepped?ea:l.tension||"monotone"===l.cubicInterpolationMode?el:rW,{move:p=!0,reverse:g}=r||{};for(s=0;s<=d;++s)(n=a[(c+(g?d-s:s))%h]).skip||(p?(t.moveTo(n.x,n.y),p=!1):f(t,o,n,g,l.stepped),o=n);return u&&f(t,o,n=a[(c+(g?d:0))%h],g,l.stepped),!!u}function rV(t,e,i,r){let s,n,o,a,l,h;let c=e.points,{count:u,start:d,ilen:f}=rH(c,i,r),{move:p=!0,reverse:g}=r||{},m=0,b=0,_=t=>(d+(g?f-t:t))%u,y=()=>{a!==l&&(t.lineTo(m,l),t.lineTo(m,a),t.lineTo(m,h))};for(p&&(n=c[_(0)],t.moveTo(n.x,n.y)),s=0;s<=f;++s){if((n=c[_(s)]).skip)continue;let e=n.x,i=n.y,r=0|e;r===o?(i<a?a=i:i>l&&(l=i),m=(b*m+e)/++b):(y(),t.lineTo(e,i),o=r,b=0,a=l=i),h=i}y()}function r$(t){let e=t.options,i=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i?rz:rV}let rq="function"==typeof Path2D;class rK extends re{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){let i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){let r=i.spanGaps?this._loop:this._fullLoop;(function(t,e,i,r,s){let n,o,a,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)!function(t,e="x"){let i,r,s;let n=eN(e),o=t.length,a=Array(o).fill(0),l=Array(o),h=eB(t,0);for(i=0;i<o;++i)if(r=s,s=h,h=eB(t,i+1),s){if(h){let t=h[e]-s[e];a[i]=0!==t?(h[n]-s[n])/t:0}l[i]=r?h?tb(a[i-1])!==tb(a[i])?0:(a[i-1]+a[i])/2:a[i-1]:a[i]}(function(t,e,i){let r,s,n,o,a;let l=t.length,h=eB(t,0);for(let c=0;c<l-1;++c)if(a=h,h=eB(t,c+1),a&&h){if(t_(e[c],0,eR)){i[c]=i[c+1]=0;continue}(o=Math.pow(r=i[c]/e[c],2)+Math.pow(s=i[c+1]/e[c],2))<=9||(n=3/Math.sqrt(o),i[c]=r*n*e[c],i[c+1]=s*n*e[c])}})(t,a,l),function(t,e,i="x"){let r,s,n;let o=eN(i),a=t.length,l=eB(t,0);for(let h=0;h<a;++h){if(s=n,n=l,l=eB(t,h+1),!n)continue;let a=n[i],c=n[o];s&&(r=(a-s[i])/3,n[`cp1${i}`]=a-r,n[`cp1${o}`]=c-r*e[h]),l&&(r=(l[i]-a)/3,n[`cp2${i}`]=a+r,n[`cp2${o}`]=c+r*e[h])}}(t,l,e)}(t,s);else{let i=r?t[t.length-1]:t[0];for(n=0,o=t.length;n<o;++n)l=function(t,e,i,r){let s=t.skip?e:t,n=i.skip?e:i,o=tE(e,s),a=tE(n,e),l=o/(o+a),h=a/(o+a);l=isNaN(l)?0:l,h=isNaN(h)?0:h;let c=r*l,u=r*h;return{previous:{x:e.x-c*(n.x-s.x),y:e.y-c*(n.y-s.y)},next:{x:e.x+u*(n.x-s.x),y:e.y+u*(n.y-s.y)}}}(i,a=t[n],t[Math.min(n+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,i=a}e.capBezierPoints&&function(t,e){let i,r,s,n,o;let a=es(t[0],e);for(i=0,r=t.length;i<r;++i)o=n,n=a,a=i<r-1&&es(t[i+1],e),n&&(s=t[i],o&&(s.cp1x=eD(s.cp1x,e.left,e.right),s.cp1y=eD(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=eD(s.cp2x,e.left,e.right),s.cp2y=eD(s.cp2y,e.top,e.bottom)))}(t,i)})(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){let i=t.points,r=t.options.spanGaps,s=i.length;if(!s)return[];let n=!!t._loop,{start:o,end:a}=function(t,e,i,r){let s=0,n=e-1;if(i&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,i&&(n+=s);n>s&&t[n%e].skip;)n--;return{start:s,end:n%=e}}(i,s,n,r);if(!0===r)return e3(t,[{start:o,end:a,loop:n}],i,e);let l=a<o?a+s:a,h=!!t._fullLoop&&0===o&&a===s-1;return e3(t,function(t,e,i,r){let s;let n=t.length,o=[],a=e,l=t[e];for(s=e+1;s<=i;++s){let i=t[s%n];i.skip||i.stop?l.skip||(r=!1,o.push({start:e%n,end:(s-1)%n,loop:r}),e=a=i.stop?s:null):(a=s,l.skip&&(e=s)),l=i}return null!==a&&o.push({start:e%n,end:a%n,loop:r}),o}(i,o,l,h),i,e)}(this,this.options.segment))}first(){let t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){let t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){let i,r;let s=this.options,n=t[e],o=this.points,a=e4(this,{property:e,start:n,end:n});if(!a.length)return;let l=[],h=s.stepped?eQ:s.tension||"monotone"===s.cubicInterpolationMode?eX:eY;for(i=0,r=a.length;i<r;++i){let{start:r,end:c}=a[i],u=o[r],d=o[c];if(u===d){l.push(u);continue}let f=Math.abs((n-u[e])/(d[e]-u[e])),p=h(u,d,f,s.stepped);p[e]=t[e],l.push(p)}return 1===l.length?l[0]:l}pathSegment(t,e,i){return r$(this)(t,this,e,i)}path(t,e,i){let r=this.segments,s=r$(this),n=this._loop;for(let o of(e=e||0,i=i||this.points.length-e,r))n&=s(t,this,o,{start:e,end:e+i-1});return!!n}draw(t,e,i,r){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),function(t,e,i,r){if(rq&&!e.options.segment){let s;(s=e._path)||(s=e._path=new Path2D,e.path(s,i,r)&&s.closePath()),rU(t,e.options),t.stroke(s)}else!function(t,e,i,r){let{segments:s,options:n}=e,o=r$(e);for(let a of s)rU(t,n,a.style),t.beginPath(),o(t,e,a,{start:i,end:i+r-1})&&t.closePath(),t.stroke()}(t,e,i,r)}(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function rG(t,e,i,r){let s=t.options,{[i]:n}=t.getProps([i],r);return Math.abs(e-n)<s.radius+s.hitRadius}class rY extends re{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){let r=this.options,{x:s,y:n}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(e-n,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return rG(this,t,"x",e)}inYRange(t,e){return rG(this,t,"y",e)}getCenterPoint(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0,i=(e=Math.max(e,e&&t.hoverRadius||0))&&t.borderWidth||0;return(e+i)*2}draw(t,e){let i=this.options;!this.skip&&!(i.radius<.1)&&es(this,e,this.size(i)/2)&&(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,ei(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}function rQ(t,e){let i,r,s,n,o;let{x:a,y:l,base:h,width:c,height:u}=t.getProps(["x","y","base","width","height"],e);return t.horizontal?(o=u/2,i=Math.min(a,h),r=Math.max(a,h),s=l-o,n=l+o):(i=a-(o=c/2),r=a+o,s=Math.min(l,h),n=Math.max(l,h)),{left:i,top:s,right:r,bottom:n}}function rX(t,e,i,r){return t?0:tO(e,i,r)}function rZ(t,e,i,r){let s=null===e,n=null===i,o=t&&!(s&&n)&&rQ(t,r);return o&&(s||tA(e,o.left,o.right))&&(n||tA(i,o.top,o.bottom))}function rJ(t,e){t.rect(e.x,e.y,e.w,e.h)}function r0(t,e,i={}){let r=t.x!==i.x?-e:0,s=t.y!==i.y?-e:0,n=(t.x+t.w!==i.x+i.w?e:0)-r,o=(t.y+t.h!==i.y+i.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+n,h:t.h+o,radius:t.radius}}class r1 extends re{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){var e;let{inflateAmount:i,options:{borderColor:r,backgroundColor:s}}=this,{inner:n,outer:o}=function(t){let e=rQ(t),i=e.right-e.left,r=e.bottom-e.top,s=function(t,e,i){let r=t.options.borderWidth,s=t.borderSkipped,n=eg(r);return{t:rX(s.top,n.top,0,i),r:rX(s.right,n.right,0,e),b:rX(s.bottom,n.bottom,0,i),l:rX(s.left,n.left,0,e)}}(t,i/2,r/2),n=function(t,e,i){let{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,n=em(s),o=Math.min(e,i),a=t.borderSkipped,l=r||W(s);return{topLeft:rX(!l||a.top||a.left,n.topLeft,0,o),topRight:rX(!l||a.top||a.right,n.topRight,0,o),bottomLeft:rX(!l||a.bottom||a.left,n.bottomLeft,0,o),bottomRight:rX(!l||a.bottom||a.right,n.bottomRight,0,o)}}(t,i/2,r/2);return{outer:{x:e.left,y:e.top,w:i,h:r,radius:n},inner:{x:e.left+s.l,y:e.top+s.t,w:i-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,n.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(s.b,s.r))}}}}(this),a=(e=o.radius).topLeft||e.topRight||e.bottomLeft||e.bottomRight?ec:rJ;t.save(),(o.w!==n.w||o.h!==n.h)&&(t.beginPath(),a(t,r0(o,i,n)),t.clip(),a(t,r0(n,-i,o)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),a(t,r0(n,i)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return rZ(this,t,e,i)}inXRange(t,e){return rZ(this,t,null,e)}inYRange(t,e){return rZ(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}function r2(t,e,i,r){if(r)return;let s=e[t],n=i[t];return"angle"===t&&(s=tI(s),n=tI(n)),{property:t,start:s,end:n}}function r5(t,e,i){for(;e>t;e--){let t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function r4(t,e,i,r){return t&&e?r(t[i],e[i]):t?t[i]:e?e[i]:0}t=>t.replace("rgb(","rgba(").replace(")",", 0.5)");function r3(t,e,i,r){let s=e.interpolate(i,r);s&&t.lineTo(s.x,s.y)}let r6=(t,e)=>{let{boxHeight:i=e,boxWidth:r=e}=t;return t.usePointStyle&&(i=Math.min(i,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:i,itemHeight:Math.max(e,i)}},r8=(t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class r9 extends re{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=K(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,i)=>t.sort(e,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let t,e;let{options:i,ctx:r}=this;if(!i.display){this.width=this.height=0;return}let s=i.labels,n=e_(s.font),o=n.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:h}=r6(s,o);r.font=n.string,this.isHorizontal()?(t=this.maxWidth,e=this._fitRows(a,o,l,h)+10):(e=this.maxHeight,t=this._fitCols(a,n,l,h)+10),this.width=Math.min(t,i.maxWidth||this.maxWidth),this.height=Math.min(e,i.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){let{ctx:s,maxWidth:n,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],h=r+o,c=t;s.textAlign="left",s.textBaseline="middle";let u=-1,d=-h;return this.legendItems.forEach((t,f)=>{let p=i+e/2+s.measureText(t.text).width;(0===f||l[l.length-1]+p+2*o>n)&&(c+=h,l[l.length-(f>0?0:1)]=0,d+=h,u++),a[f]={left:0,top:d,row:u,width:p,height:r},l[l.length-1]+=p+o}),c}_fitCols(t,e,i,r){let{ctx:s,maxHeight:n,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],h=n-t,c=o,u=0,d=0,f=0,p=0;return this.legendItems.forEach((t,n)=>{var g;let m,b;let{itemWidth:_,itemHeight:y}={itemWidth:((m=t.text)&&"string"!=typeof m&&(m=m.reduce((t,e)=>t.length>e.length?t:e)),i+e.size/2+s.measureText(m).width),itemHeight:(g=e.lineHeight,b=r,"string"!=typeof t.text&&(b=r7(t,g)),b)};n>0&&d+y+2*o>h&&(c+=u+o,l.push({width:u,height:d}),f+=u+o,p++,u=d=0),a[n]={left:f,top:d,col:p,width:_,height:y},u=Math.max(u,_),d+=y+o}),c+=u,l.push({width:u,height:d}),c}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,n=eZ(s,this.left,this.width);if(this.isHorizontal()){let s=0,o=tU(i,this.left+r,this.right-this.lineWidths[s]);for(let a of e)s!==a.row&&(s=a.row,o=tU(i,this.left+r,this.right-this.lineWidths[s])),a.top+=this.top+t+r,a.left=n.leftForLtr(n.x(o),a.width),o+=a.width+r}else{let s=0,o=tU(i,this.top+t+r,this.bottom-this.columnSizes[s].height);for(let a of e)a.col!==s&&(s=a.col,o=tU(i,this.top+t+r,this.bottom-this.columnSizes[s].height)),a.top=o,a.left+=this.left+r,a.left=n.leftForLtr(n.x(a.left),a.width),o+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){let t=this.ctx;en(t,this),this._draw(),eo(t)}}_draw(){let t;let{options:e,columnSizes:i,lineWidths:r,ctx:s}=this,{align:n,labels:o}=e,a=t9.color,l=eZ(e.rtl,this.left,this.width),h=e_(o.font),{padding:c}=o,u=h.size,d=u/2;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;let{boxWidth:f,boxHeight:p,itemHeight:g}=r6(o,u),m=function(t,e,i){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;s.save();let r=V(i.lineWidth,1);if(s.fillStyle=V(i.fillStyle,a),s.lineCap=V(i.lineCap,"butt"),s.lineDashOffset=V(i.lineDashOffset,0),s.lineJoin=V(i.lineJoin,"miter"),s.lineWidth=r,s.strokeStyle=V(i.strokeStyle,a),s.setLineDash(V(i.lineDash,[])),o.usePointStyle)er(s,{radius:p*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:r},l.xPlus(t,f/2),e+d,o.pointStyleWidth&&f);else{let n=e+Math.max((u-p)/2,0),o=l.leftForLtr(t,f),a=em(i.borderRadius);s.beginPath(),Object.values(a).some(t=>0!==t)?ec(s,{x:o,y:n,w:f,h:p,radius:a}):s.rect(o,n,f,p),s.fill(),0!==r&&s.stroke()}s.restore()},b=function(t,e,i){eh(s,i.text,t,e+g/2,h,{strikethrough:i.hidden,textAlign:l.textAlign(i.textAlign)})},_=this.isHorizontal(),y=this._computeTitleHeight();t=_?{x:tU(n,this.left+c,this.right-r[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:tU(n,this.top+y+c,this.bottom-i[0].height),line:0},eJ(this.ctx,e.textDirection);let v=g+c;this.legendItems.forEach((a,u)=>{s.strokeStyle=a.fontColor,s.fillStyle=a.fontColor;let p=s.measureText(a.text).width,g=l.textAlign(a.textAlign||(a.textAlign=o.textAlign)),w=f+d+p,x=t.x,S=t.y;if(l.setWidth(this.width),_?u>0&&x+w+c>this.right&&(S=t.y+=v,t.line++,x=t.x=tU(n,this.left+c,this.right-r[t.line])):u>0&&S+v>this.bottom&&(x=t.x=x+i[t.line].width+c,t.line++,S=t.y=tU(n,this.top+y+c,this.bottom-i[t.line].height)),m(l.x(x),S,a),x=tW(g,x+f+d,_?x+w:this.right,e.rtl),b(l.x(x),S,a),_)t.x+=w+c;else if("string"!=typeof a.text){let e=h.lineHeight;t.y+=r7(a,e)+c}else t.y+=v}),e0(this.ctx,e.textDirection)}drawTitle(){let t;let e=this.options,i=e.title,r=e_(i.font),s=eb(i.padding);if(!i.display)return;let n=eZ(e.rtl,this.left,this.width),o=this.ctx,a=i.position,l=r.size/2,h=s.top+l,c=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),t=this.top+h,c=tU(e.align,c,this.right-u);else{let i=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);t=h+tU(e.align,this.top,this.bottom-i-e.labels.padding-this._computeTitleHeight())}let d=tU(a,c,c+u);o.textAlign=n.textAlign(tF(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=r.string,eh(o,i.text,d,t,r)}_computeTitleHeight(){let t=this.options.title,e=e_(t.font),i=eb(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(tA(t,this.left,this.right)&&tA(e,this.top,this.bottom)){for(i=0,s=this.legendHitBoxes;i<s.length;++i)if(tA(t,(r=s[i]).left,r.left+r.width)&&tA(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){var e;let i=this.options;if(("mousemove"!==(e=t.type)&&"mouseout"!==e||!i.onHover&&!i.onLeave)&&(!i.onClick||"click"!==e&&"mouseup"!==e))return;let r=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){let e=this._hoveredItem,s=r8(e,r);e&&!s&&K(i.onLeave,[t,e,this],this),this._hoveredItem=r,r&&!s&&K(i.onHover,[t,r,this],this)}else r&&K(i.onClick,[t,r,this],this)}}function r7(t,e){return e*(t.text?t.text.length:0)}class st extends re{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let r=U(i.text)?i.text.length:1;this._padding=eb(i.padding);let s=r*e_(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){let e,i,r;let{top:s,left:n,bottom:o,right:a,options:l}=this,h=l.align,c=0;return this.isHorizontal()?(i=tU(h,n,a),r=s+t,e=a-n):("left"===l.position?(i=n+t,r=tU(h,o,s),c=-.5*tl):(i=a-t,r=tU(h,s,o),c=.5*tl),e=o-s),{titleX:i,titleY:r,maxWidth:e,rotation:c}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let i=e_(e.font),r=i.lineHeight/2+this._padding.top,{titleX:s,titleY:n,maxWidth:o,rotation:a}=this._drawArgs(r);eh(t,e.text,0,0,i,{color:e.color,maxWidth:o,rotation:a,textAlign:tF(e.align),textBaseline:"middle",translation:[s,n]})}}new WeakMap;let se={average(t){let e,i;if(!t.length)return!1;let r=new Set,s=0,n=0;for(e=0,i=t.length;e<i;++e){let i=t[e].element;if(i&&i.hasValue()){let t=i.tooltipPosition();r.add(t.x),s+=t.y,++n}}return 0!==n&&0!==r.size&&{x:[...r].reduce((t,e)=>t+e)/r.size,y:s/n}},nearest(t,e){let i,r,s;if(!t.length)return!1;let n=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(i=0,r=t.length;i<r;++i){let r=t[i].element;if(r&&r.hasValue()){let t=tE(e,r.getCenterPoint());t<a&&(a=t,s=r)}}if(s){let t=s.tooltipPosition();n=t.x,o=t.y}return{x:n,y:o}}};function si(t,e){return e&&(U(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function sr(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function ss(t,e){let i=t.chart.ctx,{body:r,footer:s,title:n}=t,{boxWidth:o,boxHeight:a}=e,l=e_(e.bodyFont),h=e_(e.titleFont),c=e_(e.footerFont),u=n.length,d=s.length,f=r.length,p=eb(e.padding),g=p.height,m=0,b=r.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);b+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*h.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),b&&(g+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(b-f)*l.lineHeight+(b-1)*e.bodySpacing),d&&(g+=e.footerMarginTop+d*c.lineHeight+(d-1)*e.footerSpacing);let _=0,y=function(t){m=Math.max(m,i.measureText(t).width+_)};return i.save(),i.font=h.string,G(t.title,y),i.font=l.string,G(t.beforeBody.concat(t.afterBody),y),_=e.displayColors?o+2+e.boxPadding:0,G(r,t=>{G(t.before,y),G(t.lines,y),G(t.after,y)}),_=0,i.font=c.string,G(t.footer,y),i.restore(),{width:m+=p.width,height:g}}function sn(t,e,i){let r=i.yAlign||e.yAlign||function(t,e){let{y:i,height:r}=e;return i<r/2?"top":i>t.height-r/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||function(t,e,i,r){let{x:s,width:n}=i,{width:o,chartArea:{left:a,right:l}}=t,h="center";return"center"===r?h=s<=(a+l)/2?"left":"right":s<=n/2?h="left":s>=o-n/2&&(h="right"),function(t,e,i,r){let{x:s,width:n}=r,o=i.caretSize+i.caretPadding;if("left"===t&&s+n+o>e.width||"right"===t&&s-n-o<0)return!0}(h,t,e,i)&&(h="center"),h}(t,e,i,r),yAlign:r}}function so(t,e,i,r){let{caretSize:s,caretPadding:n,cornerRadius:o}=t,{xAlign:a,yAlign:l}=i,h=s+n,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=em(o),p=function(t,e){let{x:i,width:r}=t;return"right"===e?i-=r:"center"===e&&(i-=r/2),i}(e,a),g=function(t,e,i){let{y:r,height:s}=t;return"top"===e?r+=i:"bottom"===e?r-=s+i:r-=s/2,r}(e,l,h);return"center"===l?"left"===a?p+=h:"right"===a&&(p-=h):"left"===a?p-=Math.max(c,d)+s:"right"===a&&(p+=Math.max(u,f)+s),{x:tO(p,0,r.width-e.width),y:tO(g,0,r.height-e.height)}}function sa(t,e,i){let r=eb(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function sl(t,e){let i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}let sh={beforeTitle:L,title(t){if(t.length>0){let e=t[0],i=e.chart.data.labels,r=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return i[e.dataIndex]}return""},afterTitle:L,beforeBody:L,beforeLabel:L,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");let i=t.formattedValue;return F(i)||(e+=i),e},labelColor(t){let e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){let e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:L,afterBody:L,beforeFooter:L,footer:L,afterFooter:L};function sc(t,e,i,r){let s=t[e].call(i,r);return void 0===s?sh[e].call(i,r):s}class su extends re{static positioners=se;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,s=new ir(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=ev(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"}))}getTitle(t,e){let{callbacks:i}=e,r=sc(i,"beforeTitle",this,t),s=sc(i,"title",this,t),n=sc(i,"afterTitle",this,t),o=[];return o=si(o,sr(r)),o=si(o,sr(s)),o=si(o,sr(n))}getBeforeBody(t,e){return si([],sr(sc(e.callbacks,"beforeBody",this,t)))}getBody(t,e){let{callbacks:i}=e,r=[];return G(t,t=>{let e={before:[],lines:[],after:[]},s=sl(i,t);si(e.before,sr(sc(s,"beforeLabel",this,t))),si(e.lines,sc(s,"label",this,t)),si(e.after,sr(sc(s,"afterLabel",this,t))),r.push(e)}),r}getAfterBody(t,e){return si([],sr(sc(e.callbacks,"afterBody",this,t)))}getFooter(t,e){let{callbacks:i}=e,r=sc(i,"beforeFooter",this,t),s=sc(i,"footer",this,t),n=sc(i,"afterFooter",this,t),o=[];return o=si(o,sr(r)),o=si(o,sr(s)),o=si(o,sr(n))}_createItems(t){let e,i;let r=this._active,s=this.chart.data,n=[],o=[],a=[],l=[];for(e=0,i=r.length;e<i;++e)l.push(function(t,e){let{element:i,datasetIndex:r,index:s}=e,n=t.getDatasetMeta(r).controller,{label:o,value:a}=n.getLabelAndValue(s);return{chart:t,label:o,parsed:n.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:n.getDataset(),dataIndex:s,datasetIndex:r,element:i}}(this.chart,r[e]));return t.filter&&(l=l.filter((e,i,r)=>t.filter(e,i,r,s))),t.itemSort&&(l=l.sort((e,i)=>t.itemSort(e,i,s))),G(l,e=>{let i=sl(t.callbacks,e);n.push(sc(i,"labelColor",this,e)),o.push(sc(i,"labelPointStyle",this,e)),a.push(sc(i,"labelTextColor",this,e))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(t,e){let i;let r=this.options.setContext(this.getContext()),s=this._active,n=[];if(s.length){let t=se[r.position].call(this,s,this._eventPosition);n=this._createItems(r),this.title=this.getTitle(n,r),this.beforeBody=this.getBeforeBody(n,r),this.body=this.getBody(n,r),this.afterBody=this.getAfterBody(n,r),this.footer=this.getFooter(n,r);let e=this._size=ss(this,r),o=Object.assign({},t,e),a=sn(this.chart,r,o),l=so(r,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=n,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){let s=this.getCaretPosition(t,i,r);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,i){let r,s,n,o,a,l;let{xAlign:h,yAlign:c}=this,{caretSize:u,cornerRadius:d}=i,{topLeft:f,topRight:p,bottomLeft:g,bottomRight:m}=em(d),{x:b,y:_}=t,{width:y,height:v}=e;return"center"===c?(a=_+v/2,"left"===h?(s=(r=b)-u,o=a+u,l=a-u):(s=(r=b+y)+u,o=a-u,l=a+u),n=r):(s="left"===h?b+Math.max(f,g)+u:"right"===h?b+y-Math.max(p,m)-u:this.caretX,"top"===c?(a=(o=_)-u,r=s-u,n=s+u):(a=(o=_+v)+u,r=s+u,n=s-u),l=o),{x1:r,x2:s,x3:n,y1:o,y2:a,y3:l}}drawTitle(t,e,i){let r,s,n;let o=this.title,a=o.length;if(a){let l=eZ(i.rtl,this.x,this.width);for(n=0,t.x=sa(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",r=e_(i.titleFont),s=i.titleSpacing,e.fillStyle=i.titleColor,e.font=r.string;n<a;++n)e.fillText(o[n],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+s,n+1===a&&(t.y+=i.titleMarginBottom-s)}}_drawColorBox(t,e,i,r,s){let n=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:a,boxWidth:l}=s,h=e_(s.bodyFont),c=sa(this,"left",s),u=r.x(c),d=a<h.lineHeight?(h.lineHeight-a)/2:0,f=e.y+d;if(s.usePointStyle){let e={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},i=r.leftForLtr(u,l)+l/2,h=f+a/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,ei(t,e,i,h),t.strokeStyle=n.borderColor,t.fillStyle=n.backgroundColor,ei(t,e,i,h)}else{t.lineWidth=W(n.borderWidth)?Math.max(...Object.values(n.borderWidth)):n.borderWidth||1,t.strokeStyle=n.borderColor,t.setLineDash(n.borderDash||[]),t.lineDashOffset=n.borderDashOffset||0;let e=r.leftForLtr(u,l),i=r.leftForLtr(r.xPlus(u,1),l-2),o=em(n.borderRadius);Object.values(o).some(t=>0!==t)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,ec(t,{x:e,y:f,w:l,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=n.backgroundColor,t.beginPath(),ec(t,{x:i,y:f+1,w:l-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(e,f,l,a),t.strokeRect(e,f,l,a),t.fillStyle=n.backgroundColor,t.fillRect(i,f+1,l-2,a-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){let r,s,n,o,a,l,h;let{body:c}=this,{bodySpacing:u,bodyAlign:d,displayColors:f,boxHeight:p,boxWidth:g,boxPadding:m}=i,b=e_(i.bodyFont),_=b.lineHeight,y=0,v=eZ(i.rtl,this.x,this.width),w=function(i){e.fillText(i,v.x(t.x+y),t.y+_/2),t.y+=_+u},x=v.textAlign(d);for(e.textAlign=d,e.textBaseline="middle",e.font=b.string,t.x=sa(this,x,i),e.fillStyle=i.bodyColor,G(this.beforeBody,w),y=f&&"right"!==x?"center"===d?g/2+m:g+2+m:0,o=0,l=c.length;o<l;++o){for(r=c[o],s=this.labelTextColors[o],e.fillStyle=s,G(r.before,w),n=r.lines,f&&n.length&&(this._drawColorBox(e,t,o,v,i),_=Math.max(b.lineHeight,p)),a=0,h=n.length;a<h;++a)w(n[a]),_=b.lineHeight;G(r.after,w)}y=0,_=b.lineHeight,G(this.afterBody,w),t.y-=u}drawFooter(t,e,i){let r,s;let n=this.footer,o=n.length;if(o){let a=eZ(i.rtl,this.x,this.width);for(t.x=sa(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=a.textAlign(i.footerAlign),e.textBaseline="middle",r=e_(i.footerFont),e.fillStyle=i.footerColor,e.font=r.string,s=0;s<o;++s)e.fillText(n[s],a.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){let{xAlign:s,yAlign:n}=this,{x:o,y:a}=t,{width:l,height:h}=i,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=em(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(o+c,a),"top"===n&&this.drawCaret(t,e,i,r),e.lineTo(o+l-u,a),e.quadraticCurveTo(o+l,a,o+l,a+u),"center"===n&&"right"===s&&this.drawCaret(t,e,i,r),e.lineTo(o+l,a+h-f),e.quadraticCurveTo(o+l,a+h,o+l-f,a+h),"bottom"===n&&this.drawCaret(t,e,i,r),e.lineTo(o+d,a+h),e.quadraticCurveTo(o,a+h,o,a+h-d),"center"===n&&"left"===s&&this.drawCaret(t,e,i,r),e.lineTo(o,a+c),e.quadraticCurveTo(o,a,o+c,a),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){let e=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){let i=se[t.position].call(this,this._active,this._eventPosition);if(!i)return;let n=this._size=ss(this,t),o=Object.assign({},i,this._size),a=sn(e,t,o),l=so(t,o,a,e);(r._to!==l.x||s._to!==l.y)&&(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=n.width,this.height=n.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){let e=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(e);let r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=.001>Math.abs(i)?0:i;let n=eb(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,r,e),eJ(t,e.textDirection),s.y+=n.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),e0(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){let i=this._active,r=t.map(({datasetIndex:t,index:e})=>{let i=this.chart.getDatasetMeta(t);if(!i)throw Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}),s=!Y(i,r),n=this._positionChanged(r,e);(s||n)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let r=this.options,s=this._active||[],n=this._getActiveElements(t,s,e,i),o=this._positionChanged(n,t),a=e||!Y(n,s)||o;return a&&(this._active=n,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,i,r){let s=this.options;if("mouseout"===t.type)return[];if(!r)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));let n=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&n.reverse(),n}_positionChanged(t,e){let{caretX:i,caretY:r,options:s}=this,n=se[s.position].call(this,t,e);return!1!==n&&(i!==n.x||r!==n.y)}}let sd=(t,e,i,r)=>("string"==typeof e?(i=t.push(e)-1,r.unshift({index:i,label:e})):isNaN(e)&&(i=null),i),sf=(t,e)=>null===t?null:tO(Math.round(t),0,e);function sp(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class sg extends rh{static id="category";static defaults={ticks:{callback:sp}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let e=this._addedLabels;if(e.length){let t=this.getLabels();for(let{index:i,label:r}of e)t[i]===r&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(F(t))return null;let i=this.getLabels();return sf(e=isFinite(e)&&i[e]===t?e:function(t,e,i,r){let s=t.indexOf(e);return -1===s?sd(t,e,i,r):s!==t.lastIndexOf(e)?i:s}(i,t,V(e,t),this._addedLabels),i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:i,max:r}=this.getMinMax(!0);"ticks"!==this.options.bounds||(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){let t=this.min,e=this.max,i=this.options.offset,r=[],s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=t;i<=e;i++)r.push({value:i});return r}getLabelForValue(t){return sp.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function sm(t,e,{horizontal:i,minRotation:r}){let s=tx(r),n=.75*e*(""+t).length;return Math.min(e/((i?Math.sin(s):Math.cos(s))||.001),n)}class sb extends rh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return F(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,n=t=>r=e?r:t,o=t=>s=i?s:t;if(t){let t=tb(r),e=tb(s);t<0&&e<0?o(0):t>0&&e>0&&n(0)}if(r===s){let e=0===s?1:Math.abs(.05*s);o(s+e),t||n(r-e)}this.min=r,this.max=s}getTickLimit(){let t;let{maxTicksLimit:e,stepSize:i}=this.options.ticks;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1)>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3):(t=this.computeTickLimit(),e=e||11),e&&(t=Math.min(e,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit(),r=function(t,e){let i,r,s,n;let o=[],{bounds:a,step:l,min:h,max:c,precision:u,count:d,maxTicks:f,maxDigits:p,includeBounds:g}=t,m=l||1,b=f-1,{min:_,max:y}=e,v=!F(h),w=!F(c),x=!F(d),S=(y-_)/(p+1),k=ty((y-_)/b/m)*m;if(k<1e-14&&!v&&!w)return[{value:_},{value:y}];(n=Math.ceil(y/k)-Math.floor(_/k))>b&&(k=ty(n*k/b/m)*m),F(u)||(k=Math.ceil(k*(i=Math.pow(10,u)))/i),"ticks"===a?(r=Math.floor(_/k)*k,s=Math.ceil(y/k)*k):(r=_,s=y),v&&w&&l&&function(t,e){let i=Math.round(t);return i-e<=t&&i+e>=t}((c-h)/l,k/1e3)?(n=Math.round(Math.min((c-h)/k,f)),k=(c-h)/n,r=h,s=c):x?(r=v?h:r,k=((s=w?c:s)-r)/(n=d-1)):n=t_(n=(s-r)/k,Math.round(n),k/1e3)?Math.round(n):Math.ceil(n);let E=Math.max(tS(k),tS(r));r=Math.round(r*(i=Math.pow(10,F(u)?E:u)))/i,s=Math.round(s*i)/i;let M=0;for(v&&(g&&r!==h?(o.push({value:h}),r<h&&M++,t_(Math.round((r+M*k)*i)/i,h,sm(h,S,t))&&M++):r<h&&M++);M<n;++M){let t=Math.round((r+M*k)*i)/i;if(w&&t>c)break;o.push({value:t})}return w&&g&&s!==c?o.length&&t_(o[o.length-1].value,c,sm(c,S,t))?o[o.length-1].value=c:o.push({value:c}):w&&s!==c||o.push({value:s}),o}({maxTicks:i=Math.max(2,i),bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&tw(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return t0(t,this.chart.options.locale,this.options.ticks.format)}}class s_ extends sb{static id="linear";static defaults={ticks:{callback:t2.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=H(t)?t:0,this.max=H(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=tx(this.options.ticks.minRotation);return Math.ceil(e/Math.min(40,this._resolveTickFontOptions(0).lineHeight/((t?Math.sin(i):Math.cos(i))||.001)))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}let sy=t=>Math.floor(tm(t)),sv=(t,e)=>Math.pow(10,sy(t)+e);function sw(t){return 1==t/Math.pow(10,sy(t))}function sx(t,e,i){let r=Math.pow(10,i);return Math.ceil(e/r)-Math.floor(t/r)}class sS extends rh{static id="logarithmic";static defaults={ticks:{callback:t2.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=sb.prototype.parse.apply(this,[t,e]);if(0===i){this._zero=!0;return}return H(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=H(t)?Math.max(0,t):null,this.max=H(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!H(this._userMin)&&(this.min=t===sv(this.min,0)?sv(this.min,-1):sv(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,r=this.max,s=e=>i=t?i:e,n=t=>r=e?r:t;i===r&&(i<=0?(s(1),n(10)):(s(sv(i,-1)),n(sv(r,1)))),i<=0&&s(sv(r,-1)),r<=0&&n(sv(i,1)),this.min=i,this.max=r}buildTicks(){let t=this.options,e=function(t,{min:e,max:i}){e=z(t.min,e);let r=[],s=sy(e),n=function(t,e){let i=sy(e-t);for(;sx(t,e,i)>10;)i++;for(;10>sx(t,e,i);)i--;return Math.min(i,sy(t))}(e,i),o=n<0?Math.pow(10,Math.abs(n)):1,a=Math.pow(10,n),l=s>n?Math.pow(10,s):0,h=Math.round((e-l)*o)/o,c=Math.floor((e-l)/a/10)*a*10,u=Math.floor((h-c)/Math.pow(10,n)),d=z(t.min,Math.round((l+c+u*Math.pow(10,n))*o)/o);for(;d<i;)r.push({value:d,major:sw(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(u=2,o=++n>=0?1:o),d=Math.round((l+c+u*Math.pow(10,n))*o)/o;let f=z(t.max,d);return r.push({value:f,major:sw(f),significand:u}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&tw(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":t0(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=tm(t),this._valueRange=tm(this.max)-tm(t)}getPixelForValue(t){return((void 0===t||0===t)&&(t=this.min),null===t||isNaN(t))?NaN:this.getPixelForDecimal(t===this.min?0:(tm(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function sk(t){let e=t.ticks;if(e.display&&t.display){let t=eb(e.backdropPadding);return V(e.font&&e.font.size,t9.font.size)+t.height}return 0}function sE(t,e,i,r,s){return t===r||t===s?{start:e-i/2,end:e+i/2}:t<r||t>s?{start:e-i,end:e}:{start:e,end:e+i}}function sM(t,e,i,r){let{ctx:s}=t;if(i)s.arc(t.xCenter,t.yCenter,e,0,th);else{let i=t.getPointPosition(0,e);s.moveTo(i.x,i.y);for(let n=1;n<r;n++)i=t.getPointPosition(n,e),s.lineTo(i.x,i.y)}}class sI extends sb{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:t2.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=eb(sk(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=H(t)&&!isNaN(t)?t:0,this.max=H(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/sk(this.options))}generateTickLabels(t){sb.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{let i=K(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){let t=this.options;t.display&&t.pointLabels.display?function(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),r=[],s=[],n=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?tl/n:0;for(let c=0;c<n;c++){var l,h;let n=o.setContext(t.getPointLabelContext(c));s[c]=n.padding;let u=t.getPointPosition(c,t.drawingArea+s[c],a),d=e_(n.font),f=(l=t.ctx,h=U(h=t._pointLabels[c])?h:[h],{w:function(t,e,i,r){let s,n,o,a,l;let h=(r=r||{}).data=r.data||{},c=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(h=r.data={},c=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let u=0,d=i.length;for(s=0;s<d;s++)if(null==(a=i[s])||U(a)){if(U(a))for(n=0,o=a.length;n<o;n++)null==(l=a[n])||U(l)||(u=t7(t,h,c,u,l))}else u=t7(t,h,c,u,a);t.restore();let f=c.length/2;if(f>i.length){for(s=0;s<f;s++)delete h[c[s]];c.splice(0,f)}return u}(l,d.string,h),h:h.length*d.lineHeight});r[c]=f;let p=tI(t.getIndexAngle(c)+a),g=Math.round(180/tl*p);(function(t,e,i,r,s){let n=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i)),a=0,l=0;r.start<e.l?(a=(e.l-r.start)/n,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/n,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))})(i,e,p,sE(g,u.x,f.w,0,180),sE(g,u.y,f.h,90,270))}t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){let r;let s=[],n=t._pointLabels.length,o=t.options,{centerPointLabels:a,display:l}=o.pointLabels,h={extra:sk(o)/2,additionalAngle:a?tl/n:0};for(let o=0;o<n;o++){h.padding=i[o],h.size=e[o];let n=function(t,e,i){var r,s,n,o;let a=t.drawingArea,{extra:l,additionalAngle:h,padding:c,size:u}=i,d=t.getPointPosition(e,a+l+c,h),f=Math.round(180/tl*tI(d.angle+tf)),p=(r=d.y,s=u.h,90===f||270===f?r-=s/2:(f>270||f<90)&&(r-=s),r),g=0===f||180===f?"center":f<180?"left":"right",m=(n=d.x,o=u.w,"right"===g?n-=o:"center"===g&&(n-=o/2),n);return{visible:!0,x:d.x,y:p,textAlign:g,left:m,top:p,right:m+u.w,bottom:p+u.h}}(t,o,h);s.push(n),"auto"===l&&(n.visible=function(t,e){if(!e)return!0;let{left:i,top:r,right:s,bottom:n}=t;return!(es({x:i,y:r},e)||es({x:i,y:n},e)||es({x:s,y:r},e)||es({x:s,y:n},e))}(n,r),n.visible&&(r=n))}return s}(t,r,s)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){return tI(th/(this._pointLabels.length||1)*t+tx(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(F(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(F(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return ev(this.getContext(),{label:i,index:t,type:"pointLabel"})}}getPointPosition(t,e,i=0){let r=this.getIndexAngle(t)-tf+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),sM(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t,e,i;let r=this.ctx,s=this.options,{angleLines:n,grid:o,border:a}=s,l=this._pointLabels.length;if(s.pointLabels.display&&function(t,e){let{ctx:i,options:{pointLabels:r}}=t;for(let s=e-1;s>=0;s--){let e=t._pointLabelItems[s];if(!e.visible)continue;let n=r.setContext(t.getPointLabelContext(s));!function(t,e,i){let{left:r,top:s,right:n,bottom:o}=i,{backdropColor:a}=e;if(!F(a)){let i=em(e.borderRadius),l=eb(e.backdropPadding);t.fillStyle=a;let h=r-l.left,c=s-l.top,u=n-r+l.width,d=o-s+l.height;Object.values(i).some(t=>0!==t)?(t.beginPath(),ec(t,{x:h,y:c,w:u,h:d,radius:i}),t.fill()):t.fillRect(h,c,u,d)}}(i,n,e);let o=e_(n.font),{x:a,y:l,textAlign:h}=e;eh(i,t._pointLabels[s],a,l+o.lineHeight/2,o,{color:n.color,textAlign:h,textBaseline:"middle"})}}(this,l),o.display&&this.ticks.forEach((t,i)=>{if(0!==i||0===i&&this.min<0){e=this.getDistanceFromCenterForValue(t.value);let r=this.getContext(i),s=o.setContext(r),n=a.setContext(r);!function(t,e,i,r,s){let n=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;(o||r)&&a&&l&&!(i<0)&&(n.save(),n.strokeStyle=a,n.lineWidth=l,n.setLineDash(s.dash||[]),n.lineDashOffset=s.dashOffset,n.beginPath(),sM(t,i,o,r),n.closePath(),n.stroke(),n.restore())}(this,s,e,l,n)}}),n.display){for(r.save(),t=l-1;t>=0;t--){let o=n.setContext(this.getPointLabelContext(t)),{color:a,lineWidth:l}=o;l&&a&&(r.lineWidth=l,r.strokeStyle=a,r.setLineDash(o.borderDash),r.lineDashOffset=o.borderDashOffset,e=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),i=this.getPointPosition(t,e),r.beginPath(),r.moveTo(this.xCenter,this.yCenter),r.lineTo(i.x,i.y),r.stroke())}r.restore()}}drawBorder(){}drawLabels(){let t,e;let i=this.ctx,r=this.options,s=r.ticks;if(!s.display)return;let n=this.getIndexAngle(0);i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(n),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((n,o)=>{if(0===o&&this.min>=0&&!r.reverse)return;let a=s.setContext(this.getContext(o)),l=e_(a.font);if(t=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){i.font=l.string,e=i.measureText(n.label).width,i.fillStyle=a.backdropColor;let r=eb(a.backdropPadding);i.fillRect(-e/2-r.left,-t-l.size/2-r.top,e+r.width,l.size+r.height)}eh(i,n.label,0,-t,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),i.restore()}drawTitle(){}}let sT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},sO=Object.keys(sT);function sA(t,e){return t-e}function sC(t,e){if(F(e))return null;let i=t._adapter,{parser:r,round:s,isoWeekday:n}=t._parseOpts,o=e;return("function"==typeof r&&(o=r(o)),H(o)||(o="string"==typeof r?i.parse(o,r):i.parse(o)),null===o)?null:(s&&(o="week"===s&&(tv(n)||!0===n)?i.startOf(o,"isoWeek",n):i.startOf(o,s)),+o)}function sP(t,e,i,r){let s=sO.length;for(let n=sO.indexOf(t);n<s-1;++n){let t=sT[sO[n]],s=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(s*t.size))<=r)return sO[n]}return sO[s-1]}function sR(t,e,i){if(i){if(i.length){let{lo:r,hi:s}=tC(i,e);t[i[r]>=e?i[r]:i[s]]=!0}}else t[e]=!0}function sB(t,e,i){let r,s;let n=[],o={},a=e.length;for(r=0;r<a;++r)o[s=e[r]]=r,n.push({value:s,major:!1});return 0!==a&&i?function(t,e,i,r){let s,n;let o=t._adapter,a=+o.startOf(e[0].value,r),l=e[e.length-1].value;for(s=a;s<=l;s=+o.add(s,1,r))(n=i[s])>=0&&(e[n].major=!0);return e}(t,n,o,i):n}class sN extends rh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){let i=t.time||(t.time={}),r=this._adapter=new iR._date(t.adapters.date);r.init(e),tt(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:sC(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,e=this._adapter,i=t.time.unit||"day",{min:r,max:s,minDefined:n,maxDefined:o}=this.getUserBounds();function a(t){n||isNaN(t.min)||(r=Math.min(r,t.min)),o||isNaN(t.max)||(s=Math.max(s,t.max))}n&&o||(a(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&a(this.getMinMax(!1))),r=H(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),s=H(s)&&!isNaN(s)?s:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){let t=this.options,e=t.time,i=t.ticks,r="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let s=this.min,n=function(t,e,i){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>i;)s--;return r>0||s<t.length?t.slice(r,s):t}(r,s,this.max);return this._unit=e.unit||(i.autoSkip?sP(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(t,e,i,r,s){for(let n=sO.length-1;n>=sO.indexOf(i);n--){let i=sO[n];if(sT[i].common&&t._adapter.diff(s,r,i)>=e-1)return i}return sO[i?sO.indexOf(i):0]}(this,n.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=sO.indexOf(t)+1,i=sO.length;e<i;++e)if(sT[sO[e]].common)return sO[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&n.reverse(),sB(this,n,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,i,r=0,s=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),s=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);let n=t.length<3?.5:.25;r=tO(r,0,n),s=tO(s,0,n),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){let t,e;let i=this._adapter,r=this.min,s=this.max,n=this.options,o=n.time,a=o.unit||sP(o.minUnit,r,s,this._getLabelCapacity(r)),l=V(n.ticks.stepSize,1),h="week"===a&&o.isoWeekday,c=tv(h)||!0===h,u={},d=r;if(c&&(d=+i.startOf(d,"isoWeek",h)),d=+i.startOf(d,c?"day":a),i.diff(s,r,a)>1e5*l)throw Error(r+" and "+s+" are too far apart with stepSize of "+l+" "+a);let f="data"===n.ticks.source&&this.getDataTimestamps();for(t=d,e=0;t<s;t=+i.add(t,l,a),e++)sR(u,t,f);return(t===s||"ticks"===n.bounds||1===e)&&sR(u,t,f),Object.keys(u).sort(sA).map(t=>+t)}getLabelForValue(t){let e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){let i=this.options.time.displayFormats,r=this._unit,s=e||i[r];return this._adapter.format(t,s)}_tickFormatFunction(t,e,i,r){let s=this.options,n=s.ticks.callback;if(n)return K(n,[t,e,i],this);let o=s.time.displayFormats,a=this._unit,l=this._majorUnit,h=a&&o[a],c=l&&o[l],u=i[e],d=l&&c&&u&&u.major;return this._adapter.format(t,r||(d?c:h))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)(r=t[e]).label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let e=this.options.ticks,i=this.ctx.measureText(t).width,r=tx(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(r),n=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:i*s+o*n,h:i*n+o*s}}_getLabelCapacity(t){let e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,s=this._tickFormatFunction(t,0,sB(this,[t],this._majorUnit),r),n=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/n.w:this.height/n.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)i=i.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){let t,e;let i=this._cache.labels||[];if(i.length)return i;let r=this.getLabels();for(t=0,e=r.length;t<e;++t)i.push(sC(this,r[t]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(t){return tD(t.sort(sA))}}function sD(t,e,i){let r,s,n,o,a=0,l=t.length-1;i?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=tP(t,"pos",e)),{pos:r,time:n}=t[a],{pos:s,time:o}=t[l]):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=tP(t,"time",e)),{time:r,pos:n}=t[a],{time:s,pos:o}=t[l]);let h=s-r;return h?n+(o-n)*(e-r)/h:n}class sL extends sN{static id="timeseries";static defaults=sN.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=sD(e,this.min),this._tableRange=sD(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let e,i,r;let{min:s,max:n}=this,o=[],a=[];for(e=0,i=t.length;e<i;++e)(r=t[e])>=s&&r<=n&&o.push(r);if(o.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(e=0,i=o.length;e<i;++e)Math.round((o[e+1]+o[e-1])/2)!==(r=o[e])&&a.push({time:r,pos:e/(i-1)});return a}_generate(){let t=this.min,e=this.max,i=super.getDataTimestamps();return i.includes(t)&&i.length||i.splice(0,0,t),i.includes(e)&&1!==i.length||i.push(e),i.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t}getDecimalForValue(t){return(sD(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return sD(this._table,i*this._tableRange+this._minPos,!0)}}let sj="label";function sF(t,e){"function"==typeof t?t(e):t&&(t.current=e)}function sU(t,e,i=sj){let r=[];t.datasets=e.map(e=>{let s=t.datasets.find(t=>t[i]===e[i]);return!s||!e.data||r.includes(s)?{...e}:(r.push(s),Object.assign(s,e),s)})}let sW=(0,o.forwardRef)(function(t,e){let{height:i=150,width:r=300,redraw:s=!1,datasetIdKey:a,type:l,data:h,options:c,plugins:u=[],fallbackContent:d,updateMode:f,...p}=t,g=(0,o.useRef)(null),m=(0,o.useRef)(null),b=()=>{g.current&&(m.current=new rN(g.current,{type:l,data:function(t,e=sj){var i;let r={labels:[],datasets:[]};return i=t.labels,r.labels=i,sU(r,t.datasets,e),r}(h,a),options:c&&{...c},plugins:u}),sF(e,m.current))},_=()=>{sF(e,null),m.current&&(m.current.destroy(),m.current=null)};return(0,o.useEffect)(()=>{!s&&m.current&&c&&function(t,e){let i=t.options;i&&e&&Object.assign(i,e)}(m.current,c)},[s,c]),(0,o.useEffect)(()=>{if(!s&&m.current){var t,e;t=m.current.config.data,e=h.labels,t.labels=e}},[s,h.labels]),(0,o.useEffect)(()=>{!s&&m.current&&h.datasets&&sU(m.current.config.data,h.datasets,a)},[s,h.datasets]),(0,o.useEffect)(()=>{m.current&&(s?(_(),setTimeout(b)):m.current.update(f))},[s,c,h.labels,h.datasets,f]),(0,o.useEffect)(()=>{m.current&&(_(),setTimeout(b))},[l]),(0,o.useEffect)(()=>(b(),()=>_()),[]),(0,n.jsx)("canvas",{ref:g,role:"img",height:i,width:r,...p,children:d})}),sH=(s="line",rN.register(iM),(0,o.forwardRef)((t,e)=>(0,n.jsx)(sW,{...t,ref:e,type:s})));function sz(t){let e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):new Date("number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?t:NaN)}function sV(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}let s$={},sq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function sK(t){return (e={})=>{let i=e.width?String(e.width):t.defaultWidth;return t.formats[i]||t.formats[t.defaultWidth]}}let sG={date:sK({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:sK({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:sK({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},sY={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function sQ(t){return(e,i)=>{let r;if("formatting"===(i?.context?String(i.context):"standalone")&&t.formattingValues){let e=t.defaultFormattingWidth||t.defaultWidth,s=i?.width?String(i.width):e;r=t.formattingValues[s]||t.formattingValues[e]}else{let e=t.defaultWidth,s=i?.width?String(i.width):t.defaultWidth;r=t.values[s]||t.values[e]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function sX(t){return(e,i={})=>{let r;let s=i.width,n=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],o=e.match(n);if(!o)return null;let a=o[0],l=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(l)?function(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return i}(l,t=>t.test(a)):function(t,e){for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e(t[i]))return i}(l,t=>t.test(a));return r=t.valueCallback?t.valueCallback(h):h,{value:r=i.valueCallback?i.valueCallback(r):r,rest:e.slice(a.length)}}}let sZ={code:"en-US",formatDistance:(t,e,i)=>{let r;let s=sq[t];return(r="string"==typeof s?s:1===e?s.one:s.other.replace("{{count}}",e.toString()),i?.addSuffix)?i.comparison&&i.comparison>0?"in "+r:r+" ago":r},formatLong:sG,formatRelative:(t,e,i,r)=>sY[t],localize:{ordinalNumber:(t,e)=>{let i=Number(t),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:sQ({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:sQ({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:sQ({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:sQ({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:sQ({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(t){return(e,i={})=>{let r=e.match(t.matchPattern);if(!r)return null;let s=r[0],n=e.match(t.parsePattern);if(!n)return null;let o=t.valueCallback?t.valueCallback(n[0]):n[0];return{value:o=i.valueCallback?i.valueCallback(o):o,rest:e.slice(s.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)}),era:sX({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:sX({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:sX({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:sX({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:sX({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},sJ=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},s0=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},s1={p:s0,P:(t,e)=>{let i;let r=t.match(/(P+)(p+)?/)||[],s=r[1],n=r[2];if(!n)return sJ(t,e);switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;default:i=e.dateTime({width:"full"})}return i.replace("{{date}}",sJ(s,e)).replace("{{time}}",s0(n,e))}},s2=/^D+$/,s5=/^Y+$/,s4=["D","DD","YY","YYYY"];function s3(t,e,i){let r=function(t,e,i){let r="Y"===t[0]?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(t,e,i);if(console.warn(r),s4.includes(t))throw RangeError(r)}class s6{validate(t,e){return!0}constructor(){this.subPriority=0}}class s8 extends s6{constructor(t,e,i,r,s){super(),this.value=t,this.validateValue=e,this.setValue=i,this.priority=r,s&&(this.subPriority=s)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,i){return this.setValue(t,e,this.value,i)}}class s9 extends s6{set(t,e){return e.timestampIsSet?t:sV(t,function(t,e){let i=e instanceof Date?sV(e,0):new e(0);return i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),i.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),i}(t,Date))}constructor(...t){super(...t),this.priority=10,this.subPriority=-1}}class s7{run(t,e,i,r){let s=this.parse(t,e,i,r);return s?{setter:new s8(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(t,e,i){return!0}}class nt extends s7{parse(t,e,i){switch(e){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,e,i){return e.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=140,this.incompatibleTokens=["R","u","t","T"]}}let ne={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ni={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function nr(t,e){return t?{value:e(t.value),rest:t.rest}:t}function ns(t,e){let i=e.match(t);return i?{value:parseInt(i[0],10),rest:e.slice(i[0].length)}:null}function nn(t,e){let i=e.match(t);if(!i)return null;if("Z"===i[0])return{value:0,rest:e.slice(1)};let r="+"===i[1]?1:-1;return{value:r*(36e5*(i[2]?parseInt(i[2],10):0)+6e4*(i[3]?parseInt(i[3],10):0)+(i[5]?parseInt(i[5],10):0)*1e3),rest:e.slice(i[0].length)}}function no(t){return ns(ne.anyDigitsSigned,t)}function na(t,e){switch(t){case 1:return ns(ne.singleDigit,e);case 2:return ns(ne.twoDigits,e);case 3:return ns(ne.threeDigits,e);case 4:return ns(ne.fourDigits,e);default:return ns(RegExp("^\\d{1,"+t+"}"),e)}}function nl(t,e){switch(t){case 1:return ns(ne.singleDigitSigned,e);case 2:return ns(ne.twoDigitsSigned,e);case 3:return ns(ne.threeDigitsSigned,e);case 4:return ns(ne.fourDigitsSigned,e);default:return ns(RegExp("^-?\\d{1,"+t+"}"),e)}}function nh(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function nc(t,e){let i;let r=e>0,s=r?e:1-e;if(s<=50)i=t||100;else{let e=s+50;i=t+100*Math.trunc(e/100)-(t>=e%100?100:0)}return r?i:1-i}function nu(t){return t%400==0||t%4==0&&t%100!=0}class nd extends s7{parse(t,e,i){let r=t=>({year:t,isTwoDigitYear:"yy"===e});switch(e){case"y":return nr(na(4,t),r);case"yo":return nr(i.ordinalNumber(t,{unit:"year"}),r);default:return nr(na(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i){let r=t.getFullYear();if(i.isTwoDigitYear){let e=nc(i.year,r);return t.setFullYear(e,0,1),t.setHours(0,0,0,0),t}let s="era"in e&&1!==e.era?1-i.year:i.year;return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=130,this.incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"]}}function nf(t,e){let i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??s$.weekStartsOn??s$.locale?.options?.weekStartsOn??0,r=sz(t),s=r.getDay();return r.setDate(r.getDate()-((s<i?7:0)+s-i)),r.setHours(0,0,0,0),r}function np(t,e){let i=sz(t),r=i.getFullYear(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s$.firstWeekContainsDate??s$.locale?.options?.firstWeekContainsDate??1,n=sV(t,0);n.setFullYear(r+1,0,s),n.setHours(0,0,0,0);let o=nf(n,e),a=sV(t,0);a.setFullYear(r,0,s),a.setHours(0,0,0,0);let l=nf(a,e);return i.getTime()>=o.getTime()?r+1:i.getTime()>=l.getTime()?r:r-1}class ng extends s7{parse(t,e,i){let r=t=>({year:t,isTwoDigitYear:"YY"===e});switch(e){case"Y":return nr(na(4,t),r);case"Yo":return nr(i.ordinalNumber(t,{unit:"year"}),r);default:return nr(na(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i,r){let s=np(t,r);if(i.isTwoDigitYear){let e=nc(i.year,s);return t.setFullYear(e,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),nf(t,r)}let n="era"in e&&1!==e.era?1-i.year:i.year;return t.setFullYear(n,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),nf(t,r)}constructor(...t){super(...t),this.priority=130,this.incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}}function nm(t){return nf(t,{weekStartsOn:1})}class nb extends s7{parse(t,e){return"R"===e?nl(4,t):nl(e.length,t)}set(t,e,i){let r=sV(t,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),nm(r)}constructor(...t){super(...t),this.priority=130,this.incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}}class n_ extends s7{parse(t,e){return"u"===e?nl(4,t):nl(e.length,t)}set(t,e,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=130,this.incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}}class ny extends s7{parse(t,e,i){switch(e){case"Q":case"QQ":return na(e.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=120,this.incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}}class nv extends s7{parse(t,e,i){switch(e){case"q":case"qq":return na(e.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=120,this.incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}}class nw extends s7{parse(t,e,i){let r=t=>t-1;switch(e){case"M":return nr(ns(ne.month,t),r);case"MM":return nr(na(2,t),r);case"Mo":return nr(i.ordinalNumber(t,{unit:"month"}),r);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"],this.priority=110}}class nx extends s7{parse(t,e,i){let r=t=>t-1;switch(e){case"L":return nr(ns(ne.month,t),r);case"LL":return nr(na(2,t),r);case"Lo":return nr(i.ordinalNumber(t,{unit:"month"}),r);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=110,this.incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}}function nS(t,e){let i=sz(t);return Math.round((+nf(i,e)-+function(t,e){let i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s$.firstWeekContainsDate??s$.locale?.options?.firstWeekContainsDate??1,r=np(t,e),s=sV(t,0);return s.setFullYear(r,0,i),s.setHours(0,0,0,0),nf(s,e)}(i,e))/6048e5)+1}class nk extends s7{parse(t,e,i){switch(e){case"w":return ns(ne.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return na(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i,r){return nf(function(t,e,i){let r=sz(t),s=nS(r,i)-e;return r.setDate(r.getDate()-7*s),r}(t,i,r),r)}constructor(...t){super(...t),this.priority=100,this.incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}}function nE(t){let e=sz(t),i=e.getFullYear(),r=sV(t,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);let s=nm(r),n=sV(t,0);n.setFullYear(i,0,4),n.setHours(0,0,0,0);let o=nm(n);return e.getTime()>=s.getTime()?i+1:e.getTime()>=o.getTime()?i:i-1}function nM(t){let e=sz(t);return Math.round((+nm(e)-+function(t){let e=nE(t),i=sV(t,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),nm(i)}(e))/6048e5)+1}class nI extends s7{parse(t,e,i){switch(e){case"I":return ns(ne.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return na(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i){return nm(function(t,e){let i=sz(t),r=nM(i)-e;return i.setDate(i.getDate()-7*r),i}(t,i))}constructor(...t){super(...t),this.priority=100,this.incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}}let nT=[31,28,31,30,31,30,31,31,30,31,30,31],nO=[31,29,31,30,31,30,31,31,30,31,30,31];class nA extends s7{parse(t,e,i){switch(e){case"d":return ns(ne.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return na(e.length,t)}}validate(t,e){let i=nu(t.getFullYear()),r=t.getMonth();return i?e>=1&&e<=nO[r]:e>=1&&e<=nT[r]}set(t,e,i){return t.setDate(i),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.subPriority=1,this.incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}}class nC extends s7{parse(t,e,i){switch(e){case"D":case"DD":return ns(ne.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return na(e.length,t)}}validate(t,e){return nu(t.getFullYear())?e>=1&&e<=366:e>=1&&e<=365}set(t,e,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.subpriority=1,this.incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}}function nP(t,e){let i=sz(t);return isNaN(e)?sV(t,NaN):(e&&i.setDate(i.getDate()+e),i)}function nR(t,e,i){let r=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??s$.weekStartsOn??s$.locale?.options?.weekStartsOn??0,s=sz(t),n=s.getDay(),o=7-r;return nP(s,e<0||e>6?e-(n+o)%7:((e%7+7)%7+o)%7-(n+o)%7)}class nB extends s7{parse(t,e,i){switch(e){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return(t=nR(t,i,r)).setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.incompatibleTokens=["D","i","e","c","t","T"]}}class nN extends s7{parse(t,e,i,r){let s=t=>(t+r.weekStartsOn+6)%7+7*Math.floor((t-1)/7);switch(e){case"e":case"ee":return nr(na(e.length,t),s);case"eo":return nr(i.ordinalNumber(t,{unit:"day"}),s);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return(t=nR(t,i,r)).setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}}class nD extends s7{parse(t,e,i,r){let s=t=>(t+r.weekStartsOn+6)%7+7*Math.floor((t-1)/7);switch(e){case"c":case"cc":return nr(na(e.length,t),s);case"co":return nr(i.ordinalNumber(t,{unit:"day"}),s);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return(t=nR(t,i,r)).setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}}class nL extends s7{parse(t,e,i){let r=t=>0===t?7:t;switch(e){case"i":case"ii":return na(e.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return nr(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return nr(i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return nr(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);default:return nr(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,e){return e>=1&&e<=7}set(t,e,i){return(t=function(t,e){let i;let r=sz(t),s=(0===(i=sz(r).getDay())&&(i=7),i);return nP(r,e-s)}(t,i)).setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}}class nj extends s7{parse(t,e,i){switch(e){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(nh(i),0,0,0),t}constructor(...t){super(...t),this.priority=80,this.incompatibleTokens=["b","B","H","k","t","T"]}}class nF extends s7{parse(t,e,i){switch(e){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(nh(i),0,0,0),t}constructor(...t){super(...t),this.priority=80,this.incompatibleTokens=["a","B","H","k","t","T"]}}class nU extends s7{parse(t,e,i){switch(e){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(nh(i),0,0,0),t}constructor(...t){super(...t),this.priority=80,this.incompatibleTokens=["a","b","t","T"]}}class nW extends s7{parse(t,e,i){switch(e){case"h":return ns(ne.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return na(e.length,t)}}validate(t,e){return e>=1&&e<=12}set(t,e,i){let r=t.getHours()>=12;return r&&i<12?t.setHours(i+12,0,0,0):r||12!==i?t.setHours(i,0,0,0):t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=70,this.incompatibleTokens=["H","K","k","t","T"]}}class nH extends s7{parse(t,e,i){switch(e){case"H":return ns(ne.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return na(e.length,t)}}validate(t,e){return e>=0&&e<=23}set(t,e,i){return t.setHours(i,0,0,0),t}constructor(...t){super(...t),this.priority=70,this.incompatibleTokens=["a","b","h","K","k","t","T"]}}class nz extends s7{parse(t,e,i){switch(e){case"K":return ns(ne.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return na(e.length,t)}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}constructor(...t){super(...t),this.priority=70,this.incompatibleTokens=["h","H","k","t","T"]}}class nV extends s7{parse(t,e,i){switch(e){case"k":return ns(ne.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return na(e.length,t)}}validate(t,e){return e>=1&&e<=24}set(t,e,i){return t.setHours(i<=24?i%24:i,0,0,0),t}constructor(...t){super(...t),this.priority=70,this.incompatibleTokens=["a","b","h","H","K","t","T"]}}class n$ extends s7{parse(t,e,i){switch(e){case"m":return ns(ne.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return na(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setMinutes(i,0,0),t}constructor(...t){super(...t),this.priority=60,this.incompatibleTokens=["t","T"]}}class nq extends s7{parse(t,e,i){switch(e){case"s":return ns(ne.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return na(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setSeconds(i,0),t}constructor(...t){super(...t),this.priority=50,this.incompatibleTokens=["t","T"]}}class nK extends s7{parse(t,e){return nr(na(e.length,t),t=>Math.trunc(t*Math.pow(10,-e.length+3)))}set(t,e,i){return t.setMilliseconds(i),t}constructor(...t){super(...t),this.priority=30,this.incompatibleTokens=["t","T"]}}function nG(t){let e=sz(t),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return i.setUTCFullYear(e.getFullYear()),+t-+i}class nY extends s7{parse(t,e){switch(e){case"X":return nn(ni.basicOptionalMinutes,t);case"XX":return nn(ni.basic,t);case"XXXX":return nn(ni.basicOptionalSeconds,t);case"XXXXX":return nn(ni.extendedOptionalSeconds,t);default:return nn(ni.extended,t)}}set(t,e,i){return e.timestampIsSet?t:sV(t,t.getTime()-nG(t)-i)}constructor(...t){super(...t),this.priority=10,this.incompatibleTokens=["t","T","x"]}}class nQ extends s7{parse(t,e){switch(e){case"x":return nn(ni.basicOptionalMinutes,t);case"xx":return nn(ni.basic,t);case"xxxx":return nn(ni.basicOptionalSeconds,t);case"xxxxx":return nn(ni.extendedOptionalSeconds,t);default:return nn(ni.extended,t)}}set(t,e,i){return e.timestampIsSet?t:sV(t,t.getTime()-nG(t)-i)}constructor(...t){super(...t),this.priority=10,this.incompatibleTokens=["t","T","X"]}}class nX extends s7{parse(t){return no(t)}set(t,e,i){return[sV(t,1e3*i),{timestampIsSet:!0}]}constructor(...t){super(...t),this.priority=40,this.incompatibleTokens="*"}}class nZ extends s7{parse(t){return no(t)}set(t,e,i){return[sV(t,i),{timestampIsSet:!0}]}constructor(...t){super(...t),this.priority=20,this.incompatibleTokens="*"}}let nJ={G:new nt,y:new nd,Y:new ng,R:new nb,u:new n_,Q:new ny,q:new nv,M:new nw,L:new nx,w:new nk,I:new nI,d:new nA,D:new nC,E:new nB,e:new nN,c:new nD,i:new nL,a:new nj,b:new nF,B:new nU,h:new nW,H:new nH,K:new nz,k:new nV,m:new n$,s:new nq,S:new nK,X:new nY,x:new nQ,t:new nX,T:new nZ},n0=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,n1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,n2=/^'([^]*?)'?$/,n5=/''/g,n4=/\S/,n3=/[a-zA-Z]/,n6={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},n8=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,n9=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,n7=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ot(t){return t?parseInt(t):1}function oe(t){return t&&parseFloat(t.replace(",","."))||0}let oi=[31,null,31,30,31,30,31,31,30,31,30,31];function or(t){return t%400==0||t%4==0&&t%100!=0}function os(t){return(t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof t)&&!isNaN(Number(sz(t)))}function on(t){let e=sz(t);return e.setHours(0,0,0,0),e}function oo(t,e){let i=on(t),r=on(e);return Math.round((+i-nG(i)-(+r-nG(r)))/864e5)}function oa(t){let e=sz(t),i=sV(t,0);return i.setFullYear(e.getFullYear(),0,1),i.setHours(0,0,0,0),i}function ol(t,e){let i=Math.abs(t).toString().padStart(e,"0");return(t<0?"-":"")+i}let oh={y(t,e){let i=t.getFullYear(),r=i>0?i:1-i;return ol("yy"===e?r%100:r,e.length)},M(t,e){let i=t.getMonth();return"M"===e?String(i+1):ol(i+1,2)},d:(t,e)=>ol(t.getDate(),e.length),a(t,e){let i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h:(t,e)=>ol(t.getHours()%12||12,e.length),H:(t,e)=>ol(t.getHours(),e.length),m:(t,e)=>ol(t.getMinutes(),e.length),s:(t,e)=>ol(t.getSeconds(),e.length),S(t,e){let i=e.length;return ol(Math.trunc(t.getMilliseconds()*Math.pow(10,i-3)),e.length)}},oc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ou={G:function(t,e,i){let r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});default:return i.era(r,{width:"wide"})}},y:function(t,e,i){if("yo"===e){let e=t.getFullYear();return i.ordinalNumber(e>0?e:1-e,{unit:"year"})}return oh.y(t,e)},Y:function(t,e,i,r){let s=np(t,r),n=s>0?s:1-s;return"YY"===e?ol(n%100,2):"Yo"===e?i.ordinalNumber(n,{unit:"year"}):ol(n,e.length)},R:function(t,e){return ol(nE(t),e.length)},u:function(t,e){return ol(t.getFullYear(),e.length)},Q:function(t,e,i){let r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ol(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,i){let r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ol(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,i){let r=t.getMonth();switch(e){case"M":case"MM":return oh.M(t,e);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,i){let r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ol(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,i,r){let s=nS(t,r);return"wo"===e?i.ordinalNumber(s,{unit:"week"}):ol(s,e.length)},I:function(t,e,i){let r=nM(t);return"Io"===e?i.ordinalNumber(r,{unit:"week"}):ol(r,e.length)},d:function(t,e,i){return"do"===e?i.ordinalNumber(t.getDate(),{unit:"date"}):oh.d(t,e)},D:function(t,e,i){let r=function(t){let e=sz(t);return oo(e,oa(e))+1}(t);return"Do"===e?i.ordinalNumber(r,{unit:"dayOfYear"}):ol(r,e.length)},E:function(t,e,i){let r=t.getDay();switch(e){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,i,r){let s=t.getDay(),n=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(n);case"ee":return ol(n,2);case"eo":return i.ordinalNumber(n,{unit:"day"});case"eee":return i.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,i,r){let s=t.getDay(),n=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(n);case"cc":return ol(n,e.length);case"co":return i.ordinalNumber(n,{unit:"day"});case"ccc":return i.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(s,{width:"narrow",context:"standalone"});case"cccccc":return i.day(s,{width:"short",context:"standalone"});default:return i.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,i){let r=t.getDay(),s=0===r?7:r;switch(e){case"i":return String(s);case"ii":return ol(s,e.length);case"io":return i.ordinalNumber(s,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,i){let r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(r,{width:"narrow",context:"formatting"});default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,i){let r;let s=t.getHours();switch(r=12===s?oc.noon:0===s?oc.midnight:s/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(r,{width:"narrow",context:"formatting"});default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,i){let r;let s=t.getHours();switch(r=s>=17?oc.evening:s>=12?oc.afternoon:s>=4?oc.morning:oc.night,e){case"B":case"BB":case"BBB":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(r,{width:"narrow",context:"formatting"});default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,i){if("ho"===e){let e=t.getHours()%12;return 0===e&&(e=12),i.ordinalNumber(e,{unit:"hour"})}return oh.h(t,e)},H:function(t,e,i){return"Ho"===e?i.ordinalNumber(t.getHours(),{unit:"hour"}):oh.H(t,e)},K:function(t,e,i){let r=t.getHours()%12;return"Ko"===e?i.ordinalNumber(r,{unit:"hour"}):ol(r,e.length)},k:function(t,e,i){let r=t.getHours();return(0===r&&(r=24),"ko"===e)?i.ordinalNumber(r,{unit:"hour"}):ol(r,e.length)},m:function(t,e,i){return"mo"===e?i.ordinalNumber(t.getMinutes(),{unit:"minute"}):oh.m(t,e)},s:function(t,e,i){return"so"===e?i.ordinalNumber(t.getSeconds(),{unit:"second"}):oh.s(t,e)},S:function(t,e){return oh.S(t,e)},X:function(t,e,i){let r=t.getTimezoneOffset();if(0===r)return"Z";switch(e){case"X":return of(r);case"XXXX":case"XX":return op(r);default:return op(r,":")}},x:function(t,e,i){let r=t.getTimezoneOffset();switch(e){case"x":return of(r);case"xxxx":case"xx":return op(r);default:return op(r,":")}},O:function(t,e,i){let r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+od(r,":");default:return"GMT"+op(r,":")}},z:function(t,e,i){let r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+od(r,":");default:return"GMT"+op(r,":")}},t:function(t,e,i){return ol(Math.trunc(t.getTime()/1e3),e.length)},T:function(t,e,i){return ol(t.getTime(),e.length)}};function od(t,e=""){let i=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),n=r%60;return 0===n?i+String(s):i+String(s)+e+ol(n,2)}function of(t,e){return t%60==0?(t>0?"-":"+")+ol(Math.abs(t)/60,2):op(t,e)}function op(t,e=""){let i=Math.abs(t);return(t>0?"-":"+")+ol(Math.trunc(i/60),2)+e+ol(i%60,2)}let og=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,om=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ob=/^'([^]*?)'?$/,o_=/''/g,oy=/[a-zA-Z]/;function ov(t,e){let i=+sz(t);return sV(t,i+e)}function ow(t,e){let i=sz(t);if(isNaN(e))return sV(t,NaN);if(!e)return i;let r=i.getDate(),s=sV(t,i.getTime());return(s.setMonth(i.getMonth()+e+1,0),r>=s.getDate())?s:(i.setFullYear(s.getFullYear(),s.getMonth(),r),i)}function ox(t,e){return+sz(t)-+sz(e)}function oS(t){return e=>{let i=(t?Math[t]:Math.trunc)(e);return 0===i?0:i}}function ok(t,e){let i=sz(t),r=sz(e),s=oE(i,r),n=Math.abs(oo(i,r));i.setDate(i.getDate()-s*n);let o=Number(oE(i,r)===-s),a=s*(n-o);return 0===a?0:a}function oE(t,e){let i=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return i<0?-1:i>0?1:i}function oM(t,e){let i=sz(t),r=sz(e),s=i.getTime()-r.getTime();return s<0?-1:s>0?1:s}function oI(t){let e=sz(t);return e.setHours(23,59,59,999),e}function oT(t){let e=sz(t),i=e.getMonth();return e.setFullYear(e.getFullYear(),i+1,0),e.setHours(23,59,59,999),e}function oO(t,e){let i;let r=sz(t),s=sz(e),n=oM(r,s),o=Math.abs(function(t,e){let i=sz(t),r=sz(e);return 12*(i.getFullYear()-r.getFullYear())+(i.getMonth()-r.getMonth())}(r,s));if(o<1)i=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*o);let e=oM(r,s)===-n;(function(t){let e=sz(t);return+oI(e)==+oT(e)})(sz(t))&&1===o&&1===oM(t,s)&&(e=!1),i=n*(o-Number(e))}return 0===i?0:i}let oA={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};iR._date.override({_id:"date-fns",formats:function(){return oA},parse:function(t,e){if(null==t)return null;let i=typeof t;return"number"===i||t instanceof Date?t=sz(t):"string"===i&&(t="string"==typeof e?function(t,e,i,r){let s=Object.assign({},s$),n=r?.locale??s.locale??sZ,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0;if(""===e)return""===t?sz(i):sV(i,NaN);let l={firstWeekContainsDate:o,weekStartsOn:a,locale:n},h=[new s9],c=e.match(n1).map(t=>{let e=t[0];return e in s1?(0,s1[e])(t,n.formatLong):t}).join("").match(n0),u=[];for(let s of c){var d,f;!r?.useAdditionalWeekYearTokens&&(d=s,s5.test(d))&&s3(s,e,t),!r?.useAdditionalDayOfYearTokens&&(f=s,s2.test(f))&&s3(s,e,t);let o=s[0],a=nJ[o];if(a){let{incompatibleTokens:e}=a;if(Array.isArray(e)){let t=u.find(t=>e.includes(t.token)||t.token===o);if(t)throw RangeError(`The format string mustn't contain \`${t.fullToken}\` and \`${s}\` at the same time`)}else if("*"===a.incompatibleTokens&&u.length>0)throw RangeError(`The format string mustn't contain \`${s}\` and any other token at the same time`);u.push({token:o,fullToken:s});let r=a.run(t,s,n.match,l);if(!r)return sV(i,NaN);h.push(r.setter),t=r.rest}else{if(o.match(n3))throw RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");if("''"===s?s="'":"'"===o&&(s=s.match(n2)[1].replace(n5,"'")),0!==t.indexOf(s))return sV(i,NaN);t=t.slice(s.length)}}if(t.length>0&&n4.test(t))return sV(i,NaN);let p=h.map(t=>t.priority).sort((t,e)=>e-t).filter((t,e,i)=>i.indexOf(t)===e).map(t=>h.filter(e=>e.priority===t).sort((t,e)=>e.subPriority-t.subPriority)).map(t=>t[0]),g=sz(i);if(isNaN(g.getTime()))return sV(i,NaN);let m={};for(let t of p){if(!t.validate(g,l))return sV(i,NaN);let e=t.set(g,m,l);Array.isArray(e)?(g=e[0],Object.assign(m,e[1])):g=e}return sV(i,g)}(t,e,new Date,this.options):function(t,e){let i,r;let s=e?.additionalDigits??2,n=function(t){let e;let i={},r=t.split(n6.dateTimeDelimiter);if(r.length>2)return i;if(/:/.test(r[0])?e=r[0]:(i.date=r[0],e=r[1],n6.timeZoneDelimiter.test(i.date)&&(i.date=t.split(n6.timeZoneDelimiter)[0],e=t.substr(i.date.length,t.length))),e){let t=n6.timezone.exec(e);t?(i.time=e.replace(t[1],""),i.timezone=t[1]):i.time=e}return i}(t);if(n.date){let t=function(t,e){let i=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(i);if(!r)return{year:NaN,restDateString:""};let s=r[1]?parseInt(r[1]):null,n=r[2]?parseInt(r[2]):null;return{year:null===n?s:100*n,restDateString:t.slice((r[1]||r[2]).length)}}(n.date,s);i=function(t,e){if(null===e)return new Date(NaN);let i=t.match(n8);if(!i)return new Date(NaN);let r=!!i[4],s=ot(i[1]),n=ot(i[2])-1,o=ot(i[3]),a=ot(i[4]),l=ot(i[5])-1;if(r)return a>=1&&a<=53&&l>=0&&l<=6?function(t,e,i){let r=new Date(0);r.setUTCFullYear(t,0,4);let s=r.getUTCDay()||7;return r.setUTCDate(r.getUTCDate()+((e-1)*7+i+1-s)),r}(e,a,l):new Date(NaN);{let t=new Date(0);return n>=0&&n<=11&&o>=1&&o<=(oi[n]||(or(e)?29:28))&&s>=1&&s<=(or(e)?366:365)?(t.setUTCFullYear(e,n,Math.max(s,o)),t):new Date(NaN)}}(t.restDateString,t.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);let o=i.getTime(),a=0;if(n.time&&isNaN(a=function(t){let e=t.match(n9);if(!e)return NaN;let i=oe(e[1]),r=oe(e[2]),s=oe(e[3]);return(24===i?0===r&&0===s:s>=0&&s<60&&r>=0&&r<60&&i>=0&&i<25)?36e5*i+6e4*r+1e3*s:NaN}(n.time)))return new Date(NaN);if(n.timezone){if(isNaN(r=function(t){if("Z"===t)return 0;let e=t.match(n7);if(!e)return 0;let i="+"===e[1]?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return s>=0&&s<=59?i*(36e5*r+6e4*s):NaN}(n.timezone)))return new Date(NaN)}else{let t=new Date(o+a),e=new Date(0);return e.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),e.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e}return new Date(o+a+r)}(t,this.options)),os(t)?t.getTime():null},format:function(t,e){return function(t,e,i){let r=i?.locale??s$.locale??sZ,s=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??s$.firstWeekContainsDate??s$.locale?.options?.firstWeekContainsDate??1,n=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??s$.weekStartsOn??s$.locale?.options?.weekStartsOn??0,o=sz(t);if(!os(o))throw RangeError("Invalid time value");let a=e.match(om).map(t=>{let e=t[0];return"p"===e||"P"===e?(0,s1[e])(t,r.formatLong):t}).join("").match(og).map(t=>{if("''"===t)return{isToken:!1,value:"'"};let e=t[0];if("'"===e)return{isToken:!1,value:function(t){let e=t.match(ob);return e?e[1].replace(o_,"'"):t}(t)};if(ou[e])return{isToken:!0,value:t};if(e.match(oy))throw RangeError("Format string contains an unescaped latin alphabet character `"+e+"`");return{isToken:!1,value:t}});r.localize.preprocessor&&(a=r.localize.preprocessor(o,a));let l={firstWeekContainsDate:s,weekStartsOn:n,locale:r};return a.map(s=>{if(!s.isToken)return s.value;let n=s.value;return(!i?.useAdditionalWeekYearTokens&&s5.test(n)||!i?.useAdditionalDayOfYearTokens&&s2.test(n))&&s3(n,e,String(t)),(0,ou[n[0]])(o,n,r.localize,l)}).join("")}(t,e,this.options)},add:function(t,e,i){switch(i){case"millisecond":return ov(t,e);case"second":return ov(t,1e3*e);case"minute":return ov(t,6e4*e);case"hour":return ov(t,36e5*e);case"day":return nP(t,e);case"week":return nP(t,7*e);case"month":return ow(t,e);case"quarter":return ow(t,3*e);case"year":return ow(t,12*e);default:return t}},diff:function(t,e,i){switch(i){case"millisecond":return ox(t,e);case"second":return function(t,e,i){let r=ox(t,e)/1e3;return oS(void 0)(r)}(t,e);case"minute":return function(t,e,i){let r=ox(t,e)/6e4;return oS(void 0)(r)}(t,e);case"hour":return function(t,e,i){let r=ox(t,e)/36e5;return oS(void 0)(r)}(t,e);case"day":return ok(t,e);case"week":return function(t,e,i){let r=ok(t,e)/7;return oS(void 0)(r)}(t,e);case"month":return oO(t,e);case"quarter":return function(t,e,i){let r=oO(t,e)/3;return oS(void 0)(r)}(t,e);case"year":return function(t,e){let i=sz(t),r=sz(e),s=oM(i,r),n=Math.abs(function(t,e){let i=sz(t),r=sz(e);return i.getFullYear()-r.getFullYear()}(i,r));i.setFullYear(1584),r.setFullYear(1584);let o=oM(i,r)===-s,a=s*(n-+o);return 0===a?0:a}(t,e);default:return 0}},startOf:function(t,e,i){switch(e){case"second":return function(t){let e=sz(t);return e.setMilliseconds(0),e}(t);case"minute":return function(t){let e=sz(t);return e.setSeconds(0,0),e}(t);case"hour":return function(t){let e=sz(t);return e.setMinutes(0,0,0),e}(t);case"day":return on(t);case"week":return nf(t);case"isoWeek":return nf(t,{weekStartsOn:+i});case"month":return function(t){let e=sz(t);return e.setDate(1),e.setHours(0,0,0,0),e}(t);case"quarter":return function(t){let e=sz(t),i=e.getMonth();return e.setMonth(i-i%3,1),e.setHours(0,0,0,0),e}(t);case"year":return oa(t);default:return t}},endOf:function(t,e){switch(e){case"second":return function(t){let e=sz(t);return e.setMilliseconds(999),e}(t);case"minute":return function(t){let e=sz(t);return e.setSeconds(59,999),e}(t);case"hour":return function(t){let e=sz(t);return e.setMinutes(59,59,999),e}(t);case"day":return oI(t);case"week":return function(t,e){let i=(void 0)??void 0??s$.weekStartsOn??s$.locale?.options?.weekStartsOn??0,r=sz(t),s=r.getDay();return r.setDate(r.getDate()+((s<i?-7:0)+6-(s-i))),r.setHours(23,59,59,999),r}(t);case"month":return oT(t);case"quarter":return function(t){let e=sz(t),i=e.getMonth();return e.setMonth(i-i%3+3,0),e.setHours(23,59,59,999),e}(t);case"year":return function(t){let e=sz(t),i=e.getFullYear();return e.setFullYear(i+1,0,0),e.setHours(23,59,59,999),e}(t);default:return t}}}),rN.register(sg,s_,rY,rK,{id:"title",_element:st,start(t,e,i){!function(t,e){let i=new st({ctx:t.ctx,options:e,chart:t});iG.configure(t,i,e),iG.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){let e=t.titleBlock;iG.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){let r=t.titleBlock;iG.configure(t,r,i),r.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},{id:"tooltip",_element:su,positioners:se,afterInit(t,e,i){i&&(t.tooltip=new su({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){let e=t.tooltip;if(e&&e._willRender()){let i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){let i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:sh},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},{id:"legend",_element:r9,start(t,e,i){let r=t.legend=new r9({ctx:t.ctx,options:i,chart:t});iG.configure(t,r,i),iG.addBox(t,r)},stop(t){iG.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){let r=t.legend;iG.configure(t,r,i),r.options=i},afterUpdate(t){let e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){let r=e.datasetIndex,s=i.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){let e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:r,textAlign:s,color:n,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{let l=t.controller.getStyle(i?0:void 0),h=eb(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:n,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}},sN);let oC=({unitId:t,data:e,unitName:i})=>{let r=[...e].sort((t,e)=>new Date(t.ts).getTime()-new Date(e.ts).getTime()),s={labels:r.map(t=>new Date(t.ts)),datasets:[{label:"Temperature (\xb0C)",data:r.map(t=>t.temperature),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.5)",yAxisID:"y",tension:.3,pointRadius:2},{label:"Humidity (%)",data:r.map(t=>t.humidity),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",yAxisID:"y1",tension:.3,pointRadius:2}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index"},plugins:{title:{display:!0,text:`${i} - 24 Hour History`},tooltip:{mode:"index",intersect:!1}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm"}},title:{display:!0,text:"Time"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Temp (\xb0C)"}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},title:{display:!0,text:"Humidity (%)"}}}};return n.jsx("div",{className:"h-[400px] w-full bg-white p-4 rounded-xl shadow-sm border border-slate-100",children:n.jsx(sH,{options:o,data:s})})},oP=({alerts:t})=>{let e=Array.isArray(t)?t:[];return(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden h-[400px] flex flex-col",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[n.jsx("h2",{className:"font-bold text-slate-700",children:"System Alerts"}),(0,n.jsxs)("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded-full",children:[e.filter(t=>!t.resolved).length," Active"]})]}),n.jsx("div",{className:"overflow-y-auto flex-1 p-0",children:0===e.length?n.jsx("div",{className:"p-8 text-center text-slate-400",children:"No active alerts. System healthy."}):(0,n.jsxs)("table",{className:"w-full text-sm text-left",children:[n.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase text-xs sticky top-0",children:(0,n.jsxs)("tr",{children:[n.jsx("th",{className:"px-4 py-3",children:"Time"}),n.jsx("th",{className:"px-4 py-3",children:"Unit"}),n.jsx("th",{className:"px-4 py-3",children:"Severity"}),n.jsx("th",{className:"px-4 py-3",children:"Message"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map((t,e)=>(0,n.jsxs)("tr",{className:"hover:bg-slate-50",children:[n.jsx("td",{className:"px-4 py-3 text-slate-500 whitespace-nowrap",children:new Date(t.ts).toLocaleTimeString()}),(0,n.jsxs)("td",{className:"px-4 py-3 font-medium",children:["Unit ",t.unit_id]}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold uppercase
                      ${"critical"===t.severity?"bg-red-100 text-red-700":"warning"===t.severity?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}
                    `,children:t.severity})}),n.jsx("td",{className:"px-4 py-3 text-slate-700",children:t.message})]},e))})]})})]})};function oR(){let[t,e]=(0,o.useState)([]),[i,r]=(0,o.useState)(1),[s,l]=(0,o.useState)({}),[h,c]=(0,o.useState)([]),[u,d]=(0,o.useState)([]),[f,p]=(0,o.useState)("realtime"),[g,m]=(0,o.useState)(!1);(0,o.useCallback)(async t=>{m(!0);try{let e=await fetch(`/api/readings/history?unit_id=${t}&hours=24`),i=await e.json();c(i)}catch(t){console.error(t)}finally{m(!1)}},[]);let b=(t,e)=>{if(void 0===e)return"OFFLINE";let i=u.find(e=>e.unit_id===t&&!e.resolved);return i?.severity==="critical"?"CRITICAL":i?.severity==="warning"?"WARNING":"OK"},_=t.find(t=>t.unit_id===i);return(0,n.jsxs)("main",{className:"min-h-screen p-8 max-w-7xl mx-auto",children:[(0,n.jsxs)("header",{className:"mb-8 flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Cold Storage Monitor"}),n.jsx("p",{className:"text-slate-500",children:"Real-time Environmental Tracking System"})]}),n.jsx("div",{className:"flex gap-4",children:(0,n.jsxs)("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[n.jsx("button",{onClick:()=>p("realtime"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${"realtime"===f?"bg-white shadow text-slate-800":"text-slate-500"}`,children:"Real-time"}),n.jsx("button",{onClick:()=>p("historical"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${"historical"===f?"bg-white shadow text-slate-800":"text-slate-500"}`,children:"Historical"})]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:t.map(t=>{let e=s[t.unit_id];return n.jsx(a,{unitId:t.unit_id,name:t.name,type:t.product_type,temperature:e?.temperature??null,humidity:e?.humidity??null,lastUpdated:e?.ts??null,status:b(t.unit_id,e?.temperature),isSelected:i===t.unit_id,onClick:()=>r(t.unit_id)},t.unit_id)})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[_&&n.jsx(oC,{unitId:i,unitName:_.name,data:"realtime"===f?[...h,s[i]].filter(Boolean):h}),(0,n.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 text-sm text-blue-800",children:[n.jsx("strong",{children:"Simulation Info:"})," To see live data, run the Python scripts provided in the repository.",(0,n.jsxs)("ul",{className:"list-disc ml-5 mt-2",children:[(0,n.jsxs)("li",{children:[n.jsx("code",{children:"python scripts/mqtt_publisher.py"})," (Updates MQTT/Live Cards)"]}),(0,n.jsxs)("li",{children:[n.jsx("code",{children:"python scripts/http_logger.py"})," (Updates Database/History)"]})]})]})]}),n.jsx("div",{className:"lg:col-span-1",children:n.jsx(oP,{alerts:u})})]})]})}i(3042)},1172:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(2464);class AbortSignal extends r.EventTarget{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let t=s.get(this);if("boolean"!=typeof t)throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return t}}r.defineEventAttribute(AbortSignal.prototype,"abort");let s=new WeakMap;Object.defineProperties(AbortSignal.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortSignal.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class n{constructor(){o.set(this,function(){let t=Object.create(AbortSignal.prototype);return r.EventTarget.call(t),s.set(t,!1),t}())}get signal(){return a(this)}abort(){var t;t=a(this),!1===s.get(t)&&(s.set(t,!0),t.dispatchEvent({type:"abort"}))}}let o=new WeakMap;function a(t){let e=o.get(t);if(null==e)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===t?"null":typeof t}`);return e}Object.defineProperties(n.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(n.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),e.AbortController=n,e.AbortSignal=AbortSignal,e.default=n,t.exports=n,t.exports.AbortController=t.exports.default=n,t.exports.AbortSignal=AbortSignal},4631:(t,e,i)=>{"use strict";let{Buffer:r}=i(8893),s=Symbol.for("BufferList");function n(t){if(!(this instanceof n))return new n(t);n._init.call(this,t)}n._init=function(t){Object.defineProperty(this,s,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},n.prototype._new=function(t){return new n(t)},n.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let i=0;i<this._bufs.length;i++){let r=e+this._bufs[i].length;if(t<r||i===this._bufs.length-1)return[i,t-e];e=r}},n.prototype._reverseOffset=function(t){let e=t[0],i=t[1];for(let t=0;t<e;t++)i+=this._bufs[t].length;return i},n.prototype.getBuffers=function(){return this._bufs},n.prototype.get=function(t){if(t>this.length||t<0)return;let e=this._offset(t);return this._bufs[e[0]][e[1]]},n.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},n.prototype.copy=function(t,e,i,s){if(("number"!=typeof i||i<0)&&(i=0),("number"!=typeof s||s>this.length)&&(s=this.length),i>=this.length||s<=0)return t||r.alloc(0);let n=!!t,o=this._offset(i),a=s-i,l=a,h=n&&e||0,c=o[1];if(0===i&&s===this.length){if(!n)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,h),h+=this._bufs[e].length;return t}if(l<=this._bufs[o[0]].length-c)return n?this._bufs[o[0]].copy(t,e,c,c+l):this._bufs[o[0]].slice(c,c+l);n||(t=r.allocUnsafe(a));for(let e=o[0];e<this._bufs.length;e++){let i=this._bufs[e].length-c;if(l>i)this._bufs[e].copy(t,h,c),h+=i;else{this._bufs[e].copy(t,h,c,c+l),h+=i;break}l-=i,c&&(c=0)}return t.length>h?t.slice(0,h):t},n.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!=typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();let i=this._offset(t),r=this._offset(e),s=this._bufs.slice(i[0],r[0]+1);return 0===r[1]?s.pop():s[s.length-1]=s[s.length-1].slice(0,r[1]),0!==i[1]&&(s[0]=s[0].slice(i[1])),this._new(s)},n.prototype.toString=function(t,e,i){return this.slice(e,i).toString(t)},n.prototype.consume=function(t){if(Number.isNaN(t=Math.trunc(t))||t<=0)return this;for(;this._bufs.length;)if(t>=this._bufs[0].length)t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}return this},n.prototype.duplicate=function(){let t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},n.prototype.append=function(t){return this._attach(t,n.prototype._appendBuffer)},n.prototype.prepend=function(t){return this._attach(t,n.prototype._prependBuffer,!0)},n.prototype._attach=function(t,e,i){if(null==t)return this;if(t.buffer)e.call(this,r.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t)){let[r,s]=i?[t.length-1,-1]:[0,1];for(let n=r;n>=0&&n<t.length;n+=s)this._attach(t[n],e,i)}else if(this._isBufferList(t)){let[r,s]=i?[t._bufs.length-1,-1]:[0,1];for(let n=r;n>=0&&n<t._bufs.length;n+=s)this._attach(t._bufs[n],e,i)}else"number"==typeof t&&(t=t.toString()),e.call(this,r.from(t));return this},n.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},n.prototype._prependBuffer=function(t){this._bufs.unshift(t),this.length+=t.length},n.prototype.indexOf=function(t,e,i){if(void 0===i&&"string"==typeof e&&(i=e,e=void 0),"function"==typeof t||Array.isArray(t))throw TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof t?t=r.from([t]):"string"==typeof t?t=r.from(t,i):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=r.from(t.buffer,t.byteOffset,t.byteLength):r.isBuffer(t)||(t=r.from(t)),isNaN(e=Number(e||0))&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;let s=this._offset(e),n=s[0],o=s[1];for(;n<this._bufs.length;n++){let e=this._bufs[n];for(;o<e.length;)if(e.length-o>=t.length){let i=e.indexOf(t,o);if(-1!==i)return this._reverseOffset([n,i]);o=e.length-t.length+1}else{let e=this._reverseOffset([n,o]);if(this._match(e,t))return e;o++}o=0}return -1},n.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let i=0;i<e.length;i++)if(this.get(t+i)!==e[i])return!1;return!0},function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)!function(e){null===t[e]?n.prototype[e]=function(t,i){return this.slice(t,t+i)[e](0,i)}:n.prototype[e]=function(i=0){return this.slice(i,i+t[e])[e](0)}}(e)}(),n.prototype._isBufferList=function(t){return t instanceof n||n.isBufferList(t)},n.isBufferList=function(t){return null!=t&&t[s]},t.exports=n},2545:(t,e,i)=>{"use strict";let r=i(1650).Duplex,s=i(1051),n=i(4631);function o(t){if(!(this instanceof o))return new o(t);if("function"==typeof t){this._callback=t;let e=(function(t){this._callback&&(this._callback(t),this._callback=null)}).bind(this);this.on("pipe",function(t){t.on("error",e)}),this.on("unpipe",function(t){t.removeListener("error",e)}),t=null}n._init.call(this,t),r.call(this)}s(o,r),Object.assign(o.prototype,n.prototype),o.prototype._new=function(t){return new o(t)},o.prototype._write=function(t,e,i){this._appendBuffer(t),"function"==typeof i&&i()},o.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},o.prototype.end=function(t){r.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(t,e){this._bufs.length=0,this.length=0,e(t)},o.prototype._isBufferList=function(t){return t instanceof o||t instanceof n||o.isBufferList(t)},o.isBufferList=n.isBufferList,t.exports=o,t.exports.BufferListStream=o,t.exports.BufferList=n},9662:(t,e,i)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let i="color: "+this.color;e.splice(1,0,i,"color: inherit");let r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(s=r))}),e.splice(s,0,i)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){let t;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=i(7507)(e);let{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},7507:(t,e,i)=>{t.exports=function(t){function e(t){let i,s,n;let o=null;function a(...t){if(!a.enabled)return;let r=Number(new Date),s=r-(i||r);a.diff=s,a.prev=i,a.curr=r,i=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let n=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(i,r)=>{if("%%"===i)return"%";n++;let s=e.formatters[r];if("function"==typeof s){let e=t[n];i=s.call(a,e),t.splice(n,1),n--}return i}),e.formatArgs.call(a,t),(a.log||e.log).apply(a,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==e.namespaces&&(s=e.namespaces,n=e.enabled(t)),n),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,i){let r=e(this.namespace+(void 0===i?":":i)+t);return r.log=this.log,r}function s(t,e){let i=0,r=0,s=-1,n=0;for(;i<t.length;)if(r<e.length&&(e[r]===t[i]||"*"===e[r]))"*"===e[r]?(s=r,n=i):i++,r++;else{if(-1===s)return!1;r=s+1,i=++n}for(;r<e.length&&"*"===e[r];)r++;return r===e.length}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){let t=[...e.names,...e.skips.map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){for(let i of(e.save(t),e.namespaces=t,e.names=[],e.skips=[],("string"==typeof t?t:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===i[0]?e.skips.push(i.slice(1)):e.names.push(i)},e.enabled=function(t){for(let i of e.skips)if(s(t,i))return!1;for(let i of e.names)if(s(t,i))return!0;return!1},e.humanize=i(7914),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(i=>{e[i]=t[i]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let i=0;for(let e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e)|0;return e.colors[Math.abs(i)%e.colors.length]},e.enable(e.load()),e}},8589:(t,e,i)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?t.exports=i(9662):t.exports=i(6027)},6027:(t,e,i)=>{let r=i(4175),s=i(1764);e.init=function(t){t.inspectOpts={};let i=Object.keys(e.inspectOpts);for(let r=0;r<i.length;r++)t.inspectOpts[i[r]]=e.inspectOpts[i[r]]},e.log=function(...t){return process.stderr.write(s.formatWithOptions(e.inspectOpts,...t)+"\n")},e.formatArgs=function(i){let{namespace:r,useColors:s}=this;if(s){let e=this.color,s="\x1b[3"+(e<8?e:"8;5;"+e),n=`  ${s};1m${r} \u001B[0m`;i[0]=n+i[0].split("\n").join("\n"+n),i.push(s+"m+"+t.exports.humanize(this.diff)+"\x1b[0m")}else i[0]=(e.inspectOpts.hideDate?"":new Date().toISOString()+" ")+r+" "+i[0]},e.save=function(t){t?process.env.DEBUG=t:delete process.env.DEBUG},e.load=function(){return process.env.DEBUG},e.useColors=function(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(process.stderr.fd)},e.destroy=s.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{let t=i(7529);t&&(t.stderr||t).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}e.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let i=e.substring(6).toLowerCase().replace(/_([a-z])/g,(t,e)=>e.toUpperCase()),r=process.env[e];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),t[i]=r,t},{}),t.exports=i(7507)(e);let{formatters:n}=t.exports;n.o=function(t){return this.inspectOpts.colors=this.useColors,s.inspect(t,this.inspectOpts).split("\n").map(t=>t.trim()).join(" ")},n.O=function(t){return this.inspectOpts.colors=this.useColors,s.inspect(t,this.inspectOpts)}},2464:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let i=new WeakMap,r=new WeakMap;function s(t){let e=i.get(t);return console.assert(null!=e,"'this' is expected an Event object, but got",t),e}function n(t){if(null!=t.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,"function"==typeof t.event.preventDefault&&t.event.preventDefault())}function o(t,e){i.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(e);for(let t=0;t<r.length;++t){let e=r[t];e in this||Object.defineProperty(this,e,a(e))}}function a(t){return{get(){return s(this).event[t]},set(e){s(this).event[t]=e},configurable:!0,enumerable:!0}}function l(t,e){s(t).passiveListener=e}o.prototype={get type(){return s(this).event.type},get target(){return s(this).eventTarget},get currentTarget(){return s(this).currentTarget},composedPath(){let t=s(this).currentTarget;return null==t?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return s(this).eventPhase},stopPropagation(){let t=s(this);t.stopped=!0,"function"==typeof t.event.stopPropagation&&t.event.stopPropagation()},stopImmediatePropagation(){let t=s(this);t.stopped=!0,t.immediateStopped=!0,"function"==typeof t.event.stopImmediatePropagation&&t.event.stopImmediatePropagation()},get bubbles(){return!!s(this).event.bubbles},get cancelable(){return!!s(this).event.cancelable},preventDefault(){n(s(this))},get defaultPrevented(){return s(this).canceled},get composed(){return!!s(this).event.composed},get timeStamp(){return s(this).timeStamp},get srcElement(){return s(this).eventTarget},get cancelBubble(){return s(this).stopped},set cancelBubble(value){if(!value)return;let t=s(this);t.stopped=!0,"boolean"==typeof t.event.cancelBubble&&(t.event.cancelBubble=!0)},get returnValue(){return!s(this).canceled},set returnValue(value){value||n(s(this))},initEvent(){}},Object.defineProperty(o.prototype,"constructor",{value:o,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(o.prototype,window.Event.prototype),r.set(window.Event.prototype,o));let h=new WeakMap;function c(t){return null!==t&&"object"==typeof t}function u(t){let e=h.get(t);if(null==e)throw TypeError("'this' is expected an EventTarget object, but got another value.");return e}function d(t,e){Object.defineProperty(t,`on${e}`,{get(){let t=u(this).get(e);for(;null!=t;){if(3===t.listenerType)return t.listener;t=t.next}return null},set(t){"function"==typeof t||c(t)||(t=null);let i=u(this),r=null,s=i.get(e);for(;null!=s;)3===s.listenerType?null!==r?r.next=s.next:null!==s.next?i.set(e,s.next):i.delete(e):r=s,s=s.next;if(null!==t){let s={listener:t,listenerType:3,passive:!1,once:!1,next:null};null===r?i.set(e,s):r.next=s}},configurable:!0,enumerable:!0})}function f(t){function e(){p.call(this)}e.prototype=Object.create(p.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let i=0;i<t.length;++i)d(e.prototype,t[i]);return e}function p(){if(this instanceof p){h.set(this,new Map);return}if(1==arguments.length&&Array.isArray(arguments[0]))return f(arguments[0]);if(arguments.length>0){let t=Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return f(t)}throw TypeError("Cannot call a class as a function")}p.prototype={addEventListener(t,e,i){if(null==e)return;if("function"!=typeof e&&!c(e))throw TypeError("'listener' should be a function or an object.");let r=u(this),s=c(i),n=(s?i.capture:i)?1:2,o={listener:e,listenerType:n,passive:s&&!!i.passive,once:s&&!!i.once,next:null},a=r.get(t);if(void 0===a){r.set(t,o);return}let l=null;for(;null!=a;){if(a.listener===e&&a.listenerType===n)return;l=a,a=a.next}l.next=o},removeEventListener(t,e,i){if(null==e)return;let r=u(this),s=(c(i)?i.capture:i)?1:2,n=null,o=r.get(t);for(;null!=o;){if(o.listener===e&&o.listenerType===s){null!==n?n.next=o.next:null!==o.next?r.set(t,o.next):r.delete(t);return}n=o,o=o.next}},dispatchEvent(t){if(null==t||"string"!=typeof t.type)throw TypeError('"event.type" should be a string.');let e=u(this),i=t.type,n=e.get(i);if(null==n)return!0;let h=new(function t(e){if(null==e||e===Object.prototype)return o;let i=r.get(e);return null==i&&(i=function(t,e){let i=Object.keys(e);if(0===i.length)return t;function r(e,i){t.call(this,e,i)}r.prototype=Object.create(t.prototype,{constructor:{value:r,configurable:!0,writable:!0}});for(let n=0;n<i.length;++n){let o=i[n];if(!(o in t.prototype)){let t="function"==typeof Object.getOwnPropertyDescriptor(e,o).value;Object.defineProperty(r.prototype,o,t?function(t){return{value(){let e=s(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}(o):a(o))}}return r}(t(Object.getPrototypeOf(e)),e),r.set(e,i)),i}(Object.getPrototypeOf(t)))(this,t),c=null;for(;null!=n;){if(n.once?null!==c?c.next=n.next:null!==n.next?e.set(i,n.next):e.delete(i):c=n,l(h,n.passive?n.listener:null),"function"==typeof n.listener)try{n.listener.call(this,h)}catch(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}else 3!==n.listenerType&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(h);if(s(h).immediateStopped)break;n=n.next}return l(h,null),s(h).eventPhase=0,s(h).currentTarget=null,!h.defaultPrevented}},Object.defineProperty(p.prototype,"constructor",{value:p,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(p.prototype,window.EventTarget.prototype),e.defineEventAttribute=d,e.EventTarget=p,e.default=p,t.exports=p,t.exports.EventTarget=t.exports.default=p,t.exports.defineEventAttribute=d},1051:(t,e,i)=>{try{var r=i(1764);if("function"!=typeof r.inherits)throw"";t.exports=r.inherits}catch(e){t.exports=i(4225)}},4225:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},256:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AddressError=void 0;class i extends Error{constructor(t,e){super(t),this.name="AddressError",this.parseMessage=e}}e.AddressError=i},8414:(t,e)=>{"use strict";function i(t){return t.toString(16).padStart(2,"0")}Object.defineProperty(e,"__esModule",{value:!0}),e.isInSubnet=function(t){return!(this.subnetMask<t.subnetMask)&&this.mask(t.subnetMask)===t.mask()},e.isCorrect=function(t){return function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===t&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}},e.numberToPaddedHex=i,e.stringToPaddedHex=function(t){return i(parseInt(t,10))},e.testBit=function(t,e){let{length:i}=t;if(e>i)return!1;let r=i-e;return"1"===t.substring(r,r+1)}},29:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.v6=e.AddressError=e.Address6=e.Address4=void 0;var o=i(7725);Object.defineProperty(e,"Address4",{enumerable:!0,get:function(){return o.Address4}});var a=i(9647);Object.defineProperty(e,"Address6",{enumerable:!0,get:function(){return a.Address6}});var l=i(256);Object.defineProperty(e,"AddressError",{enumerable:!0,get:function(){return l.AddressError}});let h=n(i(3324));e.v6={helpers:h}},7725:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Address4=void 0;let o=n(i(8414)),a=n(i(6003)),l=i(256);class h{constructor(t){this.groups=a.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=o.isCorrect(a.BITS),this.isInSubnet=o.isInSubnet,this.address=t;let e=a.RE_SUBNET_STRING.exec(t);if(e){if(this.parsedSubnet=e[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>a.BITS)throw new l.AddressError("Invalid subnet mask.");t=t.replace(a.RE_SUBNET_STRING,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}static isValid(t){try{return new h(t),!0}catch(t){return!1}}parse(t){let e=t.split(".");if(!t.match(a.RE_ADDRESS))throw new l.AddressError("Invalid IPv4 address.");return e}correctForm(){return this.parsedAddress.map(t=>parseInt(t,10)).join(".")}static fromHex(t){let e;let i=t.replace(/:/g,"").padStart(8,"0"),r=[];for(e=0;e<8;e+=2){let t=i.slice(e,e+2);r.push(parseInt(t,16))}return new h(r.join("."))}static fromInteger(t){return h.fromHex(t.toString(16))}static fromArpa(t){return new h(t.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join("."))}toHex(){return this.parsedAddress.map(t=>o.stringToPaddedHex(t)).join(":")}toArray(){return this.parsedAddress.map(t=>parseInt(t,10))}toGroup6(){let t;let e=[];for(t=0;t<a.GROUPS;t+=2)e.push(`${o.stringToPaddedHex(this.parsedAddress[t])}${o.stringToPaddedHex(this.parsedAddress[t+1])}`);return e.join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(t=>o.stringToPaddedHex(t)).join("")}`)}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(a.BITS-this.subnetMask)}`)}startAddress(){return h.fromBigInt(this._startAddress())}startAddressExclusive(){let t=BigInt("1");return h.fromBigInt(this._startAddress()+t)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(a.BITS-this.subnetMask)}`)}endAddress(){return h.fromBigInt(this._endAddress())}endAddressExclusive(){let t=BigInt("1");return h.fromBigInt(this._endAddress()-t)}static fromBigInt(t){return h.fromHex(t.toString(16))}static fromByteArray(t){if(4!==t.length)throw new l.AddressError("IPv4 addresses require exactly 4 bytes");for(let e=0;e<t.length;e++)if(!Number.isInteger(t[e])||t[e]<0||t[e]>255)throw new l.AddressError("All bytes must be integers between 0 and 255");return this.fromUnsignedByteArray(t)}static fromUnsignedByteArray(t){if(4!==t.length)throw new l.AddressError("IPv4 addresses require exactly 4 bytes");return new h(t.join("."))}mask(t){return void 0===t&&(t=this.subnetMask),this.getBitsBase2(0,t)}getBitsBase2(t,e){return this.binaryZeroPad().slice(t,e)}reverseForm(t){t||(t={});let e=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?e:`${e}.in-addr.arpa.`}isMulticast(){return this.isInSubnet(new h("224.0.0.0/4"))}binaryZeroPad(){return this.bigInt().toString(2).padStart(a.BITS,"0")}groupForV6(){let t=this.parsedAddress;return this.address.replace(a.RE_ADDRESS,`<span class="hover-group group-v4 group-6">${t.slice(0,2).join(".")}</span>.<span class="hover-group group-v4 group-7">${t.slice(2,4).join(".")}</span>`)}}e.Address4=h},9647:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Address6=void 0;let o=n(i(8414)),a=n(i(6003)),l=n(i(265)),h=n(i(3324)),c=i(7725),u=i(5185),d=i(256),f=i(8414);function p(t){if(!t)throw Error("Assertion failed.")}function g(t){return t=(t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function m(t){return parseInt(t,16).toString(16).padStart(4,"0")}function b(t){return 255&t}class _{constructor(t,e){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=o.isInSubnet,this.isCorrect=o.isCorrect(l.BITS),void 0===e?this.groups=l.GROUPS:this.groups=e,this.address=t;let i=l.RE_SUBNET_STRING.exec(t);if(i){if(this.parsedSubnet=i[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>l.BITS)throw new d.AddressError("Invalid subnet mask.");t=t.replace(l.RE_SUBNET_STRING,"")}else if(/\//.test(t))throw new d.AddressError("Invalid subnet mask.");let r=l.RE_ZONE_STRING.exec(t);r&&(this.zone=r[0],t=t.replace(l.RE_ZONE_STRING,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(t){try{return new _(t),!0}catch(t){return!1}}static fromBigInt(t){let e;let i=t.toString(16).padStart(32,"0"),r=[];for(e=0;e<l.GROUPS;e++)r.push(i.slice(4*e,(e+1)*4));return new _(r.join(":"))}static fromURL(t){let e,i;let r=null;if(-1!==t.indexOf("[")&&-1!==t.indexOf("]:")){if(null===(i=l.RE_URL_WITH_PORT.exec(t)))return{error:"failed to parse address with port",address:null,port:null};e=i[1],r=i[2]}else if(-1!==t.indexOf("/")){if(t=t.replace(/^[a-z0-9]+:\/\//,""),null===(i=l.RE_URL.exec(t)))return{error:"failed to parse address from URL",address:null,port:null};e=i[1]}else e=t;return r?((r=parseInt(r,10))<0||r>65536)&&(r=null):r=null,{address:new _(e),port:r}}static fromAddress4(t){let e=new c.Address4(t),i=l.BITS-(a.BITS-e.subnetMask);return new _(`::ffff:${e.correctForm()}/${i}`)}static fromArpa(t){let e=t.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==e.length)throw new d.AddressError("Invalid 'ip6.arpa' form.");let i=e.split(".").reverse();for(let t=7;t>0;t--){let e=4*t;i.splice(e,0,":")}return new _(e=i.join(""))}microsoftTranscription(){return`${this.correctForm().replace(/:/g,"-")}.ipv6-literal.net`}mask(t=this.subnetMask){return this.getBitsBase2(0,t)}possibleSubnets(t=128){let e=l.BITS-this.subnetMask-Math.abs(t-l.BITS);return e<0?"0":function(t){let e=/(\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1,$2");return t}((BigInt("2")**BigInt(e)).toString(10))}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(l.BITS-this.subnetMask)}`)}startAddress(){return _.fromBigInt(this._startAddress())}startAddressExclusive(){let t=BigInt("1");return _.fromBigInt(this._startAddress()+t)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(l.BITS-this.subnetMask)}`)}endAddress(){return _.fromBigInt(this._endAddress())}endAddressExclusive(){let t=BigInt("1");return _.fromBigInt(this._endAddress()-t)}getScope(){let t=l.SCOPES[parseInt(this.getBits(12,16).toString(10),10)];return"Global unicast"===this.getType()&&"Link local"!==t&&(t="Global"),t||"Unknown"}getType(){for(let t of Object.keys(l.TYPES))if(this.isInSubnet(new _(t)))return l.TYPES[t];return"Global unicast"}getBits(t,e){return BigInt(`0b${this.getBitsBase2(t,e)}`)}getBitsBase2(t,e){return this.binaryZeroPad().slice(t,e)}getBitsBase16(t,e){let i=e-t;if(i%4!=0)throw Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,e).toString(16).padStart(i/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,l.BITS)}reverseForm(t){t||(t={});let e=Math.floor(this.subnetMask/4),i=this.canonicalForm().replace(/:/g,"").split("").slice(0,e).reverse().join(".");return e>0?t.omitSuffix?i:`${i}.ip6.arpa.`:t.omitSuffix?"":"ip6.arpa."}correctForm(){let t;let e=[],i=0,r=[];for(t=0;t<this.parsedAddress.length;t++){let e=parseInt(this.parsedAddress[t],16);0===e&&i++,0!==e&&i>0&&(i>1&&r.push([t-i,t-1]),i=0)}i>1&&r.push([this.parsedAddress.length-i,this.parsedAddress.length-1]);let s=r.map(t=>t[1]-t[0]+1);if(r.length>0){let t=s.indexOf(Math.max(...s));e=function(t,e){let i;let r=[],s=[];for(i=0;i<t.length;i++)i<e[0]?r.push(t[i]):i>e[1]&&s.push(t[i]);return r.concat(["compact"]).concat(s)}(this.parsedAddress,r[t])}else e=this.parsedAddress;for(t=0;t<e.length;t++)"compact"!==e[t]&&(e[t]=parseInt(e[t],16).toString(16));let n=e.join(":");return(n=(n=n.replace(/^compact$/,"::")).replace(/(^compact)|(compact$)/,":")).replace(/compact/,"")}binaryZeroPad(){return this.bigInt().toString(2).padStart(l.BITS,"0")}parse4in6(t){let e=t.split(":"),i=e.slice(-1)[0].match(a.RE_ADDRESS);if(i){this.parsedAddress4=i[0],this.address4=new c.Address4(this.parsedAddress4);for(let e=0;e<this.address4.groups;e++)if(/^0[0-9]+/.test(this.address4.parsedAddress[e]))throw new d.AddressError("IPv4 addresses can't have leading zeroes.",t.replace(a.RE_ADDRESS,this.address4.parsedAddress.map(g).join(".")));this.v4=!0,e[e.length-1]=this.address4.toGroup6(),t=e.join(":")}return t}parse(t){let e=(t=this.parse4in6(t)).match(l.RE_BAD_CHARACTERS);if(e)throw new d.AddressError(`Bad character${e.length>1?"s":""} detected in address: ${e.join("")}`,t.replace(l.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let i=t.match(l.RE_BAD_ADDRESS);if(i)throw new d.AddressError(`Address failed regex: ${i.join("")}`,t.replace(l.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let r=[],s=t.split("::");if(2===s.length){let t=s[0].split(":"),e=s[1].split(":");1===t.length&&""===t[0]&&(t=[]),1===e.length&&""===e[0]&&(e=[]);let i=this.groups-(t.length+e.length);if(!i)throw new d.AddressError("Error parsing groups");this.elidedGroups=i,this.elisionBegin=t.length,this.elisionEnd=t.length+this.elidedGroups,r=r.concat(t);for(let t=0;t<i;t++)r.push("0");r=r.concat(e)}else if(1===s.length)r=t.split(":"),this.elidedGroups=0;else throw new d.AddressError("Too many :: groups found");if((r=r.map(t=>parseInt(t,16).toString(16))).length!==this.groups)throw new d.AddressError("Incorrect number of groups found");return r}canonicalForm(){return this.parsedAddress.map(m).join(":")}decimal(){return this.parsedAddress.map(t=>parseInt(t,16).toString(10).padStart(5,"0")).join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(m).join("")}`)}to4(){let t=this.binaryZeroPad().split("");return c.Address4.fromHex(BigInt(`0b${t.slice(96,128).join("")}`).toString(16))}to4in6(){let t=this.to4(),e=new _(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),i="";return/:$/.test(e)||(i=":"),e+i+t.address}inspectTeredo(){let t=this.getBitsBase16(0,32),e=(this.getBits(80,96)^BigInt("0xffff")).toString(),i=c.Address4.fromHex(this.getBitsBase16(32,64)),r=this.getBits(96,128),s=c.Address4.fromHex((r^BigInt("0xffffffff")).toString(16)),n=this.getBitsBase2(64,80),o=(0,f.testBit)(n,15),a=(0,f.testBit)(n,14),l=(0,f.testBit)(n,8),h=(0,f.testBit)(n,9),u=BigInt(`0b${n.slice(2,6)+n.slice(8,16)}`).toString(10);return{prefix:`${t.slice(0,4)}:${t.slice(4,8)}`,server4:i.address,client4:s.address,flags:n,coneNat:o,microsoft:{reserved:a,universalLocal:h,groupIndividual:l,nonce:u},udpPort:e}}inspect6to4(){let t=this.getBitsBase16(0,16),e=c.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:t.slice(0,4),gateway:e.address}}to6to4(){return this.is4()?new _(["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":")):null}toByteArray(){let t=this.bigInt().toString(16),e="0".repeat(t.length%2),i=`${e}${t}`,r=[];for(let t=0,e=i.length;t<e;t+=2)r.push(parseInt(i.substring(t,t+2),16));return r}toUnsignedByteArray(){return this.toByteArray().map(b)}static fromByteArray(t){return this.fromUnsignedByteArray(t.map(b))}static fromUnsignedByteArray(t){let e=BigInt("256"),i=BigInt("0"),r=BigInt("1");for(let s=t.length-1;s>=0;s--)i+=r*BigInt(t[s].toString(10)),r*=e;return _.fromBigInt(i)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)}isMulticast(){return"Multicast"===this.getType()}is4(){return this.v4}isTeredo(){return this.isInSubnet(new _("2001::/32"))}is6to4(){return this.isInSubnet(new _("2002::/16"))}isLoopback(){return"Loopback"===this.getType()}href(t){return t=void 0===t?"":`:${t}`,`http://[${this.correctForm()}]${t}/`}link(t){t||(t={}),void 0===t.className&&(t.className=""),void 0===t.prefix&&(t.prefix="/#address="),void 0===t.v4&&(t.v4=!1);let e=this.correctForm;t.v4&&(e=this.to4in6);let i=e.call(this);return t.className?`<a href="${t.prefix}${i}" class="${t.className}">${i}</a>`:`<a href="${t.prefix}${i}">${i}</a>`}group(){if(0===this.elidedGroups)return h.simpleGroup(this.address).join(":");p("number"==typeof this.elidedGroups),p("number"==typeof this.elisionBegin);let t=[],[e,i]=this.address.split("::");e.length?t.push(...h.simpleGroup(e)):t.push("");let r=["hover-group"];for(let t=this.elisionBegin;t<this.elisionBegin+this.elidedGroups;t++)r.push(`group-${t}`);return t.push(`<span class="${r.join(" ")}"></span>`),i.length?t.push(...h.simpleGroup(i,this.elisionEnd)):t.push(""),this.is4()&&(p(this.address4 instanceof c.Address4),t.pop(),t.push(this.address4.groupForV6())),t.join(":")}regularExpressionString(t=!1){let e=[],i=new _(this.correctForm());if(0===i.elidedGroups)e.push((0,u.simpleRegularExpression)(i.parsedAddress));else if(i.elidedGroups===l.GROUPS)e.push((0,u.possibleElisions)(l.GROUPS));else{let t=i.address.split("::");t[0].length&&e.push((0,u.simpleRegularExpression)(t[0].split(":"))),p("number"==typeof i.elidedGroups),e.push((0,u.possibleElisions)(i.elidedGroups,0!==t[0].length,0!==t[1].length)),t[1].length&&e.push((0,u.simpleRegularExpression)(t[1].split(":"))),e=[e.join(":")]}return t||(e=["(?=^|",u.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...e,")(?=[^\\w\\:]|",u.ADDRESS_BOUNDARY,"|$)"]),e.join("")}regularExpression(t=!1){return RegExp(this.regularExpressionString(t),"i")}}e.Address6=_},6003:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RE_SUBNET_STRING=e.RE_ADDRESS=e.GROUPS=e.BITS=void 0,e.BITS=32,e.GROUPS=4,e.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,e.RE_SUBNET_STRING=/\/\d{1,2}$/},265:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RE_URL_WITH_PORT=e.RE_URL=e.RE_ZONE_STRING=e.RE_SUBNET_STRING=e.RE_BAD_ADDRESS=e.RE_BAD_CHARACTERS=e.TYPES=e.SCOPES=e.GROUPS=e.BITS=void 0,e.BITS=128,e.GROUPS=8,e.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},e.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},e.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,e.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,e.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,e.RE_ZONE_STRING=/%.*$/,e.RE_URL=/^\[{0,1}([0-9a-f:]+)\]{0,1}/,e.RE_URL_WITH_PORT=/\[([0-9a-f:]+)\]:([0-9]{1,5})/},3324:(t,e)=>{"use strict";function i(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}function r(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}Object.defineProperty(e,"__esModule",{value:!0}),e.spanAllZeroes=i,e.spanAll=function(t,e=0){return t.split("").map((t,r)=>`<span class="digit value-${t} position-${r+e}">${i(t)}</span>`).join("")},e.spanLeadingZeroes=function(t){return t.split(":").map(t=>r(t)).join(":")},e.simpleGroup=function(t,e=0){return t.split(":").map((t,i)=>/group-v4/.test(t)?t:`<span class="hover-group group-${i+e}">${r(t)}</span>`)}},5185:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ADDRESS_BOUNDARY=void 0,e.groupPossibilities=a,e.padGroup=l,e.simpleRegularExpression=function(t){let e=[];t.forEach((t,i)=>{0===parseInt(t,16)&&e.push(i)});let i=e.map(e=>t.map((t,i)=>{if(i===e){let e=0===i||i===o.GROUPS-1?":":"";return a([l(t),e])}return l(t)}).join(":"));return i.push(t.map(l).join(":")),a(i)},e.possibleElisions=function(t,e,i){let r=[];e||i||r.push("::"),e&&i&&r.push(""),(i&&!e||!i&&e)&&r.push(":"),r.push(`${e?"":":"}(:0{1,4}){1,${t-1}}`),r.push(`(0{1,4}:){1,${t-1}}${i?"":":"}`),r.push(`(0{1,4}:){${t-1}}0{1,4}`);for(let e=1;e<t-1;e++)for(let i=1;i<t-e;i++)r.push(`(0{1,4}:){${i}}:(0{1,4}:){${t-i-e-1}}0{1,4}`);return a(r)};let o=n(i(265));function a(t){return`(${t.join("|")})`}function l(t){return t.length<4?`0{0,${4-t.length}}${t}`:t}e.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]"},5433:(t,e,i)=>{"use strict";i.d(e,{hU:()=>v});var r=function(){var t=function(e,i){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=function(){function t(t,e){this.ee=1,this.u=void 0,this.p=void 0,this.K=void 0,this.N=void 0,this.rr=void 0,this.u=t,this.p=e}return t.prototype.L=function(){var t=this;if(1===t.ee&&t.rr.rr===t)t=t.N;else if(t.K)for(t=t.K;t.N;)t=t.N;else{for(var e=t.rr;e.K===t;)e=(t=e).rr;t=e}return t},t.prototype.m=function(){var t=this;if(t.N){for(t=t.N;t.K;)t=t.K;return t}for(var e=t.rr;e.N===t;)e=(t=e).rr;return t.N!==e?e:t},t.prototype.ne=function(){var t=this.rr,e=this.N,i=e.K;return t.rr===this?t.rr=e:t.K===this?t.K=e:t.N=e,e.rr=t,e.K=this,this.rr=e,this.N=i,i&&(i.rr=this),e},t.prototype.te=function(){var t=this.rr,e=this.K,i=e.N;return t.rr===this?t.rr=e:t.K===this?t.K=e:t.N=e,e.rr=t,e.N=this,this.rr=e,this.K=i,i&&(i.rr=this),e},t}(),n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tr=1,e}return r(e,t),e.prototype.ne=function(){var e=t.prototype.ne.call(this);return this.ie(),e.ie(),e},e.prototype.te=function(){var e=t.prototype.te.call(this);return this.ie(),e.ie(),e},e.prototype.ie=function(){this.tr=1,this.K&&(this.tr+=this.K.tr),this.N&&(this.tr+=this.N.tr)},e}(s),o=function(){var t=function(e,i){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=function(){function t(t){void 0===t&&(t=0),this.iteratorType=t}return t.prototype.equals=function(t){return this.o===t.o},t}(),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(function(){function t(){this.M=0}return Object.defineProperty(t.prototype,"length",{get:function(){return this.M},enumerable:!1,configurable:!0}),t.prototype.size=function(){return this.M},t.prototype.empty=function(){return 0===this.M},t}());function h(){throw RangeError("Iterator access denied!")}var c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,s,n=i.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(t){s={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o},d=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f=function(t){function e(e,i){void 0===e&&(e=function(t,e){return t<e?-1:t>e?1:0}),void 0===i&&(i=!1);var r=t.call(this)||this;return r.W=void 0,r.$=e,i?(r.re=n,r.v=function(t,e,i){var r=this.se(t,e,i);if(r){for(var s=r.rr;s!==this.h;)s.tr+=1,s=s.rr;var n=this.fe(r);if(n){var o=n.parentNode,a=n.grandParent,l=n.curNode;o.ie(),a.ie(),l.ie()}}return this.M},r.G=function(t){for(var e=this.he(t);e!==this.h;)e.tr-=1,e=e.rr}):(r.re=s,r.v=function(t,e,i){var r=this.se(t,e,i);return r&&this.fe(r),this.M},r.G=r.he),r.h=new r.re,r}return c(e,t),e.prototype.U=function(t,e){for(var i=this.h;t;){var r=this.$(t.u,e);if(r<0)t=t.N;else{if(!(r>0))return t;i=t,t=t.K}}return i},e.prototype.X=function(t,e){for(var i=this.h;t;)0>=this.$(t.u,e)?t=t.N:(i=t,t=t.K);return i},e.prototype.Y=function(t,e){for(var i=this.h;t;){var r=this.$(t.u,e);if(r<0)i=t,t=t.N;else{if(!(r>0))return t;t=t.K}}return i},e.prototype.Z=function(t,e){for(var i=this.h;t;)0>this.$(t.u,e)?(i=t,t=t.N):t=t.K;return i},e.prototype.ue=function(t){for(;;){var e=t.rr;if(e===this.h)return;if(1===t.ee){t.ee=0;return}if(t===e.K){var i=e.N;if(1===i.ee)i.ee=0,e.ee=1,e===this.W?this.W=e.ne():e.ne();else{if(i.N&&1===i.N.ee){i.ee=e.ee,e.ee=0,i.N.ee=0,e===this.W?this.W=e.ne():e.ne();return}i.K&&1===i.K.ee?(i.ee=1,i.K.ee=0,i.te()):(i.ee=1,t=e)}}else{var i=e.K;if(1===i.ee)i.ee=0,e.ee=1,e===this.W?this.W=e.te():e.te();else{if(i.K&&1===i.K.ee){i.ee=e.ee,e.ee=0,i.K.ee=0,e===this.W?this.W=e.te():e.te();return}i.N&&1===i.N.ee?(i.ee=1,i.N.ee=0,i.ne()):(i.ee=1,t=e)}}}},e.prototype.he=function(t){if(1===this.M)return this.clear(),this.h;for(var e,i,r=t;r.K||r.N;){if(r.N)for(r=r.N;r.K;)r=r.K;else r=r.K;e=u([r.u,t.u],2),t.u=e[0],r.u=e[1],i=u([r.p,t.p],2),t.p=i[0],r.p=i[1],t=r}this.h.K===r?this.h.K=r.rr:this.h.N===r&&(this.h.N=r.rr),this.ue(r);var s=r.rr;return r===s.K?s.K=void 0:s.N=void 0,this.M-=1,this.W.ee=0,s},e.prototype.ae=function(t,e){return void 0!==t&&(!!(this.ae(t.K,e)||e(t))||this.ae(t.N,e))},e.prototype.fe=function(t){for(;;){var e=t.rr;if(0===e.ee)return;var i=e.rr;if(e===i.K){var r=i.N;if(r&&1===r.ee){if(r.ee=e.ee=0,i===this.W)return;i.ee=1,t=i;continue}if(t===e.N){if(t.ee=0,t.K&&(t.K.rr=e),t.N&&(t.N.rr=i),e.N=t.K,i.K=t.N,t.K=e,t.N=i,i===this.W)this.W=t,this.h.rr=t;else{var s=i.rr;s.K===i?s.K=t:s.N=t}return t.rr=i.rr,e.rr=t,i.rr=t,i.ee=1,{parentNode:e,grandParent:i,curNode:t}}e.ee=0,i===this.W?this.W=i.te():i.te(),i.ee=1}else{var r=i.K;if(r&&1===r.ee){if(r.ee=e.ee=0,i===this.W)return;i.ee=1,t=i;continue}if(t===e.K){if(t.ee=0,t.K&&(t.K.rr=i),t.N&&(t.N.rr=e),i.N=t.K,e.K=t.N,t.K=i,t.N=e,i===this.W)this.W=t,this.h.rr=t;else{var s=i.rr;s.K===i?s.K=t:s.N=t}return t.rr=i.rr,e.rr=t,i.rr=t,i.ee=1,{parentNode:e,grandParent:i,curNode:t}}e.ee=0,i===this.W?this.W=i.ne():i.ne(),i.ee=1}return}},e.prototype.se=function(t,e,i){if(void 0===this.W){this.M+=1,this.W=new this.re(t,e),this.W.ee=0,this.W.rr=this.h,this.h.rr=this.W,this.h.K=this.W,this.h.N=this.W;return}var r,s=this.h.K,n=this.$(s.u,t);if(0===n){s.p=e;return}if(n>0)s.K=new this.re(t,e),s.K.rr=s,r=s.K,this.h.K=r;else{var o=this.h.N,a=this.$(o.u,t);if(0===a){o.p=e;return}if(a<0)o.N=new this.re(t,e),o.N.rr=o,r=o.N,this.h.N=r;else{if(void 0!==i){var l=i.o;if(l!==this.h){var h=this.$(l.u,t);if(0===h){l.p=e;return}if(h>0){var c=l.L(),u=this.$(c.u,t);if(0===u){c.p=e;return}u<0&&(r=new this.re(t,e),void 0===c.N?(c.N=r,r.rr=c):(l.K=r,r.rr=l))}}}if(void 0===r)for(r=this.W;;){var d=this.$(r.u,t);if(d>0){if(void 0===r.K){r.K=new this.re(t,e),r.K.rr=r,r=r.K;break}r=r.K}else if(d<0){if(void 0===r.N){r.N=new this.re(t,e),r.N.rr=r,r=r.N;break}r=r.N}else{r.p=e;return}}}}return this.M+=1,r},e.prototype.g=function(t,e){for(;t;){var i=this.$(t.u,e);if(i<0)t=t.N;else{if(!(i>0))return t;t=t.K}}return t||this.h},e.prototype.clear=function(){this.M=0,this.W=void 0,this.h.rr=void 0,this.h.K=this.h.N=void 0},e.prototype.updateKeyByIterator=function(t,e){var i=t.o;if(i===this.h&&h(),1===this.M)return i.u=e,!0;if(i===this.h.K)return this.$(i.m().u,e)>0&&(i.u=e,!0);if(i===this.h.N)return 0>this.$(i.L().u,e)&&(i.u=e,!0);var r=i.L().u;if(this.$(r,e)>=0)return!1;var s=i.m().u;return!(0>=this.$(s,e))&&(i.u=e,!0)},e.prototype.eraseElementByPos=function(t){if(t<0||t>this.M-1)throw RangeError();var e=0,i=this;return this.ae(this.W,function(r){return t===e?(i.G(r),!0):(e+=1,!1)}),this.M},e.prototype.eraseElementByKey=function(t){if(0===this.M)return!1;var e=this.g(this.W,t);return e!==this.h&&(this.G(e),!0)},e.prototype.eraseElementByIterator=function(t){var e=t.o;e===this.h&&h();var i=void 0===e.N;return 0===t.iteratorType?i&&t.next():i&&void 0!==e.K||t.next(),this.G(e),t},e.prototype.forEach=function(t){var e,i,r=0;try{for(var s=d(this),n=s.next();!n.done;n=s.next()){var o=n.value;t(o,r++,this)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}},e.prototype.getElementByPos=function(t){if(t<0||t>this.M-1)throw RangeError();var e,i,r,s=0;try{for(var n=d(this),o=n.next();!o.done;o=n.next()){var a=o.value;if(s===t){r=a;break}s+=1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}return r},e.prototype.getHeight=function(){if(0===this.M)return 0;var t=function(e){return e?Math.max(t(e.K),t(e.N))+1:0};return t(this.W)},e}(l),p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),g=function(t){function e(e,i,r){var s=t.call(this,r)||this;return s.o=e,s.h=i,0===s.iteratorType?(s.pre=function(){return this.o===this.h.K&&h(),this.o=this.o.L(),this},s.next=function(){return this.o===this.h&&h(),this.o=this.o.m(),this}):(s.pre=function(){return this.o===this.h.N&&h(),this.o=this.o.m(),this},s.next=function(){return this.o===this.h&&h(),this.o=this.o.L(),this}),s}return p(e,t),Object.defineProperty(e.prototype,"index",{get:function(){var t=this.o,e=this.h.rr;if(t===this.h)return e?e.tr-1:0;var i=0;for(t.K&&(i+=t.K.tr);t!==e;){var r=t.rr;t===r.N&&(i+=1,r.K&&(i+=r.K.tr)),t=r}return i},enumerable:!1,configurable:!0}),e}(a),m=function(){var t=function(e,i){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),b=function(t,e){var i,r,s,n,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(s=2&n[0]?r.return:n[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){o=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){o.label=n[1];break}if(6===n[0]&&o.label<s[1]){o.label=s[1],s=n;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(n);break}s[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],r=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},_=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y=function(t){function e(e,i,r,s){var n=t.call(this,e,i,s)||this;return n.container=r,n}return m(e,t),Object.defineProperty(e.prototype,"pointer",{get:function(){return this.o===this.h&&h(),this.o.u},enumerable:!1,configurable:!0}),e.prototype.copy=function(){return new e(this.o,this.h,this.container,this.iteratorType)},e}(g);let v=function(t){function e(e,i,r){void 0===e&&(e=[]);var s=t.call(this,i,r)||this;return e.forEach(function(t){s.insert(t)}),s}return m(e,t),e.prototype.P=function(t){return b(this,function(e){switch(e.label){case 0:if(void 0===t)return[2];return[5,_(this.P(t.K))];case 1:return e.sent(),[4,t.u];case 2:return e.sent(),[5,_(this.P(t.N))];case 3:return e.sent(),[2]}})},e.prototype.begin=function(){return new y(this.h.K||this.h,this.h,this)},e.prototype.end=function(){return new y(this.h,this.h,this)},e.prototype.rBegin=function(){return new y(this.h.N||this.h,this.h,this,1)},e.prototype.rEnd=function(){return new y(this.h,this.h,this,1)},e.prototype.front=function(){return this.h.K?this.h.K.u:void 0},e.prototype.back=function(){return this.h.N?this.h.N.u:void 0},e.prototype.insert=function(t,e){return this.v(t,void 0,e)},e.prototype.find=function(t){return new y(this.g(this.W,t),this.h,this)},e.prototype.lowerBound=function(t){return new y(this.U(this.W,t),this.h,this)},e.prototype.upperBound=function(t){return new y(this.X(this.W,t),this.h,this)},e.prototype.reverseLowerBound=function(t){return new y(this.Y(this.W,t),this.h,this)},e.prototype.reverseUpperBound=function(t){return new y(this.Z(this.W,t),this.h,this)},e.prototype.union=function(t){var e=this;return t.forEach(function(t){e.insert(t)}),this.M},e.prototype[Symbol.iterator]=function(){return this.P(this.W)},e}(f)},3903:(t,e,i)=>{let r=t.exports,{Buffer:s}=i(8893);for(let t in r.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},r.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},r.requiredHeaderFlagsErrors={},r.requiredHeaderFlags){let e=r.requiredHeaderFlags[t];r.requiredHeaderFlagsErrors[t]="Invalid header flag bits, must be 0x"+e.toString(16)+" for "+r.types[t]+" packet"}for(let t in r.codes={},r.types){let e=r.types[t];r.codes[e]=t}for(let t in r.CMD_SHIFT=4,r.CMD_MASK=240,r.DUP_MASK=8,r.QOS_MASK=3,r.QOS_SHIFT=1,r.RETAIN_MASK=1,r.VARBYTEINT_MASK=127,r.VARBYTEINT_FIN_MASK=128,r.VARBYTEINT_MAX=268435455,r.SESSIONPRESENT_MASK=1,r.SESSIONPRESENT_HEADER=s.from([r.SESSIONPRESENT_MASK]),r.CONNACK_HEADER=s.from([r.codes.connack<<r.CMD_SHIFT]),r.USERNAME_MASK=128,r.PASSWORD_MASK=64,r.WILL_RETAIN_MASK=32,r.WILL_QOS_MASK=24,r.WILL_QOS_SHIFT=3,r.WILL_FLAG_MASK=4,r.CLEAN_SESSION_MASK=2,r.CONNECT_HEADER=s.from([r.codes.connect<<r.CMD_SHIFT]),r.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},r.propertiesCodes={},r.properties){let e=r.properties[t];r.propertiesCodes[e]=t}function n(t){return[0,1,2].map(e=>[0,1].map(i=>[0,1].map(n=>{let o=s.alloc(1);return o.writeUInt8(r.codes[t]<<r.CMD_SHIFT|(i?r.DUP_MASK:0)|e<<r.QOS_SHIFT|n,0,!0),o})))}r.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},r.PUBLISH_HEADER=n("publish"),r.SUBSCRIBE_HEADER=n("subscribe"),r.SUBSCRIBE_OPTIONS_QOS_MASK=3,r.SUBSCRIBE_OPTIONS_NL_MASK=1,r.SUBSCRIBE_OPTIONS_NL_SHIFT=2,r.SUBSCRIBE_OPTIONS_RAP_MASK=1,r.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,r.SUBSCRIBE_OPTIONS_RH_MASK=3,r.SUBSCRIBE_OPTIONS_RH_SHIFT=4,r.SUBSCRIBE_OPTIONS_RH=[0,16,32],r.SUBSCRIBE_OPTIONS_NL=4,r.SUBSCRIBE_OPTIONS_RAP=8,r.SUBSCRIBE_OPTIONS_QOS=[0,1,2],r.UNSUBSCRIBE_HEADER=n("unsubscribe"),r.ACKS={unsuback:n("unsuback"),puback:n("puback"),pubcomp:n("pubcomp"),pubrel:n("pubrel"),pubrec:n("pubrec")},r.SUBACK_HEADER=s.from([r.codes.suback<<r.CMD_SHIFT]),r.VERSION3=s.from([3]),r.VERSION4=s.from([4]),r.VERSION5=s.from([5]),r.VERSION131=s.from([131]),r.VERSION132=s.from([132]),r.QOS=[0,1,2].map(t=>s.from([t])),r.EMPTY={pingreq:s.from([r.codes.pingreq<<4,0]),pingresp:s.from([r.codes.pingresp<<4,0]),disconnect:s.from([r.codes.disconnect<<4,0])},r.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},r.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},r.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},r.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}},3687:(t,e,i)=>{let r=i(2390),{EventEmitter:s}=i(7702),{Buffer:n}=i(8893);class o extends s{constructor(){super(),this._array=Array(20),this._i=0}write(t){return this._array[this._i++]=t,!0}concat(){let t,e=0,i=Array(this._array.length),r=this._array,s=0;for(t=0;t<r.length&&void 0!==r[t];t++)"string"!=typeof r[t]?i[t]=r[t].length:i[t]=n.byteLength(r[t]),e+=i[t];let o=n.allocUnsafe(e);for(t=0;t<r.length&&void 0!==r[t];t++)"string"!=typeof r[t]?r[t].copy(o,s):o.write(r[t],s),s+=i[t];return o}destroy(t){t&&this.emit("error",t)}}t.exports=function(t,e){let i=new o;return r(t,i,e),i.concat()}},2990:(t,e,i)=>{e.parser=i(9115).parser,e.generate=i(3687),e.writeToStream=i(2390)},4413:(t,e,i)=>{let{Buffer:r}=i(8893),s={},n=r.isBuffer(r.from([1,2]).subarray(0,1));function o(t){let e=r.allocUnsafe(2);return e.writeUInt8(t>>8,0),e.writeUInt8(255&t,1),e}t.exports={cache:s,generateCache:function(){for(let t=0;t<65536;t++)s[t]=o(t)},generateNumber:o,genBufVariableByteInt:function(t){let e=0,i=0,s=r.allocUnsafe(4);do e=t%128|0,(t=t/128|0)>0&&(e|=128),s.writeUInt8(e,i++);while(t>0&&i<4);return t>0&&(i=0),n?s.subarray(0,i):s.slice(0,i)},generate4ByteBuffer:function(t){let e=r.allocUnsafe(4);return e.writeUInt32BE(t,0),e}}},42:t=>{class e{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}t.exports=e},9115:(t,e,i)=>{let r=i(2545),{EventEmitter:s}=i(7702),n=i(42),o=i(3903),a=i(8589)("mqtt-packet:parser");class l extends s{constructor(){super(),this.parser=this.constructor.parser}static parser(t){return this instanceof l?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new l().parser(t)}_resetState(){a("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new n,this.error=null,this._list=r(),this._stateCounter=0}parse(t){for(this.error&&this._resetState(),this._list.append(t),a("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,a("parse: state complete. _stateCounter is now: %d",this._stateCounter),a("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return a("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let t=this._list.readUInt8(0),e=t>>o.CMD_SHIFT;this.packet.cmd=o.types[e];let i=o.requiredHeaderFlags[e];return null!=i&&(15&t)!==i?this._emitError(Error(o.requiredHeaderFlagsErrors[e])):(this.packet.retain=(t&o.RETAIN_MASK)!=0,this.packet.qos=t>>o.QOS_SHIFT&o.QOS_MASK,this.packet.qos>2)?this._emitError(Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(t&o.DUP_MASK)!=0,a("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0)}_parseLength(){let t=this._parseVarByteNum(!0);return t&&(this.packet.length=t.value,this._list.consume(t.bytes)),a("_parseLength %d",t.value),!!t}_parsePayload(){a("_parsePayload: payload %O",this._list);let t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(Error("Not supported"))}t=!0}return a("_parsePayload complete result: %s",t),t}_parseConnect(){let t,e,i,r;a("_parseConnect");let s={},n=this.packet,l=this._parseString();if(null===l)return this._emitError(Error("Cannot parse protocolId"));if("MQTT"!==l&&"MQIsdp"!==l)return this._emitError(Error("Invalid protocolId"));if(n.protocolId=l,this._pos>=this._list.length)return this._emitError(Error("Packet too short"));if(n.protocolVersion=this._list.readUInt8(this._pos),n.protocolVersion>=128&&(n.bridgeMode=!0,n.protocolVersion=n.protocolVersion-128),3!==n.protocolVersion&&4!==n.protocolVersion&&5!==n.protocolVersion)return this._emitError(Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(Error("Packet too short"));if(1&this._list.readUInt8(this._pos))return this._emitError(Error("Connect flag bit 0 must be 0, but got 1"));s.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK;let h=!!(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),c=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT;if(s.will)n.will={},n.will.retain=h,n.will.qos=c;else{if(h)return this._emitError(Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(c)return this._emitError(Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(n.clean=(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK)!=0,this._pos++,n.keepalive=this._parseNum(),-1===n.keepalive)return this._emitError(Error("Packet too short"));if(5===n.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(n.properties=t)}let u=this._parseString();if(null===u)return this._emitError(Error("Packet too short"));if(n.clientId=u,a("_parseConnect: packet.clientId: %s",n.clientId),s.will){if(5===n.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(n.will.properties=t)}if(null===(t=this._parseString()))return this._emitError(Error("Cannot parse will topic"));if(n.will.topic=t,a("_parseConnect: packet.will.topic: %s",n.will.topic),null===(e=this._parseBuffer()))return this._emitError(Error("Cannot parse will payload"));n.will.payload=e,a("_parseConnect: packet.will.paylaod: %s",n.will.payload)}if(s.username){if(null===(r=this._parseString()))return this._emitError(Error("Cannot parse username"));n.username=r,a("_parseConnect: packet.username: %s",n.username)}if(s.password){if(null===(i=this._parseBuffer()))return this._emitError(Error("Cannot parse password"));n.password=i}return this.settings=n,a("_parseConnect: complete"),n}_parseConnack(){a("_parseConnack");let t=this.packet;if(this._list.length<1)return null;let e=this._list.readUInt8(this._pos++);if(e>1)return this._emitError(Error("Invalid connack flags, bits 7-1 must be set to 0"));if(t.sessionPresent=!!(e&o.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?t.reasonCode=this._list.readUInt8(this._pos++):t.reasonCode=0;else{if(this._list.length<2)return null;t.returnCode=this._list.readUInt8(this._pos++)}if(-1===t.returnCode||-1===t.reasonCode)return this._emitError(Error("Cannot parse return code"));if(5===this.settings.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}a("_parseConnack: complete")}_parsePublish(){a("_parsePublish");let t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(Error("Cannot parse topic"));if(!(t.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}t.payload=this._list.slice(this._pos,t.length),a("_parsePublish: payload from buffer list: %o",t.payload)}}_parseSubscribe(){let t,e,i,r,s,n,l;a("_parseSubscribe");let h=this.packet;if(h.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(h.properties=t)}if(h.length<=0)return this._emitError(Error("Malformed subscribe, no payload specified"));for(;this._pos<h.length;){if(null===(t=this._parseString()))return this._emitError(Error("Cannot parse topic"));if(this._pos>=h.length)return this._emitError(Error("Malformed Subscribe Payload"));if(e=this._parseByte(),5===this.settings.protocolVersion){if(192&e)return this._emitError(Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(252&e)return this._emitError(Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if((i=e&o.SUBSCRIBE_OPTIONS_QOS_MASK)>2)return this._emitError(Error("Invalid subscribe QoS, must be <= 2"));if(n=(e>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK)!=0,s=(e>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK)!=0,(r=e>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK)>2)return this._emitError(Error("Invalid retain handling, must be <= 2"));l={topic:t,qos:i},5===this.settings.protocolVersion?(l.nl=n,l.rap=s,l.rh=r):this.settings.bridgeMode&&(l.rh=0,l.rap=!0,l.nl=!0),a("_parseSubscribe: push subscription `%s` to subscription",l),h.subscriptions.push(l)}}}_parseSuback(){a("_parseSuback");let t=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}if(t.length<=0)return this._emitError(Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let t=this._list.readUInt8(this._pos++);if(5===this.settings.protocolVersion){if(!o.MQTT5_SUBACK_CODES[t])return this._emitError(Error("Invalid suback code"))}else if(t>2&&128!==t)return this._emitError(Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(t)}}}_parseUnsubscribe(){a("_parseUnsubscribe");let t=this.packet;if(t.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}if(t.length<=0)return this._emitError(Error("Malformed unsubscribe, no payload specified"));for(;this._pos<t.length;){let e=this._parseString();if(null===e)return this._emitError(Error("Cannot parse topic"));a("_parseUnsubscribe: push topic `%s` to unsubscriptions",e),t.unsubscriptions.push(e)}}}_parseUnsuback(){a("_parseUnsuback");let t=this.packet;if(!this._parseMessageId())return this._emitError(Error("Cannot parse messageId"));if((3===this.settings.protocolVersion||4===this.settings.protocolVersion)&&2!==t.length)return this._emitError(Error("Malformed unsuback, payload length must be 2"));if(t.length<=0)return this._emitError(Error("Malformed unsuback, no payload specified"));if(5===this.settings.protocolVersion){let e=this._parseProperties();for(Object.getOwnPropertyNames(e).length&&(t.properties=e),t.granted=[];this._pos<this.packet.length;){let t=this._list.readUInt8(this._pos++);if(!o.MQTT5_UNSUBACK_CODES[t])return this._emitError(Error("Invalid unsuback code"));this.packet.granted.push(t)}}}_parseConfirmation(){a("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let t=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion){if(t.length>2){switch(t.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!o.MQTT5_PUBACK_PUBREC_CODES[t.reasonCode])return this._emitError(Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!o.MQTT5_PUBREL_PUBCOMP_CODES[t.reasonCode])return this._emitError(Error("Invalid "+this.packet.cmd+" reason code"))}a("_parseConfirmation: packet.reasonCode `%d`",t.reasonCode)}else t.reasonCode=0;if(t.length>3){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}}return!0}_parseDisconnect(){let t=this.packet;if(a("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?(t.reasonCode=this._parseByte(),o.MQTT5_DISCONNECT_CODES[t.reasonCode]||this._emitError(Error("Invalid disconnect reason code"))):t.reasonCode=0;let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}return a("_parseDisconnect result: true"),!0}_parseAuth(){a("_parseAuth");let t=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(Error("Not supported auth packet for this version MQTT"));if(t.reasonCode=this._parseByte(),!o.MQTT5_AUTH_CODES[t.reasonCode])return this._emitError(Error("Invalid auth reason code"));let e=this._parseProperties();return Object.getOwnPropertyNames(e).length&&(t.properties=e),a("_parseAuth: result: true"),!0}_parseMessageId(){let t=this.packet;return(t.messageId=this._parseNum(),null===t.messageId)?(this._emitError(Error("Cannot parse messageId")),!1):(a("_parseMessageId: packet.messageId %d",t.messageId),!0)}_parseString(t){let e=this._parseNum(),i=e+this._pos;if(-1===e||i>this._list.length||i>this.packet.length)return null;let r=this._list.toString("utf8",this._pos,i);return this._pos+=e,a("_parseString: result: %s",r),r}_parseStringPair(){return a("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let t=this._parseNum(),e=t+this._pos;if(-1===t||e>this._list.length||e>this.packet.length)return null;let i=this._list.slice(this._pos,e);return this._pos+=t,a("_parseBuffer: result: %o",i),i}_parseNum(){if(this._list.length-this._pos<2)return -1;let t=this._list.readUInt16BE(this._pos);return this._pos+=2,a("_parseNum: result: %s",t),t}_parse4ByteNum(){if(this._list.length-this._pos<4)return -1;let t=this._list.readUInt32BE(this._pos);return this._pos+=4,a("_parse4ByteNum: result: %s",t),t}_parseVarByteNum(t){let e;a("_parseVarByteNum");let i=0,r=1,s=0,n=!1,l=this._pos?this._pos:0;for(;i<4&&l+i<this._list.length;){if(s+=r*((e=this._list.readUInt8(l+i++))&o.VARBYTEINT_MASK),r*=128,(e&o.VARBYTEINT_FIN_MASK)==0){n=!0;break}if(this._list.length<=i)break}return!n&&4===i&&this._list.length>=i&&this._emitError(Error("Invalid variable byte integer")),l&&(this._pos+=i),a("_parseVarByteNum: result: %o",n=!!n&&(t?{bytes:i,value:s}:s)),n}_parseByte(){let t;return this._pos<this._list.length&&(t=this._list.readUInt8(this._pos),this._pos++),a("_parseByte: result: %o",t),t}_parseByType(t){switch(a("_parseByType: type: %s",t),t){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){a("_parseProperties");let t=this._parseVarByteNum(),e=this._pos+t,i={};for(;this._pos<e;){let t=this._parseByte();if(!t)return this._emitError(Error("Cannot parse property code type")),!1;let e=o.propertiesCodes[t];if(!e)return this._emitError(Error("Unknown property")),!1;if("userProperties"===e){i[e]||(i[e]=Object.create(null));let t=this._parseByType(o.propertiesTypes[e]);if(i[e][t.name]){if(Array.isArray(i[e][t.name]))i[e][t.name].push(t.value);else{let r=i[e][t.name];i[e][t.name]=[r],i[e][t.name].push(t.value)}}else i[e][t.name]=t.value;continue}i[e]?(Array.isArray(i[e])||(i[e]=[i[e]]),i[e].push(this._parseByType(o.propertiesTypes[e]))):i[e]=this._parseByType(o.propertiesTypes[e])}return i}_newPacket(){return a("_newPacket"),this.packet&&(this._list.consume(this.packet.length),a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),a("_newPacket: new packet"),this.packet=new n,this._pos=0,!0}_emitError(t){a("_emitError",t),this.error=t,this.emit("error",t)}}t.exports=l},2390:(t,e,i)=>{let r=i(3903),{Buffer:s}=i(8893),n=s.allocUnsafe(0),o=s.from([0]),a=i(4413),l=i(3407).nextTick,h=i(8589)("mqtt-packet:writeToStream"),c=a.cache,u=a.generateNumber,d=a.generateCache,f=a.genBufVariableByteInt,p=a.generate4ByteBuffer,g=x,m=!0;function b(t,e,i){switch(h("generate called"),e.cork&&(e.cork(),l(_,e)),m&&(m=!1,d()),h("generate: packet.cmd: %s",t.cmd),t.cmd){case"connect":return function(t,e,i){let n,o,a;let l=t||{},h=l.protocolId||"MQTT",c=l.protocolVersion||4,u=l.will,d=l.clean,f=l.keepalive||0,p=l.clientId||"",m=l.username,b=l.password,_=l.properties;void 0===d&&(d=!0);let y=0;if(!h||"string"!=typeof h&&!s.isBuffer(h))return e.destroy(Error("Invalid protocolId")),!1;if(y+=h.length+2,3!==c&&4!==c&&5!==c)return e.destroy(Error("Invalid protocol version")),!1;if(y+=1,("string"==typeof p||s.isBuffer(p))&&(p||c>=4)&&(p||d))y+=s.byteLength(p)+2;else{if(c<4)return e.destroy(Error("clientId must be supplied before 3.1.1")),!1;if(1*d==0)return e.destroy(Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof f||f<0||f>65535||f%1!=0)return e.destroy(Error("Invalid keepalive")),!1;if(y+=3,5===c){if(!(n=E(e,_)))return!1;y+=n.length}if(u){if("object"!=typeof u)return e.destroy(Error("Invalid will")),!1;if(!u.topic||"string"!=typeof u.topic)return e.destroy(Error("Invalid will topic")),!1;if(y+=s.byteLength(u.topic)+2+2,u.payload){if(!(u.payload.length>=0))return e.destroy(Error("Invalid will payload")),!1;"string"==typeof u.payload?y+=s.byteLength(u.payload):y+=u.payload.length}if(o={},5===c){if(!(o=E(e,u.properties)))return!1;y+=o.length}}let x=!1;if(null!=m){if(!A(m))return e.destroy(Error("Invalid username")),!1;x=!0,y+=s.byteLength(m)+2}if(null!=b){if(!x)return e.destroy(Error("Username is required to use password")),!1;if(!A(b))return e.destroy(Error("Invalid password")),!1;y+=O(b)+2}return e.write(r.CONNECT_HEADER),v(e,y),k(e,h),l.bridgeMode&&(c+=128),e.write(131===c?r.VERSION131:132===c?r.VERSION132:4===c?r.VERSION4:5===c?r.VERSION5:r.VERSION3),a=0|(null!=m?r.USERNAME_MASK:0)|(null!=b?r.PASSWORD_MASK:0)|(u&&u.retain?r.WILL_RETAIN_MASK:0)|(u&&u.qos?u.qos<<r.WILL_QOS_SHIFT:0)|(u?r.WILL_FLAG_MASK:0)|(d?r.CLEAN_SESSION_MASK:0),e.write(s.from([a])),g(e,f),5===c&&n.write(),k(e,p),u&&(5===c&&o.write(),w(e,u.topic),k(e,u.payload)),null!=m&&k(e,m),null!=b&&k(e,b),!0}(t,e,0);case"connack":return function(t,e,i){let n=i?i.protocolVersion:4,a=t||{},l=5===n?a.reasonCode:a.returnCode,h=a.properties,c=2;if("number"!=typeof l)return e.destroy(Error("Invalid return code")),!1;let u=null;if(5===n){if(!(u=E(e,h)))return!1;c+=u.length}return e.write(r.CONNACK_HEADER),v(e,c),e.write(a.sessionPresent?r.SESSIONPRESENT_HEADER:o),e.write(s.from([l])),null!=u&&u.write(),!0}(t,e,i);case"publish":return function(t,e,i){h("publish: packet: %o",t);let o=i?i.protocolVersion:4,a=t||{},l=a.qos||0,c=a.retain?r.RETAIN_MASK:0,u=a.topic,d=a.payload||n,f=a.messageId,p=a.properties,m=0;if("string"==typeof u)m+=s.byteLength(u)+2;else{if(!s.isBuffer(u))return e.destroy(Error("Invalid topic")),!1;m+=u.length+2}if(s.isBuffer(d)?m+=d.length:m+=s.byteLength(d),l&&"number"!=typeof f)return e.destroy(Error("Invalid messageId")),!1;l&&(m+=2);let b=null;if(5===o){if(!(b=E(e,p)))return!1;m+=b.length}return e.write(r.PUBLISH_HEADER[l][a.dup?1:0][c?1:0]),v(e,m),g(e,O(u)),e.write(u),l>0&&g(e,f),null!=b&&b.write(),h("publish: payload: %o",d),e.write(d)}(t,e,i);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(t,e,i){let n=i?i.protocolVersion:4,o=t||{},a=o.cmd||"puback",l=o.messageId,h=o.dup&&"pubrel"===a?r.DUP_MASK:0,c=0,u=o.reasonCode,d=o.properties,f=5===n?3:2;if("pubrel"===a&&(c=1),"number"!=typeof l)return e.destroy(Error("Invalid messageId")),!1;let p=null;if(5===n&&"object"==typeof d){if(!(p=M(e,d,i,f)))return!1;f+=p.length}return e.write(r.ACKS[a][c][h][0]),3===f&&(f+=0!==u?1:-1),v(e,f),g(e,l),5===n&&2!==f&&e.write(s.from([u])),null!==p?p.write():4===f&&e.write(s.from([0])),!0}(t,e,i);case"subscribe":return function(t,e,i){h("subscribe: packet: ");let n=i?i.protocolVersion:4,o=t||{},a=o.dup?r.DUP_MASK:0,l=o.messageId,c=o.subscriptions,u=o.properties,d=0;if("number"!=typeof l)return e.destroy(Error("Invalid messageId")),!1;d+=2;let f=null;if(5===n){if(!(f=E(e,u)))return!1;d+=f.length}if("object"!=typeof c||!c.length)return e.destroy(Error("Invalid subscriptions")),!1;for(let t=0;t<c.length;t+=1){let i=c[t].topic,r=c[t].qos;if("string"!=typeof i)return e.destroy(Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof r)return e.destroy(Error("Invalid subscriptions - invalid qos")),!1;if(5===n){if("boolean"!=typeof(c[t].nl||!1))return e.destroy(Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(c[t].rap||!1))return e.destroy(Error("Invalid subscriptions - invalid Retain as Published")),!1;let i=c[t].rh||0;if("number"!=typeof i||i>2)return e.destroy(Error("Invalid subscriptions - invalid Retain Handling")),!1}d+=s.byteLength(i)+2+1}h("subscribe: writing to stream: %o",r.SUBSCRIBE_HEADER),e.write(r.SUBSCRIBE_HEADER[1][a?1:0][0]),v(e,d),g(e,l),null!==f&&f.write();let p=!0;for(let t of c){let i;let o=t.topic,a=t.qos,l=+t.nl,h=+t.rap,c=t.rh;w(e,o),i=r.SUBSCRIBE_OPTIONS_QOS[a],5===n&&(i|=l?r.SUBSCRIBE_OPTIONS_NL:0,i|=h?r.SUBSCRIBE_OPTIONS_RAP:0,i|=c?r.SUBSCRIBE_OPTIONS_RH[c]:0),p=e.write(s.from([i]))}return p}(t,e,i);case"suback":return function(t,e,i){let n=i?i.protocolVersion:4,o=t||{},a=o.messageId,l=o.granted,h=o.properties,c=0;if("number"!=typeof a)return e.destroy(Error("Invalid messageId")),!1;if(c+=2,"object"!=typeof l||!l.length)return e.destroy(Error("Invalid qos vector")),!1;for(let t=0;t<l.length;t+=1){if("number"!=typeof l[t])return e.destroy(Error("Invalid qos vector")),!1;c+=1}let u=null;if(5===n){if(!(u=M(e,h,i,c)))return!1;c+=u.length}return e.write(r.SUBACK_HEADER),v(e,c),g(e,a),null!==u&&u.write(),e.write(s.from(l))}(t,e,i);case"unsubscribe":return function(t,e,i){let n=i?i.protocolVersion:4,o=t||{},a=o.messageId,l=o.dup?r.DUP_MASK:0,h=o.unsubscriptions,c=o.properties,u=0;if("number"!=typeof a)return e.destroy(Error("Invalid messageId")),!1;if(u+=2,"object"!=typeof h||!h.length)return e.destroy(Error("Invalid unsubscriptions")),!1;for(let t=0;t<h.length;t+=1){if("string"!=typeof h[t])return e.destroy(Error("Invalid unsubscriptions")),!1;u+=s.byteLength(h[t])+2}let d=null;if(5===n){if(!(d=E(e,c)))return!1;u+=d.length}e.write(r.UNSUBSCRIBE_HEADER[1][l?1:0][0]),v(e,u),g(e,a),null!==d&&d.write();let f=!0;for(let t=0;t<h.length;t++)f=w(e,h[t]);return f}(t,e,i);case"unsuback":return function(t,e,i){let n=i?i.protocolVersion:4,o=t||{},a=o.messageId,l=o.dup?r.DUP_MASK:0,h=o.granted,c=o.properties,u=o.cmd,d=2;if("number"!=typeof a)return e.destroy(Error("Invalid messageId")),!1;if(5===n){if("object"!=typeof h||!h.length)return e.destroy(Error("Invalid qos vector")),!1;for(let t=0;t<h.length;t+=1){if("number"!=typeof h[t])return e.destroy(Error("Invalid qos vector")),!1;d+=1}}let f=null;if(5===n){if(!(f=M(e,c,i,d)))return!1;d+=f.length}return e.write(r.ACKS[u][0][l][0]),v(e,d),g(e,a),null!==f&&f.write(),5===n&&e.write(s.from(h)),!0}(t,e,i);case"pingreq":case"pingresp":return e.write(r.EMPTY[t.cmd]);case"disconnect":return function(t,e,i){let n=i?i.protocolVersion:4,o=t||{},a=o.reasonCode,l=o.properties,h=5===n?1:0,c=null;if(5===n){if(!(c=M(e,l,i,h)))return!1;h+=c.length}return e.write(s.from([r.codes.disconnect<<4])),v(e,h),5===n&&e.write(s.from([a])),null!==c&&c.write(),!0}(t,e,i);case"auth":return function(t,e,i){let n=i?i.protocolVersion:4,o=t||{},a=o.reasonCode,l=o.properties,h=5===n?1:0;5!==n&&e.destroy(Error("Invalid mqtt version for auth packet"));let c=M(e,l,i,h);return!!c&&(h+=c.length,e.write(s.from([r.codes.auth<<4])),v(e,h),e.write(s.from([a])),null!==c&&c.write(),!0)}(t,e,i);default:return e.destroy(Error("Unknown command")),!1}}function _(t){t.uncork()}Object.defineProperty(b,"cacheNumbers",{get:()=>g===x,set(t){t?(c&&0!==Object.keys(c).length||(m=!0),g=x):(m=!1,g=S)}});let y={};function v(t,e){if(e>r.VARBYTEINT_MAX)return t.destroy(Error(`Invalid variable byte integer: ${e}`)),!1;let i=y[e];return!i&&(i=f(e),e<16384&&(y[e]=i)),h("writeVarByteInt: writing to stream: %o",i),t.write(i)}function w(t,e){let i=s.byteLength(e);return g(t,i),h("writeString: %s",e),t.write(e,"utf8")}function x(t,e){return h("writeNumberCached: number: %d",e),h("writeNumberCached: %o",c[e]),t.write(c[e])}function S(t,e){let i=u(e);return h("writeNumberGenerated: %o",i),t.write(i)}function k(t,e){"string"==typeof e?w(t,e):e?(g(t,e.length),t.write(e)):g(t,0)}function E(t,e){if("object"!=typeof e||null!=e.length)return{length:1,write(){T(t,{},0)}};let i=0;function n(e,i){let n=r.propertiesTypes[e],o=0;switch(n){case"byte":if("boolean"!=typeof i)return t.destroy(Error(`Invalid ${e}: ${i}`)),!1;o+=2;break;case"int8":if("number"!=typeof i||i<0||i>255)return t.destroy(Error(`Invalid ${e}: ${i}`)),!1;o+=2;break;case"binary":if(i&&null===i)return t.destroy(Error(`Invalid ${e}: ${i}`)),!1;o+=1+s.byteLength(i)+2;break;case"int16":if("number"!=typeof i||i<0||i>65535)return t.destroy(Error(`Invalid ${e}: ${i}`)),!1;o+=3;break;case"int32":if("number"!=typeof i||i<0||i>4294967295)return t.destroy(Error(`Invalid ${e}: ${i}`)),!1;o+=5;break;case"var":if("number"!=typeof i||i<0||i>268435455)return t.destroy(Error(`Invalid ${e}: ${i}`)),!1;o+=1+s.byteLength(f(i));break;case"string":if("string"!=typeof i)return t.destroy(Error(`Invalid ${e}: ${i}`)),!1;o+=3+s.byteLength(i.toString());break;case"pair":if("object"!=typeof i)return t.destroy(Error(`Invalid ${e}: ${i}`)),!1;o+=Object.getOwnPropertyNames(i).reduce((t,e)=>{let r=i[e];return Array.isArray(r)?t+=r.reduce((t,i)=>t+=3+s.byteLength(e.toString())+2+s.byteLength(i.toString()),0):t+=3+s.byteLength(e.toString())+2+s.byteLength(i[e].toString()),t},0);break;default:return t.destroy(Error(`Invalid property ${e}: ${i}`)),!1}return o}if(e)for(let t in e){let r=0,s=0,o=e[t];if(void 0!==o){if(Array.isArray(o))for(let e=0;e<o.length;e++){if(!(s=n(t,o[e])))return!1;r+=s}else{if(!(s=n(t,o)))return!1;r=s}if(!r)return!1;i+=r}}return{length:s.byteLength(f(i))+i,write(){T(t,e,i)}}}function M(t,e,i,r){let s=["reasonString","userProperties"],n=i&&i.properties&&i.properties.maximumPacketSize?i.properties.maximumPacketSize:0,o=E(t,e);if(n)for(;r+o.length>n;){let i=s.shift();if(!i||!e[i])return!1;delete e[i],o=E(t,e)}return o}function I(t,e,i){switch(r.propertiesTypes[e]){case"byte":t.write(s.from([r.properties[e]])),t.write(s.from([+i]));break;case"int8":t.write(s.from([r.properties[e]])),t.write(s.from([i]));break;case"binary":t.write(s.from([r.properties[e]])),k(t,i);break;case"int16":t.write(s.from([r.properties[e]])),g(t,i);break;case"int32":t.write(s.from([r.properties[e]])),function(t,e){let i=p(e);h("write4ByteNumber: %o",i),t.write(i)}(t,i);break;case"var":t.write(s.from([r.properties[e]])),v(t,i);break;case"string":t.write(s.from([r.properties[e]])),w(t,i);break;case"pair":Object.getOwnPropertyNames(i).forEach(n=>{let o=i[n];if(Array.isArray(o))o.forEach(i=>{var o,a;t.write(s.from([r.properties[e]])),o=n.toString(),a=i.toString(),w(t,o),w(t,a)});else{var a,l;t.write(s.from([r.properties[e]])),a=n.toString(),l=o.toString(),w(t,a),w(t,l)}});break;default:return t.destroy(Error(`Invalid property ${e} value: ${i}`)),!1}}function T(t,e,i){for(let r in v(t,i),e)if(Object.prototype.hasOwnProperty.call(e,r)&&null!=e[r]){let i=e[r];if(Array.isArray(i))for(let e=0;e<i.length;e++)I(t,r,i[e]);else I(t,r,i)}}function O(t){return t?t instanceof s?t.length:s.byteLength(t):0}function A(t){return"string"==typeof t||t instanceof s}t.exports=b},3042:function(t,e,i){"use strict";var r,s=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(r=function(t){return(r=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e})(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=r(t),o=0;o<i.length;o++)"default"!==i[o]&&s(e,t,i[o]);return n(e,t),e}),a=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||s(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0});let l=o(i(2920));e.default=l,a(i(2920),e)},9557:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=void 0,e.writev=n;let r=i(1650),s=i(8893);function n(t,e){let i=Array(t.length);for(let e=0;e<t.length;e++)"string"==typeof t[e].chunk?i[e]=s.Buffer.from(t[e].chunk,"utf8"):i[e]=t[e].chunk;this._write(s.Buffer.concat(i),"binary",e)}class o extends r.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(t,e,i){super({objectMode:!0}),this.proxy=e,this.socket=i,this.writeQueue=[],t.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",t=>{!this.destroyed&&this.readable&&this.push(t)})}_read(t){this.proxy.read(t)}_write(t,e,i){this.isSocketOpen?this.writeToProxy(t,e,i):this.writeQueue.push({chunk:t,encoding:e,cb:i})}_final(t){this.writeQueue=[],this.proxy.end(t)}_destroy(t,e){this.writeQueue=[],this.proxy.destroy(),e(t)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(t,e,i){!1===this.proxy.write(t,e)?this.proxy.once("drain",i):i()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:t,encoding:e,cb:i}=this.writeQueue.shift();this.writeToProxy(t,e,i)}}}e.BufferedDuplex=o},5168:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});let s=r(i(2511));class n{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(t,e){this.client=t,this.timer="object"==typeof e&&"set"in e&&"clear"in e?e:(0,s.default)(e),this.setKeepalive(t.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(t){if(isNaN(t*=1e3)||t<=0||t>2147483647)throw Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${t}`);this._keepalive=t,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${t}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let t=Math.ceil(1.5*this._keepalive);this._keepaliveTimeoutTimestamp=Date.now()+t,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{!this.destroyed&&(this.counter+=1,2===this.counter?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}}e.default=n},4828:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;let s=r(i(7702)),n=i(4241);class o{}e.TypedEventEmitter=o,(0,n.applyMixin)(o,s.default)},5788:function(t,e,i){"use strict";var r,s=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(r=function(t){return(r=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e})(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=r(t),o=0;o<i.length;o++)"default"!==i[o]&&s(e,t,i[o]);return n(e,t),e}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});let l=a(i(2990)),h=i(1650),c=a(i(6042)),u=a(i(8589)),d=o(i(6442)),f=a(i(6523)),p=a(i(2928)),g=a(i(2843)),m=a(i(5716)),b=i(4241),_=i(4828),y=a(i(5168)),v=o(i(8409)),w=globalThis.setImmediate||((...t)=>{let e=t.shift();(0,b.nextTick)(()=>{e(...t)})}),x={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"};class S extends _.TypedEventEmitter{static VERSION=b.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(t,e){for(let t in super(),this.options=e||{},x)void 0===this.options[t]?this.options[t]=x[t]:this.options[t]=e[t];this.log=this.options.log||(0,u.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",S.VERSION),v.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",v.default?"browser":"node"),this.log("MqttClient :: options.protocol",e.protocol),this.log("MqttClient :: options.protocolVersion",e.protocolVersion),this.log("MqttClient :: options.username",e.username),this.log("MqttClient :: options.keepalive",e.keepalive),this.log("MqttClient :: options.reconnectPeriod",e.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",e.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",e.properties?e.properties.topicAliasMaximum:void 0),this.options.clientId="string"==typeof e.clientId?e.clientId:S.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===e.protocolVersion&&e.customHandleAcks?e.customHandleAcks:(...t)=>{t[3](null,0)},this.options.writeCache||(l.default.writeToStream.cacheNumbers=!1),this.streamBuilder=t,this.messageIdProvider=void 0===this.options.messageIdProvider?new g.default:this.options.messageIdProvider,this.outgoingStore=e.outgoingStore||new f.default,this.incomingStore=e.incomingStore||new f.default,this.queueQoSZero=void 0===e.queueQoSZero||e.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,e.properties&&e.properties.topicAliasMaximum>0&&(e.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new m.default(e.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:t}=this,e=()=>{let i=t.shift();this.log("deliver :: entry %o",i);let r=null;if(!i){this._resubscribe();return}r=i.packet,this.log("deliver :: call _sendPacket for %o",r);let s=!0;r.messageId&&0!==r.messageId&&!this.messageIdProvider.register(r.messageId)&&(s=!1),s?this._sendPacket(r,t=>{i.cb&&i.cb(t),e()}):(this.log("messageId: %d has already used. The message is skipped and removed.",r.messageId),e())};this.log("connect :: sending queued packets"),e()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(t,e){e()}handleMessage(t,e){e()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let t=new h.Writable,e=l.default.parser(this.options),i=null,r=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),e.on("packet",t=>{this.log("parser :: on packet push to packets array."),r.push(t)});let s=()=>{this.log("work :: getting next packet in queue");let t=r.shift();if(t)this.log("work :: packet pulled from queue"),(0,p.default)(this,t,n);else{this.log("work :: no packets in queue");let t=i;i=null,this.log("work :: done flag is %s",!!t),t&&t()}},n=()=>{if(r.length)(0,b.nextTick)(s);else{let t=i;i=null,t()}};t._write=(t,r,n)=>{i=n,this.log("writable stream :: parsing buffer"),e.parse(t),s()},this.log("connect :: pipe stream to writable stream"),this.stream.pipe(t),this.stream.on("error",t=>{this.log("streamErrorHandler :: error",t.message),t.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",t)):this.noop(t)}),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let o={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(o.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(o.properties||(o.properties={}),this.topicAliasRecv&&(o.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(o),e.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket){let t={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(t)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(t,e,i,r){this.log("publish :: message `%s` to topic `%s`",e,t);let{options:s}=this;"function"==typeof i&&(r=i,i=null);let{qos:n,retain:o,dup:a,properties:l,cbStorePut:h}=i={qos:0,retain:!1,dup:!1,...i=i||{}};if(this._checkDisconnecting(r))return this;let c=()=>{let i=0;if((1===n||2===n)&&null===(i=this._nextId()))return this.log("No messageId left"),!1;let c={cmd:"publish",topic:t,payload:e,qos:n,retain:o,messageId:i,dup:a};switch(5===s.protocolVersion&&(c.properties=l),this.log("publish :: qos",n),n){case 1:case 2:this.outgoing[c.messageId]={volatile:!1,cb:r||this.noop},this.log("MqttClient:publish: packet cmd: %s",c.cmd),this._sendPacket(c,void 0,h);break;default:this.log("MqttClient:publish: packet cmd: %s",c.cmd),this._sendPacket(c,r,h)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!c())&&this._storeProcessingQueue.push({invoke:c,cbStorePut:i.cbStorePut,callback:r}),this}publishAsync(t,e,i){return new Promise((r,s)=>{this.publish(t,e,i,(t,e)=>{t?s(t):r(e)})})}subscribe(t,e,i){let r=this.options.protocolVersion;"function"==typeof e&&(i=e),i=i||this.noop;let s=!1,n=[];"string"==typeof t?n=t=[t]:Array.isArray(t)?n=t:"object"==typeof t&&(s=t.resubscribe,delete t.resubscribe,n=Object.keys(t));let o=d.validateTopics(n);if(null!==o)return w(i,Error(`Invalid topic ${o}`)),this;if(this._checkDisconnecting(i))return this.log("subscribe: discconecting true"),this;let a={qos:0};5===r&&(a.nl=!1,a.rap=!1,a.rh=0);let{properties:l}=e={...a,...e},h=[],c=(t,i)=>{if(i=i||e,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,t)||this._resubscribeTopics[t].qos<i.qos||s){let e={topic:t,qos:i.qos};5===r&&(e.nl=i.nl,e.rap=i.rap,e.rh=i.rh,e.properties=l),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",e.topic,e.qos),h.push(e)}};if(Array.isArray(t)?t.forEach(t=>{this.log("subscribe: array topic %s",t),c(t)}):Object.keys(t).forEach(e=>{this.log("subscribe: object topic %s, %o",e,t[e]),c(e,t[e])}),!h.length)return i(null,[]),this;let u=(t,e)=>{let i={cmd:"subscribe",subscriptions:t,messageId:e};if(l&&(i.properties=l),this.options.resubscribe){this.log("subscribe :: resubscribe true");let e=[];t.forEach(t=>{if(this.options.reconnectPeriod>0){let i={qos:t.qos};5===r&&(i.nl=t.nl||!1,i.rap=t.rap||!1,i.rh=t.rh||0,i.properties=t.properties),this._resubscribeTopics[t.topic]=i,e.push(t.topic)}}),this.messageIdToTopic[i.messageId]=e}let s=new Promise((e,r)=>{this.outgoing[i.messageId]={volatile:!0,cb(i,s){if(!i){let{granted:e}=s;for(let i=0;i<e.length;i+=1)t[i].qos=e[i]}i?r(new b.ErrorWithSubackPacket(i.message,s)):e(s)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(i),s},f=()=>{let t=this.options.subscribeBatchSize??h.length,e=[];for(let i=0;i<h.length;i+=t){let r=h.slice(i,i+t),s=this._nextId();if(null===s)return this.log("No messageId left"),!1;e.push(u(r,s))}return Promise.all(e).then(t=>{i(null,h,t.at(-1))}).catch(t=>{i(t,h,t.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!f())&&this._storeProcessingQueue.push({invoke:f,callback:i}),this}subscribeAsync(t,e){return new Promise((i,r)=>{this.subscribe(t,e,(t,e)=>{t?r(t):i(e)})})}unsubscribe(t,e,i){"string"==typeof t&&(t=[t]),"function"==typeof e&&(i=e),i=i||this.noop;let r=d.validateTopics(t);if(null!==r)return w(i,Error(`Invalid topic ${r}`)),this;if(this._checkDisconnecting(i))return this;let s=()=>{let r=this._nextId();if(null===r)return this.log("No messageId left"),!1;let s={cmd:"unsubscribe",messageId:r,unsubscriptions:[]};return"string"==typeof t?s.unsubscriptions=[t]:Array.isArray(t)&&(s.unsubscriptions=t),this.options.resubscribe&&s.unsubscriptions.forEach(t=>{delete this._resubscribeTopics[t]}),"object"==typeof e&&e.properties&&(s.properties=e.properties),this.outgoing[s.messageId]={volatile:!0,cb:i},this.log("unsubscribe: call _sendPacket"),this._sendPacket(s),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!s())&&this._storeProcessingQueue.push({invoke:s,callback:i}),this}unsubscribeAsync(t,e){return new Promise((i,r)=>{this.unsubscribe(t,e,(t,e)=>{t?r(t):i(e)})})}end(t,e,i){this.log("end :: (%s)",this.options.clientId),(null==t||"boolean"!=typeof t)&&(i=i||e,e=t,t=!1),"object"!=typeof e&&(i=i||e,e=null),this.log("end :: cb? %s",!!i),i&&"function"==typeof i||(i=this.noop);let r=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(t=>{this.outgoingStore.close(e=>{this.log("end :: closeStores: emitting end"),this.emit("end"),i&&(this.log("end :: closeStores: invoking callback with args"),i(t||e))})}),this._deferredReconnect?this._deferredReconnect():(0===this.options.reconnectPeriod||this.options.manualConnect)&&(this.disconnecting=!1)},s=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,t),this._cleanUp(t,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(r)},e)};return this.disconnecting?i():(this._clearReconnect(),this.disconnecting=!0,!t&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,s,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),s())),this}endAsync(t,e){return new Promise((i,r)=>{this.end(t,e,t=>{t?r(t):i()})})}removeOutgoingMessage(t){if(this.outgoing[t]){let{cb:e}=this.outgoing[t];this._removeOutgoingAndStoreMessage(t,()=>{e(Error("Message removed"))})}return this}reconnect(t){this.log("client reconnect");let e=()=>{t?(this.options.incomingStore=t.incomingStore,this.options.outgoingStore=t.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=e:e(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(t=>{this.outgoing[t].volatile&&"function"==typeof this.outgoing[t].cb&&(this.outgoing[t].cb(Error("Connection closed")),delete this.outgoing[t])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(t=>{"function"==typeof this.outgoing[t].cb&&(this.outgoing[t].cb(Error("Connection closed")),delete this.outgoing[t])}))}_removeTopicAliasAndRecoverTopicName(t){let e;t.properties&&(e=t.properties.topicAlias);let i=t.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",e,i),0===i.length){if(void 0===e||void 0===(i=this.topicAliasSend.getTopicByAlias(e)))return Error("Unregistered Topic Alias");t.topic=i}e&&delete t.properties.topicAlias}_checkDisconnecting(t){return this.disconnecting&&(t&&t!==this.noop?t(Error("client disconnecting")):this.emit("error",Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){this.disconnecting||this.reconnectTimer||!(this.options.reconnectPeriod>0)?this.log("_setupReconnect :: doing nothing..."):(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod))}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(t,e,i={}){if(e&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",e)),this.log("_cleanUp :: forced? %s",t),t)0===this.options.reconnectPeriod&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let t={cmd:"disconnect",...i};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(t,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),w(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}this.disconnecting||this.reconnecting||(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),e&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",e),e())}_storeAndSend(t,e,i){let r;this.log("storeAndSend :: store packet with cmd %s to outgoingStore",t.cmd);let s=t;if("publish"===s.cmd&&(s=(0,c.default)(t),r=this._removeTopicAliasAndRecoverTopicName(s)))return e&&e(r);this.outgoingStore.put(s,r=>{if(r)return e&&e(r);i(),this._writePacket(t,e)})}_applyTopicAlias(t){if(5===this.options.protocolVersion&&"publish"===t.cmd){let e;t.properties&&(e=t.properties.topicAlias);let i=t.topic.toString();if(this.topicAliasSend){if(e){if(0!==i.length&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",i,e),!this.topicAliasSend.put(i,e)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",i,e),Error("Sending Topic Alias out of range")}else 0!==i.length&&(this.options.autoAssignTopicAlias?(e=this.topicAliasSend.getAliasByTopic(i))?(t.topic="",t.properties={...t.properties,topicAlias:e},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",i,e)):(e=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(i,e),t.properties={...t.properties,topicAlias:e},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",i,e)):this.options.autoUseTopicAlias&&(e=this.topicAliasSend.getAliasByTopic(i))&&(t.topic="",t.properties={...t.properties,topicAlias:e},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",i,e)))}else if(e)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",i,e),Error("Sending Topic Alias out of range")}}_noop(t){this.log("noop ::",t)}_writePacket(t,e){this.log("_writePacket :: packet: %O",t),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",t),this.log("_writePacket :: writing to stream");let i=l.default.writeToStream(t,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",i),!i&&e&&e!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",e)):e&&(this.log("_writePacket :: invoking cb"),e())}_sendPacket(t,e,i,r){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),i=i||this.noop,e=e||this.noop;let s=this._applyTopicAlias(t);if(s){e(s);return}if(!this.connected){if("auth"===t.cmd){this._writePacket(t,e);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(t,e,i);return}if(r){this._writePacket(t,e);return}switch(t.cmd){case"publish":break;case"pubrel":this._storeAndSend(t,e,i);return;default:this._writePacket(t,e);return}switch(t.qos){case 2:case 1:this._storeAndSend(t,e,i);break;default:this._writePacket(t,e)}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(t,e,i){this.log("_storePacket :: packet: %o",t),this.log("_storePacket :: cb? %s",!!e),i=i||this.noop;let r=t;if("publish"===r.cmd){r=(0,c.default)(t);let i=this._removeTopicAliasAndRecoverTopicName(r);if(i)return e&&e(i)}let s=r.qos||0;0===s&&this.queueQoSZero||"publish"!==r.cmd?this.queue.push({packet:r,cb:e}):s>0?(e=this.outgoing[r.messageId]?this.outgoing[r.messageId].cb:null,this.outgoingStore.put(r,t=>{if(t)return e&&e(t);i()})):e&&e(Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new y.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(t=!1){this.keepaliveManager&&this.options.keepalive&&(t||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let t=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&t.length>0){if(this.options.resubscribe){if(5===this.options.protocolVersion){this.log("_resubscribe: protocolVersion 5");for(let e=0;e<t.length;e++){let i={};i[t[e]]=this._resubscribeTopics[t[e]],i.resubscribe=!0,this.subscribe(i,{properties:i[t[e]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)}else this._resubscribeTopics={}}this._firstConnection=!1}_onConnect(t){if(this.disconnected){this.emit("connect",t);return}this.connackPacket=t,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let e=()=>{let i=this.outgoingStore.createStream(),r=()=>{i.destroy(),i=null,this._flushStoreProcessingQueue(),s()},s=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",r),i.on("error",t=>{s(),this._flushStoreProcessingQueue(),this.removeListener("close",r),this.emit("error",t)});let n=()=>{let t;if(!i)return;let e=i.read(1);if(!e){i.once("readable",n);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[e.messageId]){n();return}this.disconnecting||this.reconnectTimer?i.destroy&&i.destroy():(t=this.outgoing[e.messageId]?this.outgoing[e.messageId].cb:null,this.outgoing[e.messageId]={volatile:!1,cb(e,i){t&&t(e,i),n()}},this._packetIdsDuringStoreProcessing[e.messageId]=!0,this.messageIdProvider.register(e.messageId)?this._sendPacket(e,void 0,void 0,!0):this.log("messageId: %d has already used.",e.messageId))};i.on("end",()=>{let i=!0;for(let t in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[t]){i=!1;break}this.removeListener("close",r),i?(s(),this._invokeAllStoreProcessingQueue(),this.emit("connect",t)):e()}),n()};e()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let t=this._storeProcessingQueue[0];if(t&&t.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let t of this._storeProcessingQueue)t.cbStorePut&&t.cbStorePut(Error("Connection closed")),t.callback&&t.callback(Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(t,e){delete this.outgoing[t],this.outgoingStore.del({messageId:t},(i,r)=>{e(i,r),this.messageIdProvider.deallocate(t),this._invokeStoreProcessingQueue()})}}e.default=S},9792:(t,e,i)=>{"use strict";let r,s,n;let o=i(8893),a=i(1650),l=i(9557),h=!1;e.Z=(t,e)=>{if(e.hostname=e.hostname||e.host,!e.hostname)throw Error("Could not determine host. Specify host manually.");let i="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}(e);let c=function(t,e){let i="alis"===t.protocol?"wss":"ws",r=`${i}://${t.hostname}${t.path}`;return t.port&&80!==t.port&&443!==t.port&&(r=`${i}://${t.hostname}:${t.port}${t.path}`),"function"==typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,e)),r}(e,t);return(r=e.my).connectSocket({url:c,protocols:i}),s=function(){let t=new a.Transform;return t._write=(t,e,i)=>{r.sendSocketMessage({data:t.buffer,success(){i()},fail(){i(Error())}})},t._flush=t=>{r.closeSocket({success(){t()}})},t}(),n=new l.BufferedDuplex(e,s,r),h||(h=!0,r.onSocketOpen(()=>{n.socketReady()}),r.onSocketMessage(t=>{if("string"==typeof t.data){let e=o.Buffer.from(t.data,"base64");s.push(e)}else{let e=new FileReader;e.addEventListener("load",()=>{if(e.result instanceof ArrayBuffer){s.push(o.Buffer.from(e.result));return}s.push(o.Buffer.from(e.result,"utf-8"))}),e.readAsArrayBuffer(t.data)}}),r.onSocketClose(()=>{n.end(),n.destroy()}),r.onSocketError(t=>{n.destroy(t)})),n}},8906:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=function(t,e,i=!0){return new Promise((r,s)=>{let n=c(t,e),o={connect:t=>{a(),r(n)},end:()=>{a(),r(n)},error:t=>{a(),n.end(),s(t)}};function a(){Object.keys(o).forEach(t=>{n.off(t,o[t])})}!1===i&&(o.close=()=>{o.error(Error("Couldn't connect to server"))}),Object.keys(o).forEach(t=>{n.on(t,o[t])})})};let s=r(i(8589)),n=r(i(7360)),o=r(i(5788)),a=r(i(8409));"function"!=typeof process?.nextTick&&(process.nextTick=setImmediate);let l=(0,s.default)("mqttjs"),h=null;function c(t,e){if(l("connecting to an MQTT broker..."),"object"!=typeof t||e||(e=t,t=""),e=e||{},t&&"string"==typeof t){let i=n.default.parse(t,!0),r={};if(null!=i.port&&(r.port=Number(i.port)),r.host=i.hostname,r.query=i.query,r.auth=i.auth,r.protocol=i.protocol,r.path=i.path,!(e={...r,...e}).protocol)throw Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}if(e.unixSocket=e.unixSocket||e.protocol?.includes("+unix"),e.unixSocket?e.protocol=e.protocol.replace("+unix",""):e.protocol?.startsWith("ws")||e.protocol?.startsWith("wx")||delete e.path,function(t){let e;if(t.auth){if(e=t.auth.match(/^(.+):(.+)$/)){let[,i,r]=e;t.username=i,t.password=r}else t.username=t.auth}}(e),e.query&&"string"==typeof e.query.clientId&&(e.clientId=e.query.clientId),a.default||e.unixSocket?e.socksProxy=void 0:void 0===e.socksProxy&&"undefined"!=typeof process&&(e.socksProxy=process.env.MQTTJS_SOCKS_PROXY),e.cert&&e.key){if(e.protocol){if(-1===["mqtts","wss","wxs","alis"].indexOf(e.protocol))switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;case"ali":e.protocol="alis";break;default:throw Error(`Unknown protocol for secure connection: "${e.protocol}"!`)}}else throw Error("Missing secure protocol key")}if(h||(h={},a.default||e.forceNativeWebSocket?(h.ws=i(6036).browserStreamBuilder,h.wss=i(6036).browserStreamBuilder,h.wx=i(5625).Z,h.wxs=i(5625).Z,h.ali=i(9792).Z,h.alis=i(9792).Z):(h.ws=i(6036).streamBuilder,h.wss=i(6036).streamBuilder,h.mqtt=i(3808).default,h.tcp=i(3808).default,h.ssl=i(1483).default,h.tls=h.ssl,h.mqtts=i(1483).default)),!h[e.protocol]){let t=-1!==["mqtts","wss"].indexOf(e.protocol);e.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((e,i)=>(!t||i%2!=0)&&"function"==typeof h[e])[0]}if(!1===e.clean&&!e.clientId)throw Error("Missing clientId for unclean clients");e.protocol&&(e.defaultProtocol=e.protocol);let r=new o.default(function(t){return e.servers&&(t._reconnectCount&&t._reconnectCount!==e.servers.length||(t._reconnectCount=0),e.host=e.servers[t._reconnectCount].host,e.port=e.servers[t._reconnectCount].port,e.protocol=e.servers[t._reconnectCount].protocol?e.servers[t._reconnectCount].protocol:e.defaultProtocol,e.hostname=e.host,t._reconnectCount++),l("calling streambuilder for",e.protocol),h[e.protocol](t,e)},e);return r.on("error",()=>{}),r}e.default=c},6048:function(t,e,i){"use strict";var r,s=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(r=function(t){return(r=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e})(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=r(t),o=0;o<i.length;o++)"default"!==i[o]&&s(e,t,i[o]);return n(e,t),e}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,r){p("SOCKS connection to %s:%d via %s",t,e,i);let s=new g;return b(t,e,i,s,r).catch(t=>{p("SOCKS failed: %s",t),s.destroy(t)}),s};let l=a(i(8589)),h=i(6162),c=i(6771),u=o(i(665)),d=i(1764),f=a(i(7790)),p=(0,l.default)("mqttjs:socks");class g extends h.Duplex{_flowing=!1;_socket;constructor(){super({autoDestroy:!1}),this.cork()}_start(t){if(p("proxy stream started"),(0,f.default)(!this._socket),this.destroyed){t.destroy(this.errored);return}this._socket=t,this._flowing||t.pause(),t.on("data",this._onData),t.on("end",this._onEnd),t.on("error",this._onError),t.on("close",this._onClose),t.emit("connect"),this.uncork()}_write(t,e,i){(0,f.default)(this._socket),this._socket.write(t,i)}_read(t){this._flowing=!0,this._socket?.resume?.()}_destroy(t,e){this._socket?.destroy?.(t),e(t)}_onData=t=>{(0,f.default)(this._socket),this._flowing=this.push(t),this._flowing||this._socket.pause()};_onEnd=()=>{p("proxy stream received EOF"),this.push(null)};_onClose=()=>{p("proxy stream closed"),this.destroy()};_onError=t=>{p("proxy stream died with error %s",t),this.destroy(t)}}function m(t){try{return void 0===t.code&&(t.code="SOCKS"),t}catch{return t}}async function b(t,e,i,r,s={}){let n=s.lookup??(0,d.promisify)(u.lookup),[o,a]=function(t){let e=new URL(t);if(e.pathname||e.hash||e.search)throw m(Error("bad SOCKS URL"));let[i,r]=function(t){switch(t){case"socks5h:":return[5,!0];case"socks4a:":return[4,!0];case"socks5:":return[5,!1];case"socks4:":return[4,!1];default:return[void 0,!1]}}(e.protocol);if(!i)throw m(Error("bad SOCKS URL: invalid protocol"));let s=parseInt(e.port,10);if(Number.isNaN(s))throw m(Error("bad SOCKS URL: invalid port"));return[{host:e.hostname,port:s,type:i},r]}(i);a||(p("resolving %s locally",t),t=(await n(t,{family:4===o.type?4:0})).address),p("establishing SOCKS%d connection to %s:%d via %s:%d",o.type,t,e,o.host,o.port);let l=new c.SocksClient({command:"connect",destination:{host:t,port:e},proxy:{...o},timeout:s.timeout});l.connect(),l.on("established",({socket:t})=>r._start(t)),l.on("error",t=>{p("SOCKS failed: %s",t),r.destroy(m(t))})}},3808:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});let s=r(i(8216)),n=r(i(8589)),o=r(i(6048)),a=(0,n.default)("mqttjs:tcp");e.default=(t,e)=>{if(e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",e.socksProxy)return(0,o.default)(e.hostname,e.port,e.socksProxy,{timeout:e.socksTimeout});let{port:i,path:r}=e,n=e.hostname;return a("port %d and host %s",i,n),s.default.createConnection({port:i,host:n,path:r})}},1483:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});let s=i(2452),n=r(i(8216)),o=r(i(8589)),a=r(i(6048)),l=(0,o.default)("mqttjs:tls");e.default=(t,e)=>{e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",0===n.default.isIP(e.host)&&(e.servername=e.host),e.rejectUnauthorized=!1!==e.rejectUnauthorized,delete e.path,l("port %d host %s rejectUnauthorized %b",e.port,e.host,e.rejectUnauthorized);let i=function(t){let{host:e,port:i,socksProxy:r,...n}=t;if(void 0!==r){let o=(0,a.default)(e,i,r,{timeout:t.socksTimeout});return(0,s.connect)({...n,socket:o})}return(0,s.connect)(t)}(e);function r(r){e.rejectUnauthorized&&t.emit("error",r),i.end()}return i.on("secureConnect",()=>{e.rejectUnauthorized&&!i.authorized?i.emit("error",Error("TLS not authorized")):i.removeListener("error",r)}),i.on("error",r),i}},6036:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;let s=i(8893),n=r(i(3154)),o=r(i(8589)),a=i(1650),l=r(i(8409)),h=i(9557),c=(0,o.default)("mqttjs:ws"),u=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function d(t,e){let i=`${t.protocol}://${t.hostname}:${t.port}${t.path}`;return"function"==typeof t.transformWsUrl&&(i=t.transformWsUrl(i,t,e)),i}function f(t){return t.port||("wss"===t.protocol?t.port=443:t.port=80),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={}),l.default||t.forceNativeWebSocket||"wss"!==t.protocol||u.forEach(e=>{Object.prototype.hasOwnProperty.call(t,e)&&!Object.prototype.hasOwnProperty.call(t.wsOptions,e)&&(t.wsOptions[e]=t[e])}),t}e.streamBuilder=(t,e)=>{c("streamBuilder");let i=f(e);i.hostname=i.hostname||i.host||"localhost";let r=d(i,t),s=function(t,e,i){c("createWebSocket"),c(`protocol: ${i.protocolId} ${i.protocolVersion}`);let r="MQIsdp"===i.protocolId&&3===i.protocolVersion?"mqttv3.1":"mqtt";return c(`creating new Websocket for url: ${e} and protocol: ${r}`),i.createWebsocket?i.createWebsocket(e,[r],i):new n.default(e,[r],i.wsOptions)}(0,r,i),o=n.default.createWebSocketStream(s,i.wsOptions);return o.url=r,s.on("close",()=>{o.destroy()}),o},e.browserStreamBuilder=(t,e)=>{let i;c("browserStreamBuilder");let r=function(t){let e=f(t);if(e.hostname||(e.hostname=e.host),!e.hostname){if("undefined"==typeof document)throw Error("Could not determine host. Specify host manually.");let t=new URL(document.URL);e.hostname=t.hostname,e.port||(e.port=Number(t.port))}return void 0===e.objectMode&&(e.objectMode=!(!0===e.binary||void 0===e.binary)),e}(e).browserBufferSize||524288,n=e.browserBufferTimeout||1e3,o=!e.objectMode,l=function(t,e){let i;let r="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt",s=d(e,t);return(i=e.createWebsocket?e.createWebsocket(s,[r],e):new WebSocket(s,[r])).binaryType="arraybuffer",i}(t,e),u=function(t,e,i){let r=new a.Transform({objectMode:t.objectMode});return r._write=e,r._flush=i,r}(e,function t(e,i,a){if(l.bufferedAmount>r){setTimeout(t,n,e,i,a);return}o&&"string"==typeof e&&(e=s.Buffer.from(e,"utf8"));try{l.send(e)}catch(t){return a(t)}a()},function(t){l.close(),t()});e.objectMode||(u._writev=h.writev.bind(u)),u.on("close",()=>{l.close()});let p=void 0!==l.addEventListener;function g(){c("WebSocket onOpen"),i instanceof h.BufferedDuplex&&i.socketReady()}function m(t){c("WebSocket onClose",t),i.end(),i.destroy()}function b(t){c("WebSocket onError",t);let e=Error("WebSocket error");e.event=t,i.destroy(e)}async function _(t){if(!u||!u.readable||!u.writable)return;let{data:e}=t;e instanceof ArrayBuffer?e=s.Buffer.from(e):e instanceof Blob?e=s.Buffer.from(await new Response(e).arrayBuffer()):e=s.Buffer.from(e,"utf8"),u.push(e)}return l.readyState===l.OPEN?(i=u).socket=l:(i=new h.BufferedDuplex(e,u,l),p?l.addEventListener("open",g):l.onopen=g),p?(l.addEventListener("close",m),l.addEventListener("error",b),l.addEventListener("message",_)):(l.onclose=m,l.onerror=b,l.onmessage=_),i}},5625:(t,e,i)=>{"use strict";let r,s,n;let o=i(8893),a=i(1650),l=i(9557);e.Z=(t,e)=>{if(e.hostname=e.hostname||e.host,!e.hostname)throw Error("Could not determine host. Specify host manually.");let i="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}(e);let h=function(t,e){let i="wxs"===t.protocol?"wss":"ws",r=`${i}://${t.hostname}${t.path}`;return t.port&&80!==t.port&&443!==t.port&&(r=`${i}://${t.hostname}:${t.port}${t.path}`),"function"==typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,e)),r}(e,t);r=wx.connectSocket({url:h,protocols:[i]}),s=function(){let t=new a.Transform;return t._write=(t,e,i)=>{r.send({data:t.buffer,success(){i()},fail(t){i(Error(t))}})},t._flush=t=>{r.close({success(){t()}})},t}(),(n=new l.BufferedDuplex(e,s,r))._destroy=(t,e)=>{r.close({success(){e&&e(t)}})};let c=n.destroy;return n.destroy=(t,e)=>(n.destroy=c,setTimeout(()=>{r.close({fail(){n._destroy(t,e)}})},0),n),r.onOpen(()=>{n.socketReady()}),r.onMessage(t=>{let{data:e}=t;e=e instanceof ArrayBuffer?o.Buffer.from(e):o.Buffer.from(e,"utf8"),s.push(e)}),r.onClose(()=>{n.emit("close"),n.end(),n.destroy()}),r.onError(t=>{let e=Error(t.errMsg);n.destroy(e)}),n}},2843:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{nextId;constructor(){this.nextId=Math.max(1,Math.floor(65535*Math.random()))}allocate(){let t=this.nextId++;return 65536===this.nextId&&(this.nextId=1),t}getLastAllocated(){return 1===this.nextId?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}}e.default=i},2511:function(t,e,i){"use strict";var r,s=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(r=function(t){return(r=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e})(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=r(t),o=0;o<i.length;o++)"default"!==i[o]&&s(e,t,i[o]);return n(e,t),e});Object.defineProperty(e,"__esModule",{value:!0});let a=i(752),l=o(i(8409)),h={set:a.setInterval,clear:a.clearInterval},c={set:(t,e)=>setInterval(t,e),clear:t=>clearInterval(t)};e.default=t=>{switch(t){case"native":return c;case"worker":return h;default:return!l.default||l.isWebWorker||l.isReactNativeBrowser?c:h}}},3959:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;let r=i(4241);e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},e.default=(t,i)=>{let{messageId:s}=i,n=i.cmd,o=null,a=t.outgoing[s]?t.outgoing[s].cb:null,l=null;if(!a){t.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(t.log("_handleAck :: packet type",n),n){case"pubcomp":case"puback":{let n=i.reasonCode;n&&n>0&&16!==n?(l=new r.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[n]}`,n),t._removeOutgoingAndStoreMessage(s,()=>{a(l,i)})):t._removeOutgoingAndStoreMessage(s,a);break}case"pubrec":{o={cmd:"pubrel",qos:2,messageId:s};let n=i.reasonCode;n&&n>0&&16!==n?(l=new r.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[n]}`,n),t._removeOutgoingAndStoreMessage(s,()=>{a(l,i)})):t._sendPacket(o);break}case"suback":{delete t.outgoing[s],t.messageIdProvider.deallocate(s);let r=i.granted;for(let i=0;i<r.length;i++){let n=r[i];if((128&n)!=0){(l=Error(`Subscribe error: ${e.ReasonCodes[n]}`)).code=n;let i=t.messageIdToTopic[s];i&&i.forEach(e=>{delete t._resubscribeTopics[e]})}}delete t.messageIdToTopic[s],t._invokeStoreProcessingQueue(),a(l,i);break}case"unsuback":delete t.outgoing[s],t.messageIdProvider.deallocate(s),t._invokeStoreProcessingQueue(),a(null,i);break;default:t.emit("error",Error("unrecognized packet type"))}t.disconnecting&&0===Object.keys(t.outgoing).length&&t.emit("outgoingEmpty")}},7210:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=i(4241),s=i(3959);e.default=(t,e)=>{let{options:i}=t,n=i.protocolVersion,o=5===n?e.reasonCode:e.returnCode;if(5!==n){let e=new r.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${n}`,o);t.emit("error",e);return}t.handleAuth(e,(e,i)=>{if(e){t.emit("error",e);return}if(24===o)t.reconnecting=!1,t._sendPacket(i);else{let e=new r.ErrorWithReasonCode(`Connection refused: ${s.ReasonCodes[o]}`,o);t.emit("error",e)}})}},4454:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});let s=i(3959),n=r(i(5884)),o=i(4241);e.default=(t,e)=>{t.log("_handleConnack");let{options:i}=t,r=5===i.protocolVersion?e.reasonCode:e.returnCode;if(clearTimeout(t.connackTimer),delete t.topicAliasSend,e.properties){if(e.properties.topicAliasMaximum){if(e.properties.topicAliasMaximum>65535){t.emit("error",Error("topicAliasMaximum from broker is out of range"));return}e.properties.topicAliasMaximum>0&&(t.topicAliasSend=new n.default(e.properties.topicAliasMaximum))}e.properties.serverKeepAlive&&i.keepalive&&(i.keepalive=e.properties.serverKeepAlive),e.properties.maximumPacketSize&&(i.properties||(i.properties={}),i.properties.maximumPacketSize=e.properties.maximumPacketSize)}if(0===r)t.reconnecting=!1,t._onConnect(e);else if(r>0){let e=new o.ErrorWithReasonCode(`Connection refused: ${s.ReasonCodes[r]}`,r);t.emit("error",e),t.options.reconnectOnConnackError&&t._cleanUp(!0)}}},2928:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});let s=r(i(7254)),n=r(i(7210)),o=r(i(4454)),a=r(i(3959)),l=r(i(4745));e.default=(t,e,i)=>{let{options:r}=t;if(5===r.protocolVersion&&r.properties&&r.properties.maximumPacketSize&&r.properties.maximumPacketSize<e.length)return t.emit("error",Error(`exceeding packets size ${e.cmd}`)),t.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),t;switch(t.log("_handlePacket :: emitting packetreceive"),t.emit("packetreceive",e),e.cmd){case"publish":(0,s.default)(t,e,i);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":t.reschedulePing(),(0,a.default)(t,e),i();break;case"pubrel":t.reschedulePing(),(0,l.default)(t,e,i);break;case"connack":(0,o.default)(t,e),i();break;case"auth":t.reschedulePing(),(0,n.default)(t,e),i();break;case"pingresp":t.log("_handlePacket :: received pingresp"),t.reschedulePing(!0),i();break;case"disconnect":t.emit("disconnect",e),i();break;default:t.log("_handlePacket :: unknown command"),i()}}},7254:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let i=[0,16,128,131,135,144,145,151,153];e.default=(t,e,r)=>{t.log("handlePublish: packet %o",e),r=void 0!==r?r:t.noop;let s=e.topic.toString(),n=e.payload,{qos:o}=e,{messageId:a}=e,{options:l}=t;if(5===t.options.protocolVersion){let i;if(e.properties&&(i=e.properties.topicAlias),void 0!==i){if(0===s.length){if(i>0&&i<=65535){let e=t.topicAliasRecv.getTopicByAlias(i);if(e)s=e,t.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",s,i);else{t.log("handlePublish :: unregistered topic alias. alias: %d",i),t.emit("error",Error("Received unregistered Topic Alias"));return}}else{t.log("handlePublish :: topic alias out of range. alias: %d",i),t.emit("error",Error("Received Topic Alias is out of range"));return}}else if(t.topicAliasRecv.put(s,i))t.log("handlePublish :: registered topic: %s - alias: %d",s,i);else{t.log("handlePublish :: topic alias out of range. alias: %d",i),t.emit("error",Error("Received Topic Alias is out of range"));return}}}switch(t.log("handlePublish: qos %d",o),o){case 2:l.customHandleAcks(s,n,e,(s,n)=>("number"==typeof s&&(n=s,s=null),s)?t.emit("error",s):-1===i.indexOf(n)?t.emit("error",Error("Wrong reason code for pubrec")):void(n?t._sendPacket({cmd:"pubrec",messageId:a,reasonCode:n},r):t.incomingStore.put(e,()=>{t._sendPacket({cmd:"pubrec",messageId:a},r)})));break;case 1:l.customHandleAcks(s,n,e,(o,l)=>("number"==typeof o&&(l=o,o=null),o)?t.emit("error",o):-1===i.indexOf(l)?t.emit("error",Error("Wrong reason code for puback")):void(l||t.emit("message",s,n,e),t.handleMessage(e,e=>{if(e)return r&&r(e);t._sendPacket({cmd:"puback",messageId:a,reasonCode:l},r)})));break;case 0:t.emit("message",s,n,e),t.handleMessage(e,r);break;default:t.log("handlePublish: unknown QoS. Doing nothing.")}}},4745:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(t,e,i)=>{t.log("handling pubrel packet");let r=void 0!==i?i:t.noop,{messageId:s}=e,n={cmd:"pubcomp",messageId:s};t.incomingStore.get(e,(e,i)=>{e?t._sendPacket(n,r):(t.emit("message",i.topic,i.payload,i),t.handleMessage(i,e=>{if(e)return r(e);t.incomingStore.del(i,t.noop),t._sendPacket(n,r)}))})}},8409:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;let i=()=>!!("object"==typeof self&&self?.constructor?.name?.includes("WorkerGlobalScope")&&"undefined"==typeof Deno),r="undefined"!=typeof window&&("undefined"!=typeof navigator&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&process?.versions?!Object.prototype.hasOwnProperty.call(process.versions,"electron"):void 0!==window.document)||i()||"undefined"!=typeof navigator&&"ReactNative"===navigator.product;e.isWebWorker=i(),e.isReactNativeBrowser="undefined"!=typeof navigator&&"ReactNative"===navigator.product,e.default=r},4241:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.ErrorWithSubackPacket=e.ErrorWithReasonCode=void 0,e.applyMixin=function(t,e,i=!1){let r=[e];for(;;){let t=Object.getPrototypeOf(r[0]);if(t?.prototype)r.unshift(t);else break}for(let e of r)for(let r of Object.getOwnPropertyNames(e.prototype))(i||"constructor"!==r)&&Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r)??Object.create(null))};class r extends Error{code;constructor(t,e){super(t),this.code=e,Object.setPrototypeOf(this,r.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}}e.ErrorWithReasonCode=r;class s extends Error{packet;constructor(t,e){super(t),this.packet=e,Object.setPrototypeOf(this,s.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}}e.ErrorWithSubackPacket=s,e.nextTick="function"==typeof process?.nextTick?process.nextTick:t=>{setTimeout(t,0)},e.MQTTJS_VERSION=i(1624).version},6523:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=i(1650),s={objectMode:!0},n={clean:!0};class o{options;_inflights;constructor(t){this.options=t||{},this.options={...n,...t},this._inflights=new Map}put(t,e){return this._inflights.set(t.messageId,t),e&&e(),this}createStream(){let t=new r.Readable(s),e=[],i=!1,n=0;return this._inflights.forEach((t,i)=>{e.push(t)}),t._read=()=>{!i&&n<e.length?t.push(e[n++]):t.push(null)},t.destroy=e=>{if(!i)return i=!0,setTimeout(()=>{t.emit("close")},0),t},t}del(t,e){let i=this._inflights.get(t.messageId);return i?(this._inflights.delete(t.messageId),e(null,i)):e&&e(Error("missing packet")),this}get(t,e){let i=this._inflights.get(t.messageId);return i?e(null,i):e&&e(Error("missing packet")),this}close(t){this.options.clean&&(this._inflights=null),t&&t()}}e.default=o},5716:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{aliasToTopic;max;length;constructor(t){this.aliasToTopic={},this.max=t}put(t,e){return 0!==e&&!(e>this.max)&&(this.aliasToTopic[e]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}}e.default=i},5884:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=i(7168),s=i(1925);class n{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(t){t>0&&(this.aliasToTopic=new r.LRUCache({max:t}),this.topicToAlias={},this.numberAllocator=new s.NumberAllocator(1,t),this.max=t,this.length=0)}put(t,e){if(0===e||e>this.max)return!1;let i=this.aliasToTopic.get(e);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(e,t),this.topicToAlias[t]=e,this.numberAllocator.use(e),this.length=this.aliasToTopic.size,!0}getTopicByAlias(t){return this.aliasToTopic.get(t)}getAliasByTopic(t){let e=this.topicToAlias[t];return void 0!==e&&this.aliasToTopic.get(e),e}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}}e.default=n},6953:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=i(1925);class s{numberAllocator;lastId;constructor(){this.numberAllocator=new r.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(t){return this.numberAllocator.use(t)}deallocate(t){this.numberAllocator.free(t)}clear(){this.numberAllocator.clear()}}e.default=s},6442:(t,e)=>{"use strict";function i(t){let e=t.split("/");for(let t=0;t<e.length;t++)if("+"!==e[t]){if("#"===e[t])return t===e.length-1;if(-1!==e[t].indexOf("+")||-1!==e[t].indexOf("#"))return!1}return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopic=i,e.validateTopics=function(t){if(0===t.length)return"empty_topic_list";for(let e=0;e<t.length;e++)if(!i(t[e]))return t[e];return null}},2920:function(t,e,i){"use strict";var r,s=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(r=function(t){return(r=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e})(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=r(t),o=0;o<i.length;o++)"default"!==i[o]&&s(e,t,i[o]);return n(e,t),e}),a=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||s(e,t,i)},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;let h=l(i(5788));e.MqttClient=h.default;let c=l(i(2843));e.DefaultMessageIdProvider=c.default;let u=l(i(6953));e.UniqueMessageIdProvider=u.default;let d=l(i(6523));e.Store=d.default;let f=o(i(8906));e.connect=f.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return f.connectAsync}});let p=l(i(5168));e.KeepaliveManager=p.default,e.Client=h.default,a(i(5788),e),a(i(4241),e);var g=i(3959);Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return g.ReasonCodes}})},7914:t=>{function e(t,e,i,r){return Math.round(t/i)+" "+r+(e>=1.5*i?"s":"")}t.exports=function(t,i){i=i||{};var r,s,n=typeof t;if("string"===n&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var i=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return 864e5*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(t);if("number"===n&&isFinite(t))return i.long?(r=Math.abs(t))>=864e5?e(t,r,864e5,"day"):r>=36e5?e(t,r,36e5,"hour"):r>=6e4?e(t,r,6e4,"minute"):r>=1e3?e(t,r,1e3,"second"):t+" ms":(s=Math.abs(t))>=864e5?Math.round(t/864e5)+"d":s>=36e5?Math.round(t/36e5)+"h":s>=6e4?Math.round(t/6e4)+"m":s>=1e3?Math.round(t/1e3)+"s":t+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},1925:(t,e,i)=>{let r=i(4397);t.exports.NumberAllocator=r},4397:(t,e,i)=>{"use strict";let r=i(5433).hU,s=i(8589)("number-allocator:trace"),n=i(8589)("number-allocator:error");function o(t,e){this.low=t,this.high=e}function a(t,e){if(!(this instanceof a))return new a(t,e);this.min=t,this.max=e,this.ss=new r([],(t,e)=>t.compare(e)),s("Create"),this.clear()}o.prototype.equals=function(t){return this.low===t.low&&this.high===t.high},o.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0},a.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},a.prototype.alloc=function(){if(0===this.ss.size())return s("alloc():empty"),null;let t=this.ss.begin(),e=t.pointer.low,i=t.pointer.high;return e+1<=i?this.ss.updateKeyByIterator(t,new o(e+1,i)):this.ss.eraseElementByPos(0),s("alloc():"+e),e},a.prototype.use=function(t){let e=new o(t,t),i=this.ss.lowerBound(e);if(!i.equals(this.ss.end())){let r=i.pointer.low,n=i.pointer.high;return i.pointer.equals(e)?(this.ss.eraseElementByIterator(i),s("use():"+t),!0):!(r>t)&&(r===t?this.ss.updateKeyByIterator(i,new o(r+1,n)):n===t?this.ss.updateKeyByIterator(i,new o(r,n-1)):(this.ss.updateKeyByIterator(i,new o(t+1,n)),this.ss.insert(new o(r,t-1))),s("use():"+t),!0)}return s("use():failed"),!1},a.prototype.free=function(t){if(t<this.min||t>this.max){n("free():"+t+" is out of range");return}let e=new o(t,t),i=this.ss.upperBound(e);if(i.equals(this.ss.end())){if(i.equals(this.ss.begin())){this.ss.insert(e);return}i.pre();let r=i.pointer.high;i.pointer.high+1===t?this.ss.updateKeyByIterator(i,new o(r,t)):this.ss.insert(e)}else if(i.equals(this.ss.begin())){if(t+1===i.pointer.low){let e=i.pointer.high;this.ss.updateKeyByIterator(i,new o(t,e))}else this.ss.insert(e)}else{let r=i.pointer.low,s=i.pointer.high;i.pre();let n=i.pointer.low;i.pointer.high+1===t?t+1===r?(this.ss.eraseElementByIterator(i),this.ss.updateKeyByIterator(i,new o(n,s))):this.ss.updateKeyByIterator(i,new o(n,t)):t+1===r?(this.ss.eraseElementByIterator(i.next()),this.ss.insert(new o(t,s))):this.ss.insert(e)}s("free():"+t)},a.prototype.clear=function(){s("clear()"),this.ss.clear(),this.ss.insert(new o(this.min,this.max))},a.prototype.intervalCount=function(){return this.ss.size()},a.prototype.dump=function(){for(let t of(console.log("length:"+this.ss.size()),this.ss))console.log(t)},t.exports=a},3407:t=>{"use strict";"undefined"!=typeof process&&process.version&&0!==process.version.indexOf("v0.")&&(0!==process.version.indexOf("v1.")||0===process.version.indexOf("v1.8."))?t.exports=process:t.exports={nextTick:function(t,e,i,r){if("function"!=typeof t)throw TypeError('"callback" argument must be a function');var s,n,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,i)});case 4:return process.nextTick(function(){t.call(null,e,i,r)});default:for(s=Array(o-1),n=0;n<s.length;)s[n++]=arguments[n];return process.nextTick(function(){t.apply(null,s)})}}}},363:t=>{t.exports=global.process},4378:(t,e,i)=>{"use strict";let r;let{SymbolDispose:s}=i(4912),{AbortError:n,codes:o}=i(3934),{isNodeStream:a,isWebStream:l,kControllerErrorFunction:h}=i(5302),c=i(7398),{ERR_INVALID_ARG_TYPE:u}=o,d=(t,e)=>{if("object"!=typeof t||!("aborted"in t))throw new u(e,"AbortSignal",t)};t.exports.addAbortSignal=function(e,i){if(d(e,"signal"),!a(i)&&!l(i))throw new u("stream",["ReadableStream","WritableStream","Stream"],i);return t.exports.addAbortSignalNoValidate(e,i)},t.exports.addAbortSignalNoValidate=function(t,e){if("object"!=typeof t||!("aborted"in t))return e;let o=a(e)?()=>{e.destroy(new n(void 0,{cause:t.reason}))}:()=>{e[h](new n(void 0,{cause:t.reason}))};return t.aborted?o():c(e,(r=r||i(5241).addAbortListener)(t,o)[s]),e}},2854:(t,e,i)=>{"use strict";let{StringPrototypeSlice:r,SymbolIterator:s,TypedArrayPrototypeSet:n,Uint8Array:o}=i(4912),{Buffer:a}=i(8893),{inspect:l}=i(5241);t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){let e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}unshift(t){let e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}shift(){if(0===this.length)return;let t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(0===this.length)return"";let e=this.head,i=""+e.data;for(;null!==(e=e.next);)i+=t+e.data;return i}concat(t){if(0===this.length)return a.alloc(0);let e=a.allocUnsafe(t>>>0),i=this.head,r=0;for(;i;)n(e,i.data,r),r+=i.data.length,i=i.next;return e}consume(t,e){let i=this.head.data;if(t<i.length){let e=i.slice(0,t);return this.head.data=i.slice(t),e}return t===i.length?this.shift():e?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[s](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let e="",i=this.head,s=0;do{let n=i.data;if(t>n.length)e+=n,t-=n.length;else{t===n.length?(e+=n,++s,i.next?this.head=i.next:this.head=this.tail=null):(e+=r(n,0,t),this.head=i,i.data=r(n,t));break}++s}while(null!==(i=i.next));return this.length-=s,e}_getBuffer(t){let e=a.allocUnsafe(t),i=t,r=this.head,s=0;do{let a=r.data;if(t>a.length)n(e,a,i-t),t-=a.length;else{t===a.length?(n(e,a,i-t),++s,r.next?this.head=r.next:this.head=this.tail=null):(n(e,new o(a.buffer,a.byteOffset,t),i-t),this.head=r,r.data=a.slice(t));break}++s}while(null!==(r=r.next));return this.length-=s,e}[Symbol.for("nodejs.util.inspect.custom")](t,e){return l(this,{...e,depth:0,customInspect:!1})}}},4772:(t,e,i)=>{"use strict";let{pipeline:r}=i(5957),s=i(1146),{destroyer:n}=i(6420),{isNodeStream:o,isReadable:a,isWritable:l,isWebStream:h,isTransformStream:c,isWritableStream:u,isReadableStream:d}=i(5302),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:g}}=i(3934),m=i(7398);t.exports=function(...t){let e,i,b,_,y;if(0===t.length)throw new g("streams");if(1===t.length)return s.from(t[0]);let v=[...t];if("function"==typeof t[0]&&(t[0]=s.from(t[0])),"function"==typeof t[t.length-1]){let e=t.length-1;t[e]=s.from(t[e])}for(let e=0;e<t.length;++e)if(o(t[e])||h(t[e])){if(e<t.length-1&&!(a(t[e])||d(t[e])||c(t[e])))throw new p(`streams[${e}]`,v[e],"must be readable");if(e>0&&!(l(t[e])||u(t[e])||c(t[e])))throw new p(`streams[${e}]`,v[e],"must be writable")}let w=t[0],x=r(t,function(t){let e=_;_=null,e?e(t):t?y.destroy(t):k||S||y.destroy()}),S=!!(l(w)||u(w)||c(w)),k=!!(a(x)||d(x)||c(x));if(y=new s({writableObjectMode:!!(null!=w&&w.writableObjectMode),readableObjectMode:!!(null!=x&&x.readableObjectMode),writable:S,readable:k}),S){if(o(w))y._write=function(t,i,r){w.write(t,i)?r():e=r},y._final=function(t){w.end(),i=t},w.on("drain",function(){if(e){let t=e;e=null,t()}});else if(h(w)){let t=(c(w)?w.writable:w).getWriter();y._write=async function(e,i,r){try{await t.ready,t.write(e).catch(()=>{}),r()}catch(t){r(t)}},y._final=async function(e){try{await t.ready,t.close().catch(()=>{}),i=e}catch(t){e(t)}}}m(c(x)?x.readable:x,()=>{if(i){let t=i;i=null,t()}})}if(k){if(o(x))x.on("readable",function(){if(b){let t=b;b=null,t()}}),x.on("end",function(){y.push(null)}),y._read=function(){for(;;){let t=x.read();if(null===t){b=y._read;return}if(!y.push(t))return}};else if(h(x)){let t=(c(x)?x.readable:x).getReader();y._read=async function(){for(;;)try{let{value:e,done:i}=await t.read();if(!y.push(e))return;if(i){y.push(null);return}}catch{return}}}}return y._destroy=function(t,r){t||null===_||(t=new f),b=null,e=null,i=null,null===_?r(t):(_=r,o(x)&&n(x,t))},y}},6420:(t,e,i)=>{"use strict";let r=i(363),{aggregateTwoErrors:s,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:o}=i(3934),{Symbol:a}=i(4912),{kIsDestroyed:l,isDestroyed:h,isFinished:c,isServerRequest:u}=i(5302),d=a("kDestroy"),f=a("kConstruct");function p(t,e,i){t&&(t.stack,e&&!e.errored&&(e.errored=t),i&&!i.errored&&(i.errored=t))}function g(t,e,i){let s=!1;function n(e){if(s)return;s=!0;let n=t._readableState,o=t._writableState;p(e,o,n),o&&(o.closed=!0),n&&(n.closed=!0),"function"==typeof i&&i(e),e?r.nextTick(m,t,e):r.nextTick(b,t)}try{t._destroy(e||null,n)}catch(t){n(t)}}function m(t,e){_(t,e),b(t)}function b(t){let e=t._readableState,i=t._writableState;i&&(i.closeEmitted=!0),e&&(e.closeEmitted=!0),(null!=i&&i.emitClose||null!=e&&e.emitClose)&&t.emit("close")}function _(t,e){let i=t._readableState,r=t._writableState;null!=r&&r.errorEmitted||null!=i&&i.errorEmitted||(r&&(r.errorEmitted=!0),i&&(i.errorEmitted=!0),t.emit("error",e))}function y(t,e,i){let s=t._readableState,n=t._writableState;if(null!=n&&n.destroyed||null!=s&&s.destroyed)return this;null!=s&&s.autoDestroy||null!=n&&n.autoDestroy?t.destroy(e):e&&(e.stack,n&&!n.errored&&(n.errored=e),s&&!s.errored&&(s.errored=e),i?r.nextTick(_,t,e):_(t,e))}function v(t){let e=!1;function i(i){if(e){y(t,null!=i?i:new n);return}e=!0;let s=t._readableState,o=t._writableState,a=o||s;s&&(s.constructed=!0),o&&(o.constructed=!0),a.destroyed?t.emit(d,i):i?y(t,i,!0):r.nextTick(w,t)}try{t._construct(t=>{r.nextTick(i,t)})}catch(t){r.nextTick(i,t)}}function w(t){t.emit(f)}function x(t){return(null==t?void 0:t.setHeader)&&"function"==typeof t.abort}function S(t){t.emit("close")}function k(t,e){t.emit("error",e),r.nextTick(S,t)}t.exports={construct:function(t,e){if("function"!=typeof t._construct)return;let i=t._readableState,s=t._writableState;i&&(i.constructed=!1),s&&(s.constructed=!1),t.once(f,e),t.listenerCount(f)>1||r.nextTick(v,t)},destroyer:function(t,e){!(!t||h(t))&&(e||c(t)||(e=new o),u(t)?(t.socket=null,t.destroy(e)):x(t)?t.abort():x(t.req)?t.req.abort():"function"==typeof t.destroy?t.destroy(e):"function"==typeof t.close?t.close():e?r.nextTick(k,t,e):r.nextTick(S,t),t.destroyed||(t[l]=!0))},destroy:function(t,e){let i=this._readableState,r=this._writableState,n=r||i;return null!=r&&r.destroyed||null!=i&&i.destroyed?"function"==typeof e&&e():(p(t,r,i),r&&(r.destroyed=!0),i&&(i.destroyed=!0),n.constructed?g(this,t,e):this.once(d,function(i){g(this,s(i,t),e)})),this},undestroy:function(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=!1===t.readable,t.endEmitted=!1===t.readable),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=!1===e.writable,e.ending=!1===e.writable,e.finished=!1===e.writable)},errorOrDestroy:y}},1146:(t,e,i)=>{"use strict";let r,s;let{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:a,ObjectSetPrototypeOf:l}=i(4912);t.exports=u;let h=i(8652),c=i(3909);l(u.prototype,h.prototype),l(u,h);{let t=a(c.prototype);for(let e=0;e<t.length;e++){let i=t[e];u.prototype[i]||(u.prototype[i]=c.prototype[i])}}function u(t){if(!(this instanceof u))return new u(t);h.call(this,t),c.call(this,t),t?(this.allowHalfOpen=!1!==t.allowHalfOpen,!1===t.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===t.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function d(){return void 0===r&&(r={}),r}n(u.prototype,{writable:{__proto__:null,...o(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(c.prototype,"writableLength")},writableFinished:{__proto__:null,...o(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}}),u.fromWeb=function(t,e){return d().newStreamDuplexFromReadableWritablePair(t,e)},u.toWeb=function(t){return d().newReadableWritablePairFromDuplex(t)},u.from=function(t){return s||(s=i(6489)),s(t,"body")}},6489:(t,e,i)=>{"use strict";let r=i(363),s=i(8893),{isReadable:n,isWritable:o,isIterable:a,isNodeStream:l,isReadableNodeStream:h,isWritableNodeStream:c,isDuplexNodeStream:u,isReadableStream:d,isWritableStream:f}=i(5302),p=i(7398),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:b}}=i(3934),{destroyer:_}=i(6420),y=i(1146),v=i(8652),w=i(3909),{createDeferredPromise:x}=i(5241),S=i(2594),k=globalThis.Blob||s.Blob,E=void 0!==k?function(t){return t instanceof k}:function(t){return!1},M=globalThis.AbortController||i(1172).AbortController,{FunctionPrototypeCall:I}=i(4912);class T extends y{constructor(t){super(t),(null==t?void 0:t.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(null==t?void 0:t.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function O(t){let e,i,r,s,a;let l=t.readable&&"function"!=typeof t.readable.read?v.wrap(t.readable):t.readable,h=t.writable,c=!!n(l),u=!!o(h);function d(t){let e=s;s=null,e?e(t):t&&a.destroy(t)}return a=new T({readableObjectMode:!!(null!=l&&l.readableObjectMode),writableObjectMode:!!(null!=h&&h.writableObjectMode),readable:c,writable:u}),u&&(p(h,t=>{u=!1,t&&_(l,t),d(t)}),a._write=function(t,i,r){h.write(t,i)?r():e=r},a._final=function(t){h.end(),i=t},h.on("drain",function(){if(e){let t=e;e=null,t()}}),h.on("finish",function(){if(i){let t=i;i=null,t()}})),c&&(p(l,t=>{c=!1,t&&_(l,t),d(t)}),l.on("readable",function(){if(r){let t=r;r=null,t()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let t=l.read();if(null===t){r=a._read;return}if(!a.push(t))return}}),a._destroy=function(t,n){t||null===s||(t=new g),r=null,e=null,i=null,null===s?n(t):(s=n,_(h,t),_(l,t))},a}t.exports=function t(e,i){if(u(e))return e;if(h(e))return O({readable:e});if(c(e))return O({writable:e});if(l(e))return O({writable:!1,readable:!1});if(d(e))return O({readable:v.fromWeb(e)});if(f(e))return O({writable:w.fromWeb(e)});if("function"==typeof e){let{value:t,write:s,final:n,destroy:o}=function(t){let{promise:e,resolve:i}=x(),s=new M,n=s.signal;return{value:t(async function*(){for(;;){let t=e;e=null;let{chunk:s,done:o,cb:a}=await t;if(r.nextTick(a),o)return;if(n.aborted)throw new g(void 0,{cause:n.reason});({promise:e,resolve:i}=x()),yield s}}(),{signal:n}),write(t,e,r){let s=i;i=null,s({chunk:t,done:!1,cb:r})},final(t){let e=i;i=null,e({done:!0,cb:t})},destroy(t,e){s.abort(),e(t)}}}(e);if(a(t))return S(T,t,{objectMode:!0,write:s,final:n,destroy:o});let l=null==t?void 0:t.then;if("function"==typeof l){let e;let i=I(l,t,t=>{if(null!=t)throw new b("nully","body",t)},t=>{_(e,t)});return e=new T({objectMode:!0,readable:!1,write:s,final(t){n(async()=>{try{await i,r.nextTick(t,null)}catch(e){r.nextTick(t,e)}})},destroy:o})}throw new b("Iterable, AsyncIterable or AsyncFunction",i,t)}if(E(e))return t(e.arrayBuffer());if(a(e))return S(T,e,{objectMode:!0,writable:!1});if(d(null==e?void 0:e.readable)&&f(null==e?void 0:e.writable))return T.fromWeb(e);if("object"==typeof(null==e?void 0:e.writable)||"object"==typeof(null==e?void 0:e.readable))return O({readable:null!=e&&e.readable?h(null==e?void 0:e.readable)?null==e?void 0:e.readable:t(e.readable):void 0,writable:null!=e&&e.writable?c(null==e?void 0:e.writable)?null==e?void 0:e.writable:t(e.writable):void 0});let s=null==e?void 0:e.then;if("function"==typeof s){let t;return I(s,e,e=>{null!=e&&t.push(e),t.push(null)},e=>{_(t,e)}),t=new T({objectMode:!0,writable:!1,read(){}})}throw new m(i,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)}},7398:(t,e,i)=>{"use strict";let r;let s=i(363),{AbortError:n,codes:o}=i(3934),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:l}=o,{kEmptyObject:h,once:c}=i(5241),{validateAbortSignal:u,validateFunction:d,validateObject:f,validateBoolean:p}=i(5890),{Promise:g,PromisePrototypeThen:m,SymbolDispose:b}=i(4912),{isClosed:_,isReadable:y,isReadableNodeStream:v,isReadableStream:w,isReadableFinished:x,isReadableErrored:S,isWritable:k,isWritableNodeStream:E,isWritableStream:M,isWritableFinished:I,isWritableErrored:T,isNodeStream:O,willEmitClose:A,kIsClosedPromise:C}=i(5302),P=()=>{};function R(t,e,o){var p,g;if(2==arguments.length?(o=e,e=h):null==e?e=h:f(e,"options"),d(o,"callback"),u(e.signal,"options.signal"),o=c(o),w(t)||M(t))return function(t,e,o){let a=!1,l=P;if(e.signal){if(l=()=>{a=!0,o.call(t,new n(void 0,{cause:e.signal.reason}))},e.signal.aborted)s.nextTick(l);else{let s=(r=r||i(5241).addAbortListener)(e.signal,l),n=o;o=c((...e)=>{s[b](),n.apply(t,e)})}}let h=(...e)=>{a||s.nextTick(()=>o.apply(t,e))};return m(t[C].promise,h,h),P}(t,e,o);if(!O(t))throw new a("stream",["ReadableStream","WritableStream","Stream"],t);let R=null!==(p=e.readable)&&void 0!==p?p:v(t),B=null!==(g=e.writable)&&void 0!==g?g:E(t),N=t._writableState,D=t._readableState,L=()=>{t.writable||U()},j=A(t)&&v(t)===R&&E(t)===B,F=I(t,!1),U=()=>{F=!0,t.destroyed&&(j=!1),j&&(!t.readable||R)||R&&!W||o.call(t)},W=x(t,!1),H=()=>{W=!0,t.destroyed&&(j=!1),j&&(!t.writable||B)||B&&!F||o.call(t)},z=e=>{o.call(t,e)},V=_(t),$=()=>{V=!0;let e=T(t)||S(t);return e&&"boolean"!=typeof e?o.call(t,e):R&&!W&&v(t,!0)&&!x(t,!1)||B&&!F&&!I(t,!1)?o.call(t,new l):void o.call(t)},q=()=>{V=!0;let e=T(t)||S(t);if(e&&"boolean"!=typeof e)return o.call(t,e);o.call(t)},K=()=>{t.req.on("finish",U)};t.setHeader&&"function"==typeof t.abort?(t.on("complete",U),j||t.on("abort",$),t.req?K():t.on("request",K)):B&&!N&&(t.on("end",L),t.on("close",L)),j||"boolean"!=typeof t.aborted||t.on("aborted",$),t.on("end",H),t.on("finish",U),!1!==e.error&&t.on("error",z),t.on("close",$),V?s.nextTick($):null!=N&&N.errorEmitted||null!=D&&D.errorEmitted?j||s.nextTick(q):!R&&(!j||y(t))&&(F||!1===k(t))?s.nextTick(q):!B&&(!j||k(t))&&(W||!1===y(t))?s.nextTick(q):D&&t.req&&t.aborted&&s.nextTick(q);let G=()=>{o=P,t.removeListener("aborted",$),t.removeListener("complete",U),t.removeListener("abort",$),t.removeListener("request",K),t.req&&t.req.removeListener("finish",U),t.removeListener("end",L),t.removeListener("close",L),t.removeListener("finish",U),t.removeListener("end",H),t.removeListener("error",z),t.removeListener("close",$)};if(e.signal&&!V){let a=()=>{let i=o;G(),i.call(t,new n(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)s.nextTick(a);else{let s=(r=r||i(5241).addAbortListener)(e.signal,a),n=o;o=c((...e)=>{s[b](),n.apply(t,e)})}}return G}t.exports=R,t.exports.finished=function(t,e){var i;let r=!1;return null===e&&(e=h),null!==(i=e)&&void 0!==i&&i.cleanup&&(p(e.cleanup,"cleanup"),r=e.cleanup),new g((i,s)=>{let n=R(t,e,t=>{r&&n(),t?s(t):i()})})}},2594:(t,e,i)=>{"use strict";let r=i(363),{PromisePrototypeThen:s,SymbolAsyncIterator:n,SymbolIterator:o}=i(4912),{Buffer:a}=i(8893),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:h}=i(3934).codes;t.exports=function(t,e,i){let c,u;if("string"==typeof e||e instanceof a)return new t({objectMode:!0,...i,read(){this.push(e),this.push(null)}});if(e&&e[n])u=!0,c=e[n]();else if(e&&e[o])u=!1,c=e[o]();else throw new l("iterable",["Iterable"],e);let d=new t({objectMode:!0,highWaterMark:1,...i}),f=!1;async function p(t){let e=null!=t,i="function"==typeof c.throw;if(e&&i){let{value:e,done:i}=await c.throw(t);if(await e,i)return}if("function"==typeof c.return){let{value:t}=await c.return();await t}}async function g(){for(;;){try{let{value:t,done:e}=u?await c.next():c.next();if(e)d.push(null);else{let e=t&&"function"==typeof t.then?await t:t;if(null===e)throw f=!1,new h;if(d.push(e))continue;f=!1}}catch(t){d.destroy(t)}break}}return d._read=function(){f||(f=!0,g())},d._destroy=function(t,e){s(p(t),()=>r.nextTick(e,t),i=>r.nextTick(e,i||t))},d}},7593:(t,e,i)=>{"use strict";let{ArrayIsArray:r,ObjectSetPrototypeOf:s}=i(4912),{EventEmitter:n}=i(7702);function o(t){n.call(this,t)}function a(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?r(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}s(o.prototype,n.prototype),s(o,n),o.prototype.pipe=function(t,e){let i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function s(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",s),t._isStdio||e&&!1===e.end||(i.on("end",l),i.on("close",h));let o=!1;function l(){o||(o=!0,t.end())}function h(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){u(),0===n.listenerCount(this,"error")&&this.emit("error",t)}function u(){i.removeListener("data",r),t.removeListener("drain",s),i.removeListener("end",l),i.removeListener("close",h),i.removeListener("error",c),t.removeListener("error",c),i.removeListener("end",u),i.removeListener("close",u),t.removeListener("close",u)}return a(i,"error",c),a(t,"error",c),i.on("end",u),i.on("close",u),t.on("close",u),t.emit("pipe",i),t},t.exports={Stream:o,prependListener:a}},7608:(t,e,i)=>{"use strict";let r=globalThis.AbortController||i(1172).AbortController,{codes:{ERR_INVALID_ARG_VALUE:s,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:a},AbortError:l}=i(3934),{validateAbortSignal:h,validateInteger:c,validateObject:u}=i(5890),d=i(4912).Symbol("kWeak"),f=i(4912).Symbol("kResistStopPropagation"),{finished:p}=i(7398),g=i(4772),{addAbortSignalNoValidate:m}=i(4378),{isWritable:b,isNodeStream:_}=i(5302),{deprecate:y}=i(5241),{ArrayPrototypePush:v,Boolean:w,MathFloor:x,Number:S,NumberIsNaN:k,Promise:E,PromiseReject:M,PromiseResolve:I,PromisePrototypeThen:T,Symbol:O}=i(4912),A=O("kEmpty"),C=O("kEof");function P(t,e){if("function"!=typeof t)throw new n("fn",["Function","AsyncFunction"],t);null!=e&&u(e,"options"),(null==e?void 0:e.signal)!=null&&h(e.signal,"options.signal");let r=1;(null==e?void 0:e.concurrency)!=null&&(r=x(e.concurrency));let s=r-1;return(null==e?void 0:e.highWaterMark)!=null&&(s=x(e.highWaterMark)),c(r,"options.concurrency",1),c(s,"options.highWaterMark",0),s+=r,(async function*(){let n,o;let a=i(5241).AbortSignalAny([null==e?void 0:e.signal].filter(w)),h=this,c=[],u={signal:a},d=!1,f=0;function p(){d=!0,g()}function g(){f-=1,m()}function m(){o&&!d&&f<r&&c.length<s&&(o(),o=null)}(async function(){try{for await(let e of h){if(d)return;if(a.aborted)throw new l;try{if((e=t(e,u))===A)continue;e=I(e)}catch(t){e=M(t)}f+=1,T(e,g,p),c.push(e),n&&(n(),n=null),!d&&(c.length>=s||f>=r)&&await new E(t=>{o=t})}c.push(C)}catch(e){let t=M(e);T(t,g,p),c.push(t)}finally{d=!0,n&&(n(),n=null)}})();try{for(;;){for(;c.length>0;){let t=await c[0];if(t===C)return;if(a.aborted)throw new l;t!==A&&(yield t),c.shift(),m()}await new E(t=>{n=t})}}finally{d=!0,o&&(o(),o=null)}}).call(this)}async function R(t,e){for await(let i of L.call(this,t,e))return!0;return!1}async function B(t,e){if("function"!=typeof t)throw new n("fn",["Function","AsyncFunction"],t);return!await R.call(this,async(...e)=>!await t(...e),e)}async function N(t,e){for await(let i of L.call(this,t,e))return i}async function D(t,e){if("function"!=typeof t)throw new n("fn",["Function","AsyncFunction"],t);async function i(e,i){return await t(e,i),A}for await(let t of P.call(this,i,e));}function L(t,e){if("function"!=typeof t)throw new n("fn",["Function","AsyncFunction"],t);async function i(e,i){return await t(e,i)?e:A}return P.call(this,i,e)}class j extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function F(t,e,i){var s,o;if("function"!=typeof t)throw new n("reducer",["Function","AsyncFunction"],t);null!=i&&u(i,"options"),(null==i?void 0:i.signal)!=null&&h(i.signal,"options.signal");let a=arguments.length>1;if(null!=i&&null!==(s=i.signal)&&void 0!==s&&s.aborted){let t=new l(void 0,{cause:i.signal.reason});throw this.once("error",()=>{}),await p(this.destroy(t)),t}let c=new r,g=c.signal;null!=i&&i.signal&&i.signal.addEventListener("abort",()=>c.abort(),{once:!0,[d]:this,[f]:!0});let m=!1;try{for await(let r of this){if(m=!0,null!=i&&null!==(o=i.signal)&&void 0!==o&&o.aborted)throw new l;a?e=await t(e,r,{signal:g}):(e=r,a=!0)}if(!m&&!a)throw new j}finally{c.abort()}return e}async function U(t){null!=t&&u(t,"options"),(null==t?void 0:t.signal)!=null&&h(t.signal,"options.signal");let e=[];for await(let r of this){var i;if(null!=t&&null!==(i=t.signal)&&void 0!==i&&i.aborted)throw new l(void 0,{cause:t.signal.reason});v(e,r)}return e}function W(t){if(k(t=S(t)))return 0;if(t<0)throw new a("number",">= 0",t);return t}t.exports.streamReturningOperators={asIndexedPairs:y(function(t){return null!=t&&u(t,"options"),(null==t?void 0:t.signal)!=null&&h(t.signal,"options.signal"),(async function*(){let e=0;for await(let r of this){var i;if(null!=t&&null!==(i=t.signal)&&void 0!==i&&i.aborted)throw new l({cause:t.signal.reason});yield[e++,r]}}).call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(t,e){return null!=e&&u(e,"options"),(null==e?void 0:e.signal)!=null&&h(e.signal,"options.signal"),t=W(t),(async function*(){var i,r;if(null!=e&&null!==(i=e.signal)&&void 0!==i&&i.aborted)throw new l;for await(let i of this){if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l;t--<=0&&(yield i)}}).call(this)},filter:L,flatMap:function(t,e){let i=P.call(this,t,e);return(async function*(){for await(let t of i)yield*t}).call(this)},map:P,take:function(t,e){return null!=e&&u(e,"options"),(null==e?void 0:e.signal)!=null&&h(e.signal,"options.signal"),t=W(t),(async function*(){var i,r;if(null!=e&&null!==(i=e.signal)&&void 0!==i&&i.aborted)throw new l;for await(let i of this){if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l;if(t-- >0&&(yield i),t<=0)return}}).call(this)},compose:function(t,e){if(null!=e&&u(e,"options"),(null==e?void 0:e.signal)!=null&&h(e.signal,"options.signal"),_(t)&&!b(t))throw new s("stream",t,"must be writable");let i=g(this,t);return null!=e&&e.signal&&m(e.signal,i),i}},t.exports.promiseReturningOperators={every:B,forEach:D,reduce:F,toArray:U,some:R,find:N}},9234:(t,e,i)=>{"use strict";let{ObjectSetPrototypeOf:r}=i(4912);t.exports=n;let s=i(7217);function n(t){if(!(this instanceof n))return new n(t);s.call(this,t)}r(n.prototype,s.prototype),r(n,s),n.prototype._transform=function(t,e,i){i(null,t)}},5957:(t,e,i)=>{let r,s,n;"use strict";let o=i(363),{ArrayIsArray:a,Promise:l,SymbolAsyncIterator:h,SymbolDispose:c}=i(4912),u=i(7398),{once:d}=i(5241),f=i(6420),p=i(1146),{aggregateTwoErrors:g,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:b,ERR_MISSING_ARGS:_,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:w}=i(3934),{validateFunction:x,validateAbortSignal:S}=i(5890),{isIterable:k,isReadable:E,isReadableNodeStream:M,isNodeStream:I,isTransformStream:T,isWebStream:O,isReadableStream:A,isReadableFinished:C}=i(5302),P=globalThis.AbortController||i(1172).AbortController;function R(t,e,i){let r=!1;return t.on("close",()=>{r=!0}),{destroy:e=>{r||(r=!0,f.destroyer(t,e||new y("pipe")))},cleanup:u(t,{readable:e,writable:i},t=>{r=!t})}}function B(t){if(k(t))return t;if(M(t))return N(t);throw new m("val",["Readable","Iterable","AsyncIterable"],t)}async function*N(t){s||(s=i(8652)),yield*s.prototype[h].call(t)}async function D(t,e,i,{end:r}){let s;let n=null,o=t=>{if(t&&(s=t),n){let t=n;n=null,t()}},a=()=>new l((t,e)=>{s?e(s):n=()=>{s?e(s):t()}});e.on("drain",o);let h=u(e,{readable:!1},o);try{for await(let i of(e.writableNeedDrain&&await a(),t))e.write(i)||await a();r&&(e.end(),await a()),i()}catch(t){i(s!==t?g(s,t):t)}finally{h(),e.off("drain",o)}}async function L(t,e,i,{end:r}){T(e)&&(e=e.writable);let s=e.getWriter();try{for await(let e of t)await s.ready,s.write(e).catch(()=>{});await s.ready,r&&await s.close(),i()}catch(t){try{await s.abort(t),i(t)}catch(t){i(t)}}}function j(t,e,s){let l,h,d,f;if(1===t.length&&a(t[0])&&(t=t[0]),t.length<2)throw new _("streams");let g=new P,y=g.signal,x=null==s?void 0:s.signal,N=[];function j(){H(new w)}S(x,"options.signal"),n=n||i(5241).addAbortListener,x&&(l=n(x,j));let F=[],U=0;function W(t){H(t,0==--U)}function H(t,i){var r;if(t&&(!h||"ERR_STREAM_PREMATURE_CLOSE"===h.code)&&(h=t),h||i){for(;F.length;)F.shift()(h);null===(r=l)||void 0===r||r[c](),g.abort(),i&&(h||N.forEach(t=>t()),o.nextTick(e,h,d))}}for(let e=0;e<t.length;e++){let n=t[e],a=e<t.length-1,l=e>0,h=a||(null==s?void 0:s.end)!==!1,c=e===t.length-1;if(I(n)){if(h){let{destroy:t,cleanup:e}=R(n,a,l);F.push(t),E(n)&&c&&N.push(e)}function z(t){t&&"AbortError"!==t.name&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code&&W(t)}n.on("error",z),E(n)&&c&&N.push(()=>{n.removeListener("error",z)})}if(0===e){if("function"==typeof n){if(!k(f=n({signal:y})))throw new b("Iterable, AsyncIterable or Stream","source",f)}else f=k(n)||M(n)||T(n)?n:p.from(n)}else if("function"==typeof n){var V,$;if(f=n(f=T(f)?B(null===(V=f)||void 0===V?void 0:V.readable):B(f),{signal:y}),a){if(!k(f,!0))throw new b("AsyncIterable",`transform[${e-1}]`,f)}else{r||(r=i(9234));let t=new r({objectMode:!0}),e=null===($=f)||void 0===$?void 0:$.then;if("function"==typeof e)U++,e.call(f,e=>{d=e,null!=e&&t.write(e),h&&t.end(),o.nextTick(W)},e=>{t.destroy(e),o.nextTick(W,e)});else if(k(f,!0))U++,D(f,t,W,{end:h});else if(A(f)||T(f)){let e=f.readable||f;U++,D(e,t,W,{end:h})}else throw new b("AsyncIterable or Promise","destination",f);let{destroy:s,cleanup:n}=R(f=t,!1,!0);F.push(s),c&&N.push(n)}}else if(I(n)){if(M(f)){U+=2;let t=function(t,e,i,{end:r}){let s=!1;if(e.on("close",()=>{s||i(new v)}),t.pipe(e,{end:!1}),r){function n(){s=!0,e.end()}C(t)?o.nextTick(n):t.once("end",n)}else i();return u(t,{readable:!0,writable:!1},e=>{let r=t._readableState;e&&"ERR_STREAM_PREMATURE_CLOSE"===e.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?t.once("end",i).once("error",i):i(e)}),u(e,{readable:!1,writable:!0},i)}(f,n,W,{end:h});E(n)&&c&&N.push(t)}else if(T(f)||A(f)){let t=f.readable||f;U++,D(t,n,W,{end:h})}else if(k(f))U++,D(f,n,W,{end:h});else throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);f=n}else if(O(n)){if(M(f))U++,L(B(f),n,W,{end:h});else if(A(f)||k(f))U++,L(f,n,W,{end:h});else if(T(f))U++,L(f.readable,n,W,{end:h});else throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);f=n}else f=p.from(n)}return(null!=y&&y.aborted||null!=x&&x.aborted)&&o.nextTick(j),f}t.exports={pipelineImpl:j,pipeline:function(...t){return j(t,d((x(t[t.length-1],"streams[stream.length - 1]"),t.pop())))}}},8652:(t,e,i)=>{"use strict";let r;let s=i(363),{ArrayPrototypeIndexOf:n,NumberIsInteger:o,NumberIsNaN:a,NumberParseInt:l,ObjectDefineProperties:h,ObjectKeys:c,ObjectSetPrototypeOf:u,Promise:d,SafeSet:f,SymbolAsyncDispose:p,SymbolAsyncIterator:g,Symbol:m}=i(4912);t.exports=z,z.ReadableState=H;let{EventEmitter:b}=i(7702),{Stream:_,prependListener:y}=i(7593),{Buffer:v}=i(8893),{addAbortSignal:w}=i(4378),x=i(7398),S=i(5241).debuglog("stream",t=>{S=t}),k=i(2854),E=i(6420),{getHighWaterMark:M,getDefaultHighWaterMark:I}=i(7247),{aggregateTwoErrors:T,codes:{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:R},AbortError:B}=i(3934),{validateObject:N}=i(5890),D=m("kPaused"),{StringDecoder:L}=i(4394),j=i(2594);u(z.prototype,_.prototype),u(z,_);let F=()=>{},{errorOrDestroy:U}=E;function W(t){return{enumerable:!1,get(){return(this.state&t)!=0},set(e){e?this.state|=t:this.state&=~t}}}function H(t,e,r){"boolean"!=typeof r&&(r=e instanceof i(1146)),this.state=6192,t&&t.objectMode&&(this.state|=1),r&&t&&t.readableObjectMode&&(this.state|=1),this.highWaterMark=t?M(this,t,"readableHighWaterMark",r):I(!1),this.buffer=new k,this.length=0,this.pipes=[],this.flowing=null,this[D]=null,t&&!1===t.emitClose&&(this.state&=-2049),t&&!1===t.autoDestroy&&(this.state&=-4097),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new L(t.encoding),this.encoding=t.encoding)}function z(t){if(!(this instanceof z))return new z(t);let e=this instanceof i(1146);this._readableState=new H(t,this,e),t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.construct&&(this._construct=t.construct),t.signal&&!e&&w(t.signal,this)),_.call(this,t),E.construct(this,()=>{this._readableState.needReadable&&Y(this,this._readableState)})}function V(t,e,i,r){let s;S("readableAddChunk",e);let n=t._readableState;if((1&n.state)==0&&("string"==typeof e?(i=i||n.defaultEncoding,n.encoding!==i&&(r&&n.encoding?e=v.from(e,i).toString(n.encoding):(e=v.from(e,i),i=""))):e instanceof v?i="":_._isUint8Array(e)?(e=_._uint8ArrayToBuffer(e),i=""):null!=e&&(s=new O("chunk",["string","Buffer","Uint8Array"],e))),s)U(t,s);else if(null===e)n.state&=-9,function(t,e){if(S("onEofChunk"),!e.ended){if(e.decoder){let t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?K(t):(e.needReadable=!1,e.emittedReadable=!0,G(t))}}(t,n);else if((1&n.state)!=0||e&&e.length>0){if(r){if((4&n.state)!=0)U(t,new R);else{if(n.destroyed||n.errored)return!1;$(t,n,e,!0)}}else if(n.ended)U(t,new P);else{if(n.destroyed||n.errored)return!1;n.state&=-9,n.decoder&&!i?(e=n.decoder.write(e),n.objectMode||0!==e.length?$(t,n,e,!1):Y(t,n)):$(t,n,e,!1)}}else r||(n.state&=-9,Y(t,n));return!n.ended&&(n.length<n.highWaterMark||0===n.length)}function $(t,e,i,r){e.flowing&&0===e.length&&!e.sync&&t.listenerCount("data")>0?((65536&e.state)!=0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),(64&e.state)!=0&&K(t)),Y(t,e)}function q(t,e){return t<=0||0===e.length&&e.ended?0:(1&e.state)!=0?1:a(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}function K(t){let e=t._readableState;S("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(S("emitReadable",e.flowing),e.emittedReadable=!0,s.nextTick(G,t))}function G(t){let e=t._readableState;S("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,tt(t)}function Y(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,s.nextTick(Q,t,e))}function Q(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){let i=e.length;if(S("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function X(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!1===e[D]?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Z(t){S("readable nexttick read 0"),t.read(0)}function J(t,e){S("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),tt(t),e.flowing&&!e.reading&&t.read(0)}function tt(t){let e=t._readableState;for(S("flow",e.flowing);e.flowing&&null!==t.read(););}function te(t,e){"function"!=typeof t.read&&(t=z.wrap(t,{objectMode:!0}));let i=ti(t,e);return i.stream=t,i}async function*ti(t,e){let i,r=F;function s(e){this===t?(r(),r=F):r=e}t.on("readable",s);let n=x(t,{writable:!1},t=>{i=t?T(i,t):null,r(),r=F});try{for(;;){let e=t.destroyed?null:t.read();if(null!==e)yield e;else if(i)throw i;else{if(null===i)return;await new d(s)}}}catch(t){throw i=T(i,t)}finally{(i||(null==e?void 0:e.destroyOnReturn)!==!1)&&(void 0===i||t._readableState.autoDestroy)?E.destroyer(t,null):(t.off("readable",s),n())}}function tr(t,e){let i;return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i)}function ts(t){let e=t._readableState;S("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,s.nextTick(tn,e,t))}function tn(t,e){if(S("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&0===t.length){if(t.endEmitted=!0,e.emit("end"),e.writable&&!1===e.allowHalfOpen)s.nextTick(to,e);else if(t.autoDestroy){let t=e._writableState;(!t||t.autoDestroy&&(t.finished||!1===t.writable))&&e.destroy()}}}function to(t){!t.writable||t.writableEnded||t.destroyed||t.end()}function ta(){return void 0===r&&(r={}),r}h(H.prototype,{objectMode:W(1),ended:W(2),endEmitted:W(4),reading:W(8),constructed:W(16),sync:W(32),needReadable:W(64),emittedReadable:W(128),readableListening:W(256),resumeScheduled:W(512),errorEmitted:W(1024),emitClose:W(2048),autoDestroy:W(4096),destroyed:W(8192),closed:W(16384),closeEmitted:W(32768),multiAwaitDrain:W(65536),readingMore:W(131072),dataEmitted:W(262144)}),z.prototype.destroy=E.destroy,z.prototype._undestroy=E.undestroy,z.prototype._destroy=function(t,e){e(t)},z.prototype[b.captureRejectionSymbol]=function(t){this.destroy(t)},z.prototype[p]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new B,this.destroy(t)),new d((e,i)=>x(this,r=>r&&r!==t?i(r):e(null)))},z.prototype.push=function(t,e){return V(this,t,e,!1)},z.prototype.unshift=function(t,e){return V(this,t,e,!0)},z.prototype.isPaused=function(){let t=this._readableState;return!0===t[D]||!1===t.flowing},z.prototype.setEncoding=function(t){let e=new L(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let i=this._readableState.buffer,r="";for(let t of i)r+=e.write(t);return i.clear(),""!==r&&i.push(r),this._readableState.length=r.length,this},z.prototype.read=function(t){let e;S("read",t),void 0===t?t=NaN:o(t)||(t=l(t,10));let i=this._readableState,r=t;if(t>i.highWaterMark&&(i.highWaterMark=function(t){if(t>1073741824)throw new C("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,++t}(t)),0!==t&&(i.state&=-129),0===t&&i.needReadable&&((0!==i.highWaterMark?i.length>=i.highWaterMark:i.length>0)||i.ended))return S("read: emitReadable",i.length,i.ended),0===i.length&&i.ended?ts(this):K(this),null;if(0===(t=q(t,i))&&i.ended)return 0===i.length&&ts(this),null;let s=(64&i.state)!=0;if(S("need readable",s),(0===i.length||i.length-t<i.highWaterMark)&&S("length less than watermark",s=!0),i.ended||i.reading||i.destroyed||i.errored||!i.constructed)S("reading, ended or constructing",s=!1);else if(s){S("do read"),i.state|=40,0===i.length&&(i.state|=64);try{this._read(i.highWaterMark)}catch(t){U(this,t)}i.state&=-33,i.reading||(t=q(r,i))}return null===(e=t>0?tr(t,i):null)?(i.needReadable=i.length<=i.highWaterMark,t=0):(i.length-=t,i.multiAwaitDrain?i.awaitDrainWriters.clear():i.awaitDrainWriters=null),0===i.length&&(i.ended||(i.needReadable=!0),r!==t&&i.ended&&ts(this)),null===e||i.errorEmitted||i.closeEmitted||(i.dataEmitted=!0,this.emit("data",e)),e},z.prototype._read=function(t){throw new A("_read()")},z.prototype.pipe=function(t,e){let i;let r=this,n=this._readableState;1!==n.pipes.length||n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new f(n.awaitDrainWriters?[n.awaitDrainWriters]:[])),n.pipes.push(t),S("pipe count=%d opts=%j",n.pipes.length,e);let o=e&&!1===e.end||t===s.stdout||t===s.stderr?g:a;function a(){S("onend"),t.end()}n.endEmitted?s.nextTick(o):r.once("end",o),t.on("unpipe",function e(s,o){S("onunpipe"),s===r&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,S("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),i&&t.removeListener("drain",i),t.removeListener("error",u),t.removeListener("unpipe",e),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",c),l=!0,i&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&i())});let l=!1;function h(){l||(1===n.pipes.length&&n.pipes[0]===t?(S("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(S("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),i||(i=function(){let e=r._readableState;e.awaitDrainWriters===t?(S("pipeOnDrain",1),e.awaitDrainWriters=null):e.multiAwaitDrain&&(S("pipeOnDrain",e.awaitDrainWriters.size),e.awaitDrainWriters.delete(t)),(!e.awaitDrainWriters||0===e.awaitDrainWriters.size)&&r.listenerCount("data")&&r.resume()},t.on("drain",i))}function c(e){S("ondata");let i=t.write(e);S("dest.write",i),!1===i&&h()}function u(e){if(S("onerror",e),g(),t.removeListener("error",u),0===t.listenerCount("error")){let i=t._writableState||t._readableState;i&&!i.errorEmitted?U(t,e):t.emit("error",e)}}function d(){t.removeListener("finish",p),g()}function p(){S("onfinish"),t.removeListener("close",d),g()}function g(){S("unpipe"),r.unpipe(t)}return r.on("data",c),y(t,"error",u),t.once("close",d),t.once("finish",p),t.emit("pipe",r),!0===t.writableNeedDrain?h():n.flowing||(S("pipe resume"),r.resume()),t},z.prototype.unpipe=function(t){let e=this._readableState;if(0===e.pipes.length)return this;if(!t){let t=e.pipes;e.pipes=[],this.pause();for(let e=0;e<t.length;e++)t[e].emit("unpipe",this,{hasUnpiped:!1});return this}let i=n(e.pipes,t);return -1===i||(e.pipes.splice(i,1),0===e.pipes.length&&this.pause(),t.emit("unpipe",this,{hasUnpiped:!1})),this},z.prototype.on=function(t,e){let i=_.prototype.on.call(this,t,e),r=this._readableState;return"data"===t?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"!==t||r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,S("on readable",r.length,r.reading),r.length?K(this):r.reading||s.nextTick(Z,this)),i},z.prototype.addListener=z.prototype.on,z.prototype.removeListener=function(t,e){let i=_.prototype.removeListener.call(this,t,e);return"readable"===t&&s.nextTick(X,this),i},z.prototype.off=z.prototype.removeListener,z.prototype.removeAllListeners=function(t){let e=_.prototype.removeAllListeners.apply(this,arguments);return("readable"===t||void 0===t)&&s.nextTick(X,this),e},z.prototype.resume=function(){let t=this._readableState;return t.flowing||(S("resume"),t.flowing=!t.readableListening,t.resumeScheduled||(t.resumeScheduled=!0,s.nextTick(J,this,t))),t[D]=!1,this},z.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[D]=!0,this},z.prototype.wrap=function(t){let e=!1;t.on("data",i=>{!this.push(i)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",t=>{U(this,t)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let i=c(t);for(let e=1;e<i.length;e++){let r=i[e];void 0===this[r]&&"function"==typeof t[r]&&(this[r]=t[r].bind(t))}return this},z.prototype[g]=function(){return te(this)},z.prototype.iterator=function(t){return void 0!==t&&N(t,"options"),te(this,t)},h(z.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&!1!==t.readable&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._readableState.readable&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),h(H.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[D]},set(t){this[D]=!!t}}}),z._fromList=tr,z.from=function(t,e){return j(z,t,e)},z.fromWeb=function(t,e){return ta().newStreamReadableFromReadableStream(t,e)},z.toWeb=function(t,e){return ta().newReadableStreamFromStreamReadable(t,e)},z.wrap=function(t,e){var i,r;return new z({objectMode:null===(i=null!==(r=t.readableObjectMode)&&void 0!==r?r:t.objectMode)||void 0===i||i,...e,destroy(e,i){E.destroyer(t,e),i(e)}}).wrap(t)}},7247:(t,e,i)=>{"use strict";let{MathFloor:r,NumberIsInteger:s}=i(4912),{validateInteger:n}=i(5890),{ERR_INVALID_ARG_VALUE:o}=i(3934).codes,a=16384,l=16;function h(t){return t?l:a}t.exports={getHighWaterMark:function(t,e,i,n){let a=null!=e.highWaterMark?e.highWaterMark:n?e[i]:null;if(null!=a){if(!s(a)||a<0)throw new o(n?`options.${i}`:"options.highWaterMark",a);return r(a)}return h(t.objectMode)},getDefaultHighWaterMark:h,setDefaultHighWaterMark:function(t,e){n(e,"value",0),t?l=e:a=e}}},7217:(t,e,i)=>{"use strict";let{ObjectSetPrototypeOf:r,Symbol:s}=i(4912);t.exports=h;let{ERR_METHOD_NOT_IMPLEMENTED:n}=i(3934).codes,o=i(1146),{getHighWaterMark:a}=i(7247);r(h.prototype,o.prototype),r(h,o);let l=s("kCallback");function h(t){if(!(this instanceof h))return new h(t);let e=t?a(this,t,"readableHighWaterMark",!0):null;0===e&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),o.call(this,t),this._readableState.sync=!1,this[l]=null,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",u)}function c(t){"function"!=typeof this._flush||this.destroyed?(this.push(null),t&&t()):this._flush((e,i)=>{if(e){t?t(e):this.destroy(e);return}null!=i&&this.push(i),this.push(null),t&&t()})}function u(){this._final!==c&&c.call(this)}h.prototype._final=c,h.prototype._transform=function(t,e,i){throw new n("_transform()")},h.prototype._write=function(t,e,i){let r=this._readableState,s=this._writableState,n=r.length;this._transform(t,e,(t,e)=>{if(t){i(t);return}null!=e&&this.push(e),s.ended||n===r.length||r.length<r.highWaterMark?i():this[l]=i})},h.prototype._read=function(){if(this[l]){let t=this[l];this[l]=null,t()}}},5302:(t,e,i)=>{"use strict";let{SymbolAsyncIterator:r,SymbolIterator:s,SymbolFor:n}=i(4912),o=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),l=n("nodejs.stream.readable"),h=n("nodejs.stream.writable"),c=n("nodejs.stream.disturbed"),u=n("nodejs.webstream.isClosedPromise"),d=n("nodejs.webstream.controllerErrorFunction");function f(t,e=!1){var i;return!!(t&&"function"==typeof t.pipe&&"function"==typeof t.on&&(!e||"function"==typeof t.pause&&"function"==typeof t.resume)&&(!t._writableState||(null===(i=t._readableState)||void 0===i?void 0:i.readable)!==!1)&&(!t._writableState||t._readableState))}function p(t){var e;return!!(t&&"function"==typeof t.write&&"function"==typeof t.on&&(!t._readableState||(null===(e=t._writableState)||void 0===e?void 0:e.writable)!==!1))}function g(t){return t&&(t._readableState||t._writableState||"function"==typeof t.write&&"function"==typeof t.on||"function"==typeof t.pipe&&"function"==typeof t.on)}function m(t){return!!(t&&!g(t)&&"function"==typeof t.pipeThrough&&"function"==typeof t.getReader&&"function"==typeof t.cancel)}function b(t){return!!(t&&!g(t)&&"function"==typeof t.getWriter&&"function"==typeof t.abort)}function _(t){return!!(t&&!g(t)&&"object"==typeof t.readable&&"object"==typeof t.writable)}function y(t){if(!g(t))return null;let e=t._writableState,i=t._readableState,r=e||i;return!!(t.destroyed||t[o]||null!=r&&r.destroyed)}function v(t){if(!p(t))return null;if(!0===t.writableEnded)return!0;let e=t._writableState;return(null==e||!e.errored)&&("boolean"!=typeof(null==e?void 0:e.ended)?null:e.ended)}function w(t,e){if(!f(t))return null;let i=t._readableState;return(null==i||!i.errored)&&("boolean"!=typeof(null==i?void 0:i.endEmitted)?null:!!(i.endEmitted||!1===e&&!0===i.ended&&0===i.length))}function x(t){return t&&null!=t[l]?t[l]:"boolean"!=typeof(null==t?void 0:t.readable)?null:!y(t)&&f(t)&&t.readable&&!w(t)}function S(t){return t&&null!=t[h]?t[h]:"boolean"!=typeof(null==t?void 0:t.writable)?null:!y(t)&&p(t)&&t.writable&&!v(t)}function k(t){return"boolean"==typeof t._closed&&"boolean"==typeof t._defaultKeepAlive&&"boolean"==typeof t._removedConnection&&"boolean"==typeof t._removedContLen}function E(t){return"boolean"==typeof t._sent100&&k(t)}t.exports={isDestroyed:y,kIsDestroyed:o,isDisturbed:function(t){var e;return!!(t&&(null!==(e=t[c])&&void 0!==e?e:t.readableDidRead||t.readableAborted))},kIsDisturbed:c,isErrored:function(t){var e,i,r,s,n,o,l,h,c,u;return!!(t&&(null!==(e=null!==(i=null!==(r=null!==(s=null!==(n=null!==(o=t[a])&&void 0!==o?o:t.readableErrored)&&void 0!==n?n:t.writableErrored)&&void 0!==s?s:null===(l=t._readableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==r?r:null===(h=t._writableState)||void 0===h?void 0:h.errorEmitted)&&void 0!==i?i:null===(c=t._readableState)||void 0===c?void 0:c.errored)&&void 0!==e?e:null===(u=t._writableState)||void 0===u?void 0:u.errored))},kIsErrored:a,isReadable:x,kIsReadable:l,kIsClosedPromise:u,kControllerErrorFunction:d,kIsWritable:h,isClosed:function(t){if(!g(t))return null;if("boolean"==typeof t.closed)return t.closed;let e=t._writableState,i=t._readableState;return"boolean"==typeof(null==e?void 0:e.closed)||"boolean"==typeof(null==i?void 0:i.closed)?(null==e?void 0:e.closed)||(null==i?void 0:i.closed):"boolean"==typeof t._closed&&k(t)?t._closed:null},isDuplexNodeStream:function(t){return!!(t&&"function"==typeof t.pipe&&t._readableState&&"function"==typeof t.on&&"function"==typeof t.write)},isFinished:function(t,e){return g(t)?!!y(t)||!((null==e?void 0:e.readable)!==!1&&x(t)||(null==e?void 0:e.writable)!==!1&&S(t)):null},isIterable:function(t,e){return null!=t&&(!0===e?"function"==typeof t[r]:!1===e?"function"==typeof t[s]:"function"==typeof t[r]||"function"==typeof t[s])},isReadableNodeStream:f,isReadableStream:m,isReadableEnded:function(t){if(!f(t))return null;if(!0===t.readableEnded)return!0;let e=t._readableState;return!!e&&!e.errored&&("boolean"!=typeof(null==e?void 0:e.ended)?null:e.ended)},isReadableFinished:w,isReadableErrored:function(t){var e,i;return g(t)?t.readableErrored?t.readableErrored:null!==(e=null===(i=t._readableState)||void 0===i?void 0:i.errored)&&void 0!==e?e:null:null},isNodeStream:g,isWebStream:function(t){return m(t)||b(t)||_(t)},isWritable:S,isWritableNodeStream:p,isWritableStream:b,isWritableEnded:v,isWritableFinished:function(t,e){if(!p(t))return null;if(!0===t.writableFinished)return!0;let i=t._writableState;return(null==i||!i.errored)&&("boolean"!=typeof(null==i?void 0:i.finished)?null:!!(i.finished||!1===e&&!0===i.ended&&0===i.length))},isWritableErrored:function(t){var e,i;return g(t)?t.writableErrored?t.writableErrored:null!==(e=null===(i=t._writableState)||void 0===i?void 0:i.errored)&&void 0!==e?e:null:null},isServerRequest:function(t){var e;return"boolean"==typeof t._consuming&&"boolean"==typeof t._dumped&&(null===(e=t.req)||void 0===e?void 0:e.upgradeOrConnect)===void 0},isServerResponse:E,willEmitClose:function(t){if(!g(t))return null;let e=t._writableState,i=t._readableState,r=e||i;return!r&&E(t)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:_}},3909:(t,e,i)=>{"use strict";let r;let s=i(363),{ArrayPrototypeSlice:n,Error:o,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:l,ObjectDefineProperties:h,ObjectSetPrototypeOf:c,StringPrototypeToLowerCase:u,Symbol:d,SymbolHasInstance:f}=i(4912);t.exports=N,N.WritableState=R;let{EventEmitter:p}=i(7702),g=i(7593).Stream,{Buffer:m}=i(8893),b=i(6420),{addAbortSignal:_}=i(4378),{getHighWaterMark:y,getDefaultHighWaterMark:v}=i(7247),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_MULTIPLE_CALLBACK:S,ERR_STREAM_CANNOT_PIPE:k,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:M,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:T,ERR_UNKNOWN_ENCODING:O}=i(3934).codes,{errorOrDestroy:A}=b;function C(){}c(N.prototype,g.prototype),c(N,g);let P=d("kOnFinished");function R(t,e,r){"boolean"!=typeof r&&(r=e instanceof i(1146)),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?y(this,t,"writableHighWaterMark",r):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let s=!!(t&&!1===t.decodeStrings);this.decodeStrings=!s,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,B(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||!1!==t.emitClose,this.autoDestroy=!t||!1!==t.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function B(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}function N(t){let e=this instanceof i(1146);if(!e&&!a(N,this))return new N(t);this._writableState=new R(t,this,e),t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final),"function"==typeof t.construct&&(this._construct=t.construct),t.signal&&_(t.signal,this)),g.call(this,t),b.construct(this,()=>{let t=this._writableState;t.writing||z(this,t),$(this,t)})}function D(t,e,i,r){let n;let o=t._writableState;if("function"==typeof i)r=i,i=o.defaultEncoding;else{if(i){if("buffer"!==i&&!m.isEncoding(i))throw new O(i)}else i=o.defaultEncoding;"function"!=typeof r&&(r=C)}if(null===e)throw new I;if(!o.objectMode){if("string"==typeof e)!1!==o.decodeStrings&&(e=m.from(e,i),i="buffer");else if(e instanceof m)i="buffer";else if(g._isUint8Array(e))e=g._uint8ArrayToBuffer(e),i="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],e)}return(o.ending?n=new T:o.destroyed&&(n=new E("write")),n)?(s.nextTick(r,n),A(t,n,!0),n):(o.pendingcb++,function(t,e,i,r,s){let n=e.objectMode?1:i.length;e.length+=n;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:i,encoding:r,callback:s}),e.allBuffers&&"buffer"!==r&&(e.allBuffers=!1),e.allNoop&&s!==C&&(e.allNoop=!1)):(e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,t._write(i,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}(t,o,e,i,r))}function L(t,e,i,r,s,n,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new E("write")):i?t._writev(s,e.onwrite):t._write(s,n,e.onwrite),e.sync=!1}function j(t,e,i,r){--e.pendingcb,r(i),H(e),A(t,i)}function F(t,e){let i=t._writableState,r=i.sync,n=i.writecb;if("function"!=typeof n){A(t,new S);return}i.writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0,e?(e.stack,i.errored||(i.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?s.nextTick(j,t,i,e,n):j(t,i,e,n)):(i.buffered.length>i.bufferedIndex&&z(t,i),r?null!==i.afterWriteTickInfo&&i.afterWriteTickInfo.cb===n?i.afterWriteTickInfo.count++:(i.afterWriteTickInfo={count:1,cb:n,stream:t,state:i},s.nextTick(U,i.afterWriteTickInfo)):W(t,i,1,n))}function U({stream:t,state:e,count:i,cb:r}){return e.afterWriteTickInfo=null,W(t,e,i,r)}function W(t,e,i,r){for(e.ending||t.destroyed||0!==e.length||!e.needDrain||(e.needDrain=!1,t.emit("drain"));i-- >0;)e.pendingcb--,r();e.destroyed&&H(e),$(t,e)}function H(t){var e,i;if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){let{chunk:r,callback:s}=t.buffered[i],n=t.objectMode?1:r.length;t.length-=n,s(null!==(e=t.errored)&&void 0!==e?e:new E("write"))}let r=t[P].splice(0);for(let e=0;e<r.length;e++)r[e](null!==(i=t.errored)&&void 0!==i?i:new E("end"));B(t)}function z(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:i,bufferedIndex:r,objectMode:s}=e,o=i.length-r;if(!o)return;let a=r;if(e.bufferProcessing=!0,o>1&&t._writev){e.pendingcb-=o-1;let r=e.allNoop?C:t=>{for(let e=a;e<i.length;++e)i[e].callback(t)},s=e.allNoop&&0===a?i:n(i,a);s.allBuffers=e.allBuffers,L(t,e,!0,e.length,s,"",r),B(e)}else{do{let{chunk:r,encoding:n,callback:o}=i[a];i[a++]=null,L(t,e,!1,s?1:r.length,r,n,o)}while(a<i.length&&!e.writing);a===i.length?B(e):a>256?(i.splice(0,a),e.bufferedIndex=0):e.bufferedIndex=a}e.bufferProcessing=!1}function V(t){return t.ending&&!t.destroyed&&t.constructed&&0===t.length&&!t.errored&&0===t.buffered.length&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function $(t,e,i){V(e)&&(e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.finalCalled=!0,function(t,e){let i=!1;function r(r){if(i){A(t,null!=r?r:S());return}if(i=!0,e.pendingcb--,r){let i=e[P].splice(0);for(let t=0;t<i.length;t++)i[t](r);A(t,r,e.sync)}else V(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,s.nextTick(q,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(t){r(t)}e.sync=!1}(t,e))),0===e.pendingcb&&(i?(e.pendingcb++,s.nextTick((t,e)=>{V(e)?q(t,e):e.pendingcb--},t,e)):V(e)&&(e.pendingcb++,q(t,e))))}function q(t,e){e.pendingcb--,e.finished=!0;let i=e[P].splice(0);for(let t=0;t<i.length;t++)i[t]();if(t.emit("finish"),e.autoDestroy){let e=t._readableState;(!e||e.autoDestroy&&(e.endEmitted||!1===e.readable))&&t.destroy()}}R.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},l(R.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),l(N,f,{__proto__:null,value:function(t){return!!a(this,t)||this===N&&t&&t._writableState instanceof R}}),N.prototype.pipe=function(){A(this,new k)},N.prototype.write=function(t,e,i){return!0===D(this,t,e,i)},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||z(this,t))},N.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=u(t)),!m.isEncoding(t))throw new O(t);return this._writableState.defaultEncoding=t,this},N.prototype._write=function(t,e,i){if(this._writev)this._writev([{chunk:t,encoding:e}],i);else throw new x("_write()")},N.prototype._writev=null,N.prototype.end=function(t,e,i){let r;let n=this._writableState;if("function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t){let i=D(this,t,e);i instanceof o&&(r=i)}return n.corked&&(n.corked=1,this.uncork()),r||(n.errored||n.ending?n.finished?r=new M("end"):n.destroyed&&(r=new E("end")):(n.ending=!0,$(this,n,!0),n.ended=!0)),"function"==typeof i&&(r||n.finished?s.nextTick(i,r):n[P].push(i)),this},h(N.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&!1!==t.writable&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return!!t&&!t.destroyed&&!t.ending&&t.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._writableState.writable&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});let K=b.destroy;function G(){return void 0===r&&(r={}),r}N.prototype.destroy=function(t,e){let i=this._writableState;return!i.destroyed&&(i.bufferedIndex<i.buffered.length||i[P].length)&&s.nextTick(H,i),K.call(this,t,e),this},N.prototype._undestroy=b.undestroy,N.prototype._destroy=function(t,e){e(t)},N.prototype[p.captureRejectionSymbol]=function(t){this.destroy(t)},N.fromWeb=function(t,e){return G().newStreamWritableFromWritableStream(t,e)},N.toWeb=function(t){return G().newWritableStreamFromStreamWritable(t)}},5890:(t,e,i)=>{"use strict";let{ArrayIsArray:r,ArrayPrototypeIncludes:s,ArrayPrototypeJoin:n,ArrayPrototypeMap:o,NumberIsInteger:a,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:h,NumberMIN_SAFE_INTEGER:c,NumberParseInt:u,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:g,StringPrototypeTrim:m}=i(4912),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:_,ERR_INVALID_ARG_TYPE:y,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:x}}=i(3934),{normalizeEncoding:S}=i(5241),{isAsyncFunction:k,isArrayBufferView:E}=i(5241).types,M={},I=/^[0-7]+$/,T=b((t,e,i=c,r=h)=>{if("number"!=typeof t)throw new y(e,"number",t);if(!a(t))throw new w(e,"an integer",t);if(t<i||t>r)throw new w(e,`>= ${i} && <= ${r}`,t)}),O=b((t,e,i=-2147483648,r=2147483647)=>{if("number"!=typeof t)throw new y(e,"number",t);if(!a(t))throw new w(e,"an integer",t);if(t<i||t>r)throw new w(e,`>= ${i} && <= ${r}`,t)}),A=b((t,e,i=!1)=>{if("number"!=typeof t)throw new y(e,"number",t);if(!a(t))throw new w(e,"an integer",t);let r=i?1:0;if(t<r||t>4294967295)throw new w(e,`>= ${r} && <= 4294967295`,t)});function C(t,e){if("string"!=typeof t)throw new y(e,"string",t)}let P=b((t,e,i)=>{if(!s(i,t))throw new v(e,t,"must be one of: "+n(o(i,t=>"string"==typeof t?`'${t}'`:p(t)),", "))});function R(t,e){if("boolean"!=typeof t)throw new y(e,"boolean",t)}function B(t,e,i){return null!=t&&d(t,e)?t[e]:i}let N=b((t,e,i=null)=>{let s=B(i,"allowArray",!1),n=B(i,"allowFunction",!1);if(!B(i,"nullable",!1)&&null===t||!s&&r(t)||"object"!=typeof t&&(!n||"function"!=typeof t))throw new y(e,"Object",t)}),D=b((t,e)=>{if(null!=t&&"object"!=typeof t&&"function"!=typeof t)throw new y(e,"a dictionary",t)}),L=b((t,e,i=0)=>{if(!r(t))throw new y(e,"Array",t);if(t.length<i)throw new v(e,t,`must be longer than ${i}`)}),j=b((t,e="buffer")=>{if(!E(t))throw new y(e,["Buffer","TypedArray","DataView"],t)}),F=b((t,e)=>{if(void 0!==t&&(null===t||"object"!=typeof t||!("aborted"in t)))throw new y(e,"AbortSignal",t)}),U=b((t,e)=>{if("function"!=typeof t)throw new y(e,"Function",t)}),W=b((t,e)=>{if("function"!=typeof t||k(t))throw new y(e,"Function",t)}),H=b((t,e)=>{if(void 0!==t)throw new y(e,"undefined",t)}),z=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function V(t,e){if(void 0===t||!f(z,t))throw new v(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:function(t){return t===(0|t)},isUint32:function(t){return t===t>>>0},parseFileMode:function(t,e,i){if(void 0===t&&(t=i),"string"==typeof t){if(null===f(I,t))throw new v(e,t,"must be a 32-bit unsigned integer or an octal string");t=u(t,8)}return A(t,e),t},validateArray:L,validateStringArray:function(t,e){L(t,e);for(let i=0;i<t.length;i++)C(t[i],`${e}[${i}]`)},validateBooleanArray:function(t,e){L(t,e);for(let i=0;i<t.length;i++)R(t[i],`${e}[${i}]`)},validateAbortSignalArray:function(t,e){L(t,e);for(let i=0;i<t.length;i++){let r=t[i],s=`${e}[${i}]`;if(null==r)throw new y(s,"AbortSignal",r);F(r,s)}},validateBoolean:R,validateBuffer:j,validateDictionary:D,validateEncoding:function(t,e){let i=S(e),r=t.length;if("hex"===i&&r%2!=0)throw new v("encoding",e,`is invalid for data of length ${r}`)},validateFunction:U,validateInt32:O,validateInteger:T,validateNumber:function(t,e,i,r){if("number"!=typeof t)throw new y(e,"number",t);if(null!=i&&t<i||null!=r&&t>r||(null!=i||null!=r)&&l(t))throw new w(e,`${null!=i?`>= ${i}`:""}${null!=i&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,t)},validateObject:N,validateOneOf:P,validatePlainFunction:W,validatePort:function(t,e="Port",i=!0){if("number"!=typeof t&&"string"!=typeof t||"string"==typeof t&&0===m(t).length||+t!=+t>>>0||t>65535||0===t&&!i)throw new _(e,t,i);return 0|t},validateSignalName:function(t,e="signal"){if(C(t,e),void 0===M[t]){if(void 0!==M[g(t)])throw new x(t+" (signals must use all capital letters)");throw new x(t)}},validateString:C,validateUint32:A,validateUndefined:H,validateUnion:function(t,e,i){if(!s(i,t))throw new y(e,`('${n(i,"|")}')`,t)},validateAbortSignal:F,validateLinkHeaderValue:function(t){if("string"==typeof t)return V(t,"hints"),t;if(r(t)){let e=t.length,i="";if(0===e)return i;for(let r=0;r<e;r++){let s=t[r];V(s,"hints"),i+=s,r!==e-1&&(i+=", ")}return i}throw new v("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},3934:(t,e,i)=>{"use strict";let{format:r,inspect:s}=i(4882),{AggregateError:n}=i(4912),o=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],h=/^([A-Z][a-z0-9]*)+$/,c={};function u(t,e){if(!t)throw new c.ERR_INTERNAL_ASSERTION(e)}function d(t){let e="",i=t.length,r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function f(t,e,i){i||(i=Error);class s extends i{constructor(...i){super(function(t,e,i){if("function"==typeof e)return u(e.length<=i.length,`Code: ${t}; The provided arguments length (${i.length}) does not match the required ones (${e.length}).`),e(...i);let s=(e.match(/%[dfijoOs]/g)||[]).length;return(u(s===i.length,`Code: ${t}; The provided arguments length (${i.length}) does not match the required ones (${s}).`),0===i.length)?e:r(e,...i)}(t,e,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(s.prototype,{name:{value:i.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),s.prototype.code=t,s.prototype[a]=!0,c[t]=s}function p(t){let e="__node_internal_"+t.name;return Object.defineProperty(t,"name",{value:e}),t}class g extends Error{constructor(t="The operation was aborted",e){if(void 0!==e&&"object"!=typeof e)throw new c.ERR_INVALID_ARG_TYPE("options","Object",e);super(t,e),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(t,e,i)=>{u("string"==typeof t,"'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let n=[],o=[],a=[];for(let t of e)u("string"==typeof t,"All expected entries have to be of type string"),l.includes(t)?n.push(t.toLowerCase()):h.test(t)?o.push(t):(u("object"!==t,'The value "object" should be written as "Object"'),a.push(t));if(o.length>0){let t=n.indexOf("object");-1!==t&&(n.splice(n,t,1),o.push("Object"))}if(n.length>0){switch(n.length){case 1:r+=`of type ${n[0]}`;break;case 2:r+=`one of type ${n[0]} or ${n[1]}`;break;default:{let t=n.pop();r+=`one of type ${n.join(", ")}, or ${t}`}}(o.length>0||a.length>0)&&(r+=" or ")}if(o.length>0){switch(o.length){case 1:r+=`an instance of ${o[0]}`;break;case 2:r+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let t=o.pop();r+=`an instance of ${o.join(", ")}, or ${t}`}}a.length>0&&(r+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(r+="an "),r+=`${a[0]}`;break;case 2:r+=`one of ${a[0]} or ${a[1]}`;break;default:{let t=a.pop();r+=`one of ${a.join(", ")}, or ${t}`}}if(null==i)r+=`. Received ${i}`;else if("function"==typeof i&&i.name)r+=`. Received function ${i.name}`;else if("object"==typeof i){var c;if(null!==(c=i.constructor)&&void 0!==c&&c.name)r+=`. Received an instance of ${i.constructor.name}`;else{let t=s(i,{depth:-1});r+=`. Received ${t}`}}else{let t=s(i,{colors:!1});t.length>25&&(t=`${t.slice(0,25)}...`),r+=`. Received type ${typeof i} (${t})`}return r},TypeError),f("ERR_INVALID_ARG_VALUE",(t,e,i="is invalid")=>{let r=s(e);r.length>128&&(r=r.slice(0,128)+"...");let n=t.includes(".")?"property":"argument";return`The ${n} '${t}' ${i}. Received ${r}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(t,e,i)=>{var r;let s=null!=i&&null!==(r=i.constructor)&&void 0!==r&&r.name?`instance of ${i.constructor.name}`:`type ${typeof i}`;return`Expected ${t} to be returned from the "${e}" function but got ${s}.`},TypeError),f("ERR_MISSING_ARGS",(...t)=>{let e;u(t.length>0,"At least one arg needs to be specified");let i=t.length;switch(t=(Array.isArray(t)?t:[t]).map(t=>`"${t}"`).join(" or "),i){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let i=t.pop();e+=`The ${t.join(", ")}, and ${i} arguments`}}return`${e} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(t,e,i)=>{let r;if(u(e,'Missing "range" argument'),Number.isInteger(i)&&Math.abs(i)>4294967296)r=d(String(i));else if("bigint"==typeof i){r=String(i);let t=BigInt(2)**BigInt(32);(i>t||i<-t)&&(r=d(r)),r+="n"}else r=s(i);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:g,aggregateTwoErrors:p(function(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let i=new o([e,t],e.message);return i.code=e.code,i}return t||e}),hideStackFrames:p,codes:c}},1650:(t,e,i)=>{"use strict";let r=i(6162);if(r&&"disable"===process.env.READABLE_STREAM){let e=r.promises;t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>e}),t.exports.Stream=r.Stream}else{let e=i(7113),r=i(9588),s=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=s,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get:()=>r}),t.exports.Stream=e.Stream}t.exports.default=t.exports},4912:t=>{"use strict";class e extends Error{constructor(t){if(!Array.isArray(t))throw TypeError(`Expected input to be an Array, got ${typeof t}`);let e="";for(let i=0;i<t.length;i++)e+=`    ${t[i].stack}
`;super(e),this.name="AggregateError",this.errors=t}}t.exports={AggregateError:e,ArrayIsArray:t=>Array.isArray(t),ArrayPrototypeIncludes:(t,e)=>t.includes(e),ArrayPrototypeIndexOf:(t,e)=>t.indexOf(e),ArrayPrototypeJoin:(t,e)=>t.join(e),ArrayPrototypeMap:(t,e)=>t.map(e),ArrayPrototypePop:(t,e)=>t.pop(e),ArrayPrototypePush:(t,e)=>t.push(e),ArrayPrototypeSlice:(t,e,i)=>t.slice(e,i),Error,FunctionPrototypeCall:(t,e,...i)=>t.call(e,...i),FunctionPrototypeSymbolHasInstance:(t,e)=>Function.prototype[Symbol.hasInstance].call(t,e),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(t,e)=>Object.defineProperties(t,e),ObjectDefineProperty:(t,e,i)=>Object.defineProperty(t,e,i),ObjectGetOwnPropertyDescriptor:(t,e)=>Object.getOwnPropertyDescriptor(t,e),ObjectKeys:t=>Object.keys(t),ObjectSetPrototypeOf:(t,e)=>Object.setPrototypeOf(t,e),Promise,PromisePrototypeCatch:(t,e)=>t.catch(e),PromisePrototypeThen:(t,e,i)=>t.then(e,i),PromiseReject:t=>Promise.reject(t),PromiseResolve:t=>Promise.resolve(t),ReflectApply:Reflect.apply,RegExpPrototypeTest:(t,e)=>t.test(e),SafeSet:Set,String,StringPrototypeSlice:(t,e,i)=>t.slice(e,i),StringPrototypeToLowerCase:t=>t.toLowerCase(),StringPrototypeToUpperCase:t=>t.toUpperCase(),StringPrototypeTrim:t=>t.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(t,e,i)=>t.set(e,i),Boolean,Uint8Array}},5241:(t,e,i)=>{"use strict";let r=i(8893),{format:s,inspect:n}=i(4882),{codes:{ERR_INVALID_ARG_TYPE:o}}=i(3934),{kResistStopPropagation:a,AggregateError:l,SymbolDispose:h}=i(4912),AbortSignal=globalThis.AbortSignal||i(1172).AbortSignal,c=globalThis.AbortController||i(1172).AbortController,u=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||r.Blob,f=(t,e)=>{if(void 0!==t&&(null===t||"object"!=typeof t||!("aborted"in t)))throw new o(e,"AbortSignal",t)},p=(t,e)=>{if("function"!=typeof t)throw new o(e,"Function",t)};t.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...i){e||(e=!0,t.apply(this,i))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((i,r)=>{t=i,e=r}),resolve:t,reject:e}},promisify:t=>new Promise((e,i)=>{t((t,...r)=>t?i(t):e(...r))}),debuglog:()=>function(){},format:s,inspect:n,types:{isAsyncFunction:t=>t instanceof u,isArrayBufferView:t=>ArrayBuffer.isView(t)},isBlob:void 0!==d?function(t){return t instanceof d}:function(t){return!1},deprecate:(t,e)=>t,addAbortListener:i(7702).addAbortListener||function(t,e){let i;if(void 0===t)throw new o("signal","AbortSignal",t);return f(t,"signal"),p(e,"listener"),t.aborted?queueMicrotask(()=>e()):(t.addEventListener("abort",e,{__proto__:null,once:!0,[a]:!0}),i=()=>{t.removeEventListener("abort",e)}),{__proto__:null,[h](){var t;null===(t=i)||void 0===t||t()}}},AbortSignalAny:AbortSignal.any||function(t){if(1===t.length)return t[0];let e=new c,i=()=>e.abort();return t.forEach(t=>{f(t,"signals"),t.addEventListener("abort",i,{once:!0})}),e.signal.addEventListener("abort",()=>{t.forEach(t=>t.removeEventListener("abort",i))},{once:!0}),e.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},4882:t=>{"use strict";t.exports={format:(t,...e)=>t.replace(/%([sdifj])/g,function(...[t,i]){let r=e.shift();if("f"===i)return r.toFixed(6);if("j"===i)return JSON.stringify(r);if("s"!==i||"object"!=typeof r)return r.toString();{let t=r.constructor!==Object?r.constructor.name:"";return`${t} {}`.trim()}}),inspect(t){switch(typeof t){case"string":if(t.includes("'")){if(!t.includes('"'))return`"${t}"`;if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}return`'${t}'`;case"number":if(isNaN(t))return"NaN";if(Object.is(t,-0))return String(t);return t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}},7113:(t,e,i)=>{"use strict";let{Buffer:r}=i(8893),{ObjectDefineProperty:s,ObjectKeys:n,ReflectApply:o}=i(4912),{promisify:{custom:a}}=i(5241),{streamReturningOperators:l,promiseReturningOperators:h}=i(7608),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=i(3934),u=i(4772),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:f}=i(7247),{pipeline:p}=i(5957),{destroyer:g}=i(6420),m=i(7398),b=i(9588),_=i(5302),y=t.exports=i(7593).Stream;for(let t of(y.isDestroyed=_.isDestroyed,y.isDisturbed=_.isDisturbed,y.isErrored=_.isErrored,y.isReadable=_.isReadable,y.isWritable=_.isWritable,y.Readable=i(8652),n(l))){let e=l[t];function v(...t){if(new.target)throw c();return y.Readable.from(o(e,this,t))}s(v,"name",{__proto__:null,value:e.name}),s(v,"length",{__proto__:null,value:e.length}),s(y.Readable.prototype,t,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(let t of n(h)){let e=h[t];function w(...t){if(new.target)throw c();return o(e,this,t)}s(w,"name",{__proto__:null,value:e.name}),s(w,"length",{__proto__:null,value:e.length}),s(y.Readable.prototype,t,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}y.Writable=i(3909),y.Duplex=i(1146),y.Transform=i(7217),y.PassThrough=i(9234),y.pipeline=p;let{addAbortSignal:x}=i(4378);y.addAbortSignal=x,y.finished=m,y.destroy=g,y.compose=u,y.setDefaultHighWaterMark=d,y.getDefaultHighWaterMark=f,s(y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>b}),s(p,a,{__proto__:null,enumerable:!0,get:()=>b.pipeline}),s(m,a,{__proto__:null,enumerable:!0,get:()=>b.finished}),y.Stream=y,y._isUint8Array=function(t){return t instanceof Uint8Array},y._uint8ArrayToBuffer=function(t){return r.from(t.buffer,t.byteOffset,t.byteLength)}},9588:(t,e,i)=>{"use strict";let{ArrayPrototypePop:r,Promise:s}=i(4912),{isIterable:n,isNodeStream:o,isWebStream:a}=i(5302),{pipelineImpl:l}=i(5957),{finished:h}=i(7398);i(7113),t.exports={finished:h,pipeline:function(...t){return new s((e,i)=>{let s,h;let c=t[t.length-1];if(c&&"object"==typeof c&&!o(c)&&!n(c)&&!a(c)){let e=r(t);s=e.signal,h=e.end}l(t,(t,r)=>{t?i(t):e(r)},{signal:s,end:h})})}}},6042:(t,e,i)=>{"use strict";t.exports=i(4946)()},4946:t=>{"use strict";function e(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}t.exports=function(t){if((t=t||{}).circles)return function(t){let i=[],r=[],s=new Map;if(s.set(Date,t=>new Date(t)),s.set(Map,(t,e)=>new Map(o(Array.from(t),e))),s.set(Set,(t,e)=>new Set(o(Array.from(t),e))),t.constructorHandlers)for(let e of t.constructorHandlers)s.set(e[0],e[1]);let n=null;return t.proto?function t(a){if("object"!=typeof a||null===a)return a;if(Array.isArray(a))return o(a,t);if(a.constructor!==Object&&(n=s.get(a.constructor)))return n(a,t);let l={};for(let o in i.push(a),r.push(l),a){let h=a[o];if("object"!=typeof h||null===h)l[o]=h;else if(h.constructor!==Object&&(n=s.get(h.constructor)))l[o]=n(h,t);else if(ArrayBuffer.isView(h))l[o]=e(h);else{let e=i.indexOf(h);-1!==e?l[o]=r[e]:l[o]=t(h)}}return i.pop(),r.pop(),l}:function t(a){if("object"!=typeof a||null===a)return a;if(Array.isArray(a))return o(a,t);if(a.constructor!==Object&&(n=s.get(a.constructor)))return n(a,t);let l={};for(let o in i.push(a),r.push(l),a){if(!1===Object.hasOwnProperty.call(a,o))continue;let h=a[o];if("object"!=typeof h||null===h)l[o]=h;else if(h.constructor!==Object&&(n=s.get(h.constructor)))l[o]=n(h,t);else if(ArrayBuffer.isView(h))l[o]=e(h);else{let e=i.indexOf(h);-1!==e?l[o]=r[e]:l[o]=t(h)}}return i.pop(),r.pop(),l};function o(t,o){let a=Object.keys(t),l=Array(a.length);for(let h=0;h<a.length;h++){let c=a[h],u=t[c];if("object"!=typeof u||null===u)l[c]=u;else if(u.constructor!==Object&&(n=s.get(u.constructor)))l[c]=n(u,o);else if(ArrayBuffer.isView(u))l[c]=e(u);else{let t=i.indexOf(u);-1!==t?l[c]=r[t]:l[c]=o(u)}}return l}}(t);let i=new Map;if(i.set(Date,t=>new Date(t)),i.set(Map,(t,e)=>new Map(s(Array.from(t),e))),i.set(Set,(t,e)=>new Set(s(Array.from(t),e))),t.constructorHandlers)for(let e of t.constructorHandlers)i.set(e[0],e[1]);let r=null;return t.proto?function t(n){if("object"!=typeof n||null===n)return n;if(Array.isArray(n))return s(n,t);if(n.constructor!==Object&&(r=i.get(n.constructor)))return r(n,t);let o={};for(let s in n){let a=n[s];"object"!=typeof a||null===a?o[s]=a:a.constructor!==Object&&(r=i.get(a.constructor))?o[s]=r(a,t):ArrayBuffer.isView(a)?o[s]=e(a):o[s]=t(a)}return o}:function t(n){if("object"!=typeof n||null===n)return n;if(Array.isArray(n))return s(n,t);if(n.constructor!==Object&&(r=i.get(n.constructor)))return r(n,t);let o={};for(let s in n){if(!1===Object.hasOwnProperty.call(n,s))continue;let a=n[s];"object"!=typeof a||null===a?o[s]=a:a.constructor!==Object&&(r=i.get(a.constructor))?o[s]=r(a,t):ArrayBuffer.isView(a)?o[s]=e(a):o[s]=t(a)}return o};function s(t,s){let n=Object.keys(t),o=Array(n.length);for(let a=0;a<n.length;a++){let l=n[a],h=t[l];"object"!=typeof h||null===h?o[l]=h:h.constructor!==Object&&(r=i.get(h.constructor))?o[l]=r(h,s):ArrayBuffer.isView(h)?o[l]=e(h):o[l]=s(h)}return o}}},892:(t,e,i)=>{var r=i(8893),s=r.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return s(t,e,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=r:(n(r,e),e.Buffer=o),o.prototype=Object.create(s.prototype),n(s,o),o.from=function(t,e,i){if("number"==typeof t)throw TypeError("Argument must not be a number");return s(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw TypeError("Argument must be a number");var r=s(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return s(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return r.SlowBuffer(t)}},1659:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=i(4794);class s{constructor(t){if(this.length=0,this._encoding="utf8",this._writeOffset=0,this._readOffset=0,s.isSmartBufferOptions(t)){if(t.encoding&&(r.checkEncoding(t.encoding),this._encoding=t.encoding),t.size){if(r.isFiniteInteger(t.size)&&t.size>0)this._buff=Buffer.allocUnsafe(t.size);else throw Error(r.ERRORS.INVALID_SMARTBUFFER_SIZE)}else if(t.buff){if(Buffer.isBuffer(t.buff))this._buff=t.buff,this.length=t.buff.length;else throw Error(r.ERRORS.INVALID_SMARTBUFFER_BUFFER)}else this._buff=Buffer.allocUnsafe(4096)}else{if(void 0!==t)throw Error(r.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(4096)}}static fromSize(t,e){return new this({size:t,encoding:e})}static fromBuffer(t,e){return new this({buff:t,encoding:e})}static fromOptions(t){return new this(t)}static isSmartBufferOptions(t){return t&&(void 0!==t.encoding||void 0!==t.size||void 0!==t.buff)}readInt8(t){return this._readNumberValue(Buffer.prototype.readInt8,1,t)}readInt16BE(t){return this._readNumberValue(Buffer.prototype.readInt16BE,2,t)}readInt16LE(t){return this._readNumberValue(Buffer.prototype.readInt16LE,2,t)}readInt32BE(t){return this._readNumberValue(Buffer.prototype.readInt32BE,4,t)}readInt32LE(t){return this._readNumberValue(Buffer.prototype.readInt32LE,4,t)}readBigInt64BE(t){return r.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,t)}readBigInt64LE(t){return r.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,t)}writeInt8(t,e){return this._writeNumberValue(Buffer.prototype.writeInt8,1,t,e),this}insertInt8(t,e){return this._insertNumberValue(Buffer.prototype.writeInt8,1,t,e)}writeInt16BE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,t,e)}insertInt16BE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,t,e)}writeInt16LE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,t,e)}insertInt16LE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,t,e)}writeInt32BE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,t,e)}insertInt32BE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,t,e)}writeInt32LE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,t,e)}insertInt32LE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,t,e)}writeBigInt64BE(t,e){return r.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,t,e)}insertBigInt64BE(t,e){return r.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,t,e)}writeBigInt64LE(t,e){return r.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,t,e)}insertBigInt64LE(t,e){return r.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,t,e)}readUInt8(t){return this._readNumberValue(Buffer.prototype.readUInt8,1,t)}readUInt16BE(t){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,t)}readUInt16LE(t){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,t)}readUInt32BE(t){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,t)}readUInt32LE(t){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,t)}readBigUInt64BE(t){return r.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,t)}readBigUInt64LE(t){return r.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,t)}writeUInt8(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,t,e)}insertUInt8(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,t,e)}writeUInt16BE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,t,e)}insertUInt16BE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,t,e)}writeUInt16LE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,t,e)}insertUInt16LE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,t,e)}writeUInt32BE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,t,e)}insertUInt32BE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,t,e)}writeUInt32LE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,t,e)}insertUInt32LE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,t,e)}writeBigUInt64BE(t,e){return r.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,t,e)}insertBigUInt64BE(t,e){return r.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,t,e)}writeBigUInt64LE(t,e){return r.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,t,e)}insertBigUInt64LE(t,e){return r.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,t,e)}readFloatBE(t){return this._readNumberValue(Buffer.prototype.readFloatBE,4,t)}readFloatLE(t){return this._readNumberValue(Buffer.prototype.readFloatLE,4,t)}writeFloatBE(t,e){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,t,e)}insertFloatBE(t,e){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,t,e)}writeFloatLE(t,e){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,t,e)}insertFloatLE(t,e){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,t,e)}readDoubleBE(t){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,t)}readDoubleLE(t){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,t)}writeDoubleBE(t,e){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,t,e)}insertDoubleBE(t,e){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,t,e)}writeDoubleLE(t,e){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,t,e)}insertDoubleLE(t,e){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,t,e)}readString(t,e){let i;"number"==typeof t?(r.checkLengthValue(t),i=Math.min(t,this.length-this._readOffset)):(e=t,i=this.length-this._readOffset),void 0!==e&&r.checkEncoding(e);let s=this._buff.slice(this._readOffset,this._readOffset+i).toString(e||this._encoding);return this._readOffset+=i,s}insertString(t,e,i){return r.checkOffsetValue(e),this._handleString(t,!0,e,i)}writeString(t,e,i){return this._handleString(t,!1,e,i)}readStringNT(t){void 0!==t&&r.checkEncoding(t);let e=this.length;for(let t=this._readOffset;t<this.length;t++)if(0===this._buff[t]){e=t;break}let i=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,i.toString(t||this._encoding)}insertStringNT(t,e,i){return r.checkOffsetValue(e),this.insertString(t,e,i),this.insertUInt8(0,e+t.length),this}writeStringNT(t,e,i){return this.writeString(t,e,i),this.writeUInt8(0,"number"==typeof e?e+t.length:this.writeOffset),this}readBuffer(t){void 0!==t&&r.checkLengthValue(t);let e="number"==typeof t?t:this.length,i=Math.min(this.length,this._readOffset+e),s=this._buff.slice(this._readOffset,i);return this._readOffset=i,s}insertBuffer(t,e){return r.checkOffsetValue(e),this._handleBuffer(t,!0,e)}writeBuffer(t,e){return this._handleBuffer(t,!1,e)}readBufferNT(){let t=this.length;for(let e=this._readOffset;e<this.length;e++)if(0===this._buff[e]){t=e;break}let e=this._buff.slice(this._readOffset,t);return this._readOffset=t+1,e}insertBufferNT(t,e){return r.checkOffsetValue(e),this.insertBuffer(t,e),this.insertUInt8(0,e+t.length),this}writeBufferNT(t,e){return void 0!==e&&r.checkOffsetValue(e),this.writeBuffer(t,e),this.writeUInt8(0,"number"==typeof e?e+t.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(t){r.checkOffsetValue(t),r.checkTargetOffset(t,this),this._readOffset=t}get writeOffset(){return this._writeOffset}set writeOffset(t){r.checkOffsetValue(t),r.checkTargetOffset(t,this),this._writeOffset=t}get encoding(){return this._encoding}set encoding(t){r.checkEncoding(t),this._encoding=t}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(t){let e="string"==typeof t?t:this._encoding;return r.checkEncoding(e),this._buff.toString(e,0,this.length)}destroy(){return this.clear(),this}_handleString(t,e,i,s){let n=this._writeOffset,o=this._encoding;"number"==typeof i?n=i:"string"==typeof i&&(r.checkEncoding(i),o=i),"string"==typeof s&&(r.checkEncoding(s),o=s);let a=Buffer.byteLength(t,o);return e?this.ensureInsertable(a,n):this._ensureWriteable(a,n),this._buff.write(t,n,a,o),e?this._writeOffset+=a:"number"==typeof i?this._writeOffset=Math.max(this._writeOffset,n+a):this._writeOffset+=a,this}_handleBuffer(t,e,i){let r="number"==typeof i?i:this._writeOffset;return e?this.ensureInsertable(t.length,r):this._ensureWriteable(t.length,r),t.copy(this._buff,r),e?this._writeOffset+=t.length:"number"==typeof i?this._writeOffset=Math.max(this._writeOffset,r+t.length):this._writeOffset+=t.length,this}ensureReadable(t,e){let i=this._readOffset;if(void 0!==e&&(r.checkOffsetValue(e),i=e),i<0||i+t>this.length)throw Error(r.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(t,e){r.checkOffsetValue(e),this._ensureCapacity(this.length+t),e<this.length&&this._buff.copy(this._buff,e+t,e,this._buff.length),e+t>this.length?this.length=e+t:this.length+=t}_ensureWriteable(t,e){let i="number"==typeof e?e:this._writeOffset;this._ensureCapacity(i+t),i+t>this.length&&(this.length=i+t)}_ensureCapacity(t){let e=this._buff.length;if(t>e){let i=this._buff,r=3*e/2+1;r<t&&(r=t),this._buff=Buffer.allocUnsafe(r),i.copy(this._buff,0,0,e)}}_readNumberValue(t,e,i){this.ensureReadable(e,i);let r=t.call(this._buff,"number"==typeof i?i:this._readOffset);return void 0===i&&(this._readOffset+=e),r}_insertNumberValue(t,e,i,s){return r.checkOffsetValue(s),this.ensureInsertable(e,s),t.call(this._buff,i,s),this._writeOffset+=e,this}_writeNumberValue(t,e,i,s){if("number"==typeof s){if(s<0)throw Error(r.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);r.checkOffsetValue(s)}let n="number"==typeof s?s:this._writeOffset;return this._ensureWriteable(e,n),t.call(this._buff,i,n),"number"==typeof s?this._writeOffset=Math.max(this._writeOffset,n+e):this._writeOffset+=e,this}}e.SmartBuffer=s},4794:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=i(8893),s={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};function n(t){var e;return"number"==typeof t&&isFinite(t)&&"number"==typeof(e=t)&&isFinite(e)&&Math.floor(e)===e}function o(t,e){if("number"==typeof t){if(!n(t)||t<0)throw Error(e?s.INVALID_OFFSET:s.INVALID_LENGTH)}else throw Error(e?s.INVALID_OFFSET_NON_NUMBER:s.INVALID_LENGTH_NON_NUMBER)}e.ERRORS=s,e.checkEncoding=function(t){if(!r.Buffer.isEncoding(t))throw Error(s.INVALID_ENCODING)},e.isFiniteInteger=n,e.checkLengthValue=function(t){o(t,!1)},e.checkOffsetValue=function(t){o(t,!0)},e.checkTargetOffset=function(t,e){if(t<0||t>e.length)throw Error(s.INVALID_TARGET_OFFSET)},e.bigIntAndBufferInt64Check=function(t){if("undefined"==typeof BigInt)throw Error("Platform does not support JS BigInt type.");if(void 0===r.Buffer.prototype[t])throw Error(`Platform does not support Buffer.prototype.${t}.`)}},3434:function(t,e,i){"use strict";var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(s,n){function o(t){try{l(r.next(t))}catch(t){n(t)}}function a(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?s(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(o,a)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.SocksClientError=e.SocksClient=void 0;let s=i(7702),n=i(8216),o=i(1659),a=i(1243),l=i(6929),h=i(9940),c=i(8462);Object.defineProperty(e,"SocksClientError",{enumerable:!0,get:function(){return c.SocksClientError}});let u=i(29);class d extends s.EventEmitter{constructor(t){super(),this.options=Object.assign({},t),(0,l.validateSocksClientOptions)(t),this.setState(a.SocksClientState.Created)}static createConnection(t,e){return new Promise((i,r)=>{try{(0,l.validateSocksClientOptions)(t,["connect"])}catch(t){if("function"==typeof e)return e(t),i(t);return r(t)}let s=new d(t);s.connect(t.existing_socket),s.once("established",t=>{s.removeAllListeners(),"function"==typeof e&&e(null,t),i(t)}),s.once("error",t=>{s.removeAllListeners(),"function"==typeof e?(e(t),i(t)):r(t)})})}static createConnectionChain(t,e){return new Promise((i,s)=>r(this,void 0,void 0,function*(){try{(0,l.validateSocksClientChainOptions)(t)}catch(t){if("function"==typeof e)return e(t),i(t);return s(t)}t.randomizeChain&&(0,c.shuffleArray)(t.proxies);try{let r;for(let e=0;e<t.proxies.length;e++){let i=t.proxies[e],s=e===t.proxies.length-1?t.destination:{host:t.proxies[e+1].host||t.proxies[e+1].ipaddress,port:t.proxies[e+1].port},n=yield d.createConnection({command:"connect",proxy:i,destination:s,existing_socket:r});r=r||n.socket}"function"==typeof e&&e(null,{socket:r}),i({socket:r})}catch(t){"function"==typeof e?(e(t),i(t)):s(t)}}))}static createUDPFrame(t){let e=new o.SmartBuffer;return e.writeUInt16BE(0),e.writeUInt8(t.frameNumber||0),n.isIPv4(t.remoteHost.host)?(e.writeUInt8(a.Socks5HostType.IPv4),e.writeUInt32BE((0,l.ipv4ToInt32)(t.remoteHost.host))):n.isIPv6(t.remoteHost.host)?(e.writeUInt8(a.Socks5HostType.IPv6),e.writeBuffer((0,l.ipToBuffer)(t.remoteHost.host))):(e.writeUInt8(a.Socks5HostType.Hostname),e.writeUInt8(Buffer.byteLength(t.remoteHost.host)),e.writeString(t.remoteHost.host)),e.writeUInt16BE(t.remoteHost.port),e.writeBuffer(t.data),e.toBuffer()}static parseUDPFrame(t){let e=o.SmartBuffer.fromBuffer(t);e.readOffset=2;let i=e.readUInt8(),r=e.readUInt8();return{frameNumber:i,remoteHost:{host:r===a.Socks5HostType.IPv4?(0,l.int32ToIpv4)(e.readUInt32BE()):r===a.Socks5HostType.IPv6?u.Address6.fromByteArray(Array.from(e.readBuffer(16))).canonicalForm():e.readString(e.readUInt8()),port:e.readUInt16BE()},data:e.readBuffer()}}setState(t){this.state!==a.SocksClientState.Error&&(this.state=t)}connect(t){this.onDataReceived=t=>this.onDataReceivedHandler(t),this.onClose=()=>this.onCloseHandler(),this.onError=t=>this.onErrorHandler(t),this.onConnect=()=>this.onConnectHandler();let e=setTimeout(()=>this.onEstablishedTimeout(),this.options.timeout||a.DEFAULT_TIMEOUT);e.unref&&"function"==typeof e.unref&&e.unref(),t?this.socket=t:this.socket=new n.Socket,this.socket.once("close",this.onClose),this.socket.once("error",this.onError),this.socket.once("connect",this.onConnect),this.socket.on("data",this.onDataReceived),this.setState(a.SocksClientState.Connecting),this.receiveBuffer=new h.ReceiveBuffer,t?this.socket.emit("connect"):(this.socket.connect(this.getSocketOptions()),void 0!==this.options.set_tcp_nodelay&&null!==this.options.set_tcp_nodelay&&this.socket.setNoDelay(!!this.options.set_tcp_nodelay)),this.prependOnceListener("established",t=>{setImmediate(()=>{if(this.receiveBuffer.length>0){let e=this.receiveBuffer.get(this.receiveBuffer.length);t.socket.emit("data",e)}t.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){this.state!==a.SocksClientState.Established&&this.state!==a.SocksClientState.BoundWaitingForConnection&&this.closeSocket(a.ERRORS.ProxyConnectionTimedOut)}onConnectHandler(){this.setState(a.SocksClientState.Connected),4===this.options.proxy.type?this.sendSocks4InitialHandshake():this.sendSocks5InitialHandshake(),this.setState(a.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(t){this.receiveBuffer.append(t),this.processData()}processData(){for(;this.state!==a.SocksClientState.Established&&this.state!==a.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize;)if(this.state===a.SocksClientState.SentInitialHandshake)4===this.options.proxy.type?this.handleSocks4FinalHandshakeResponse():this.handleInitialSocks5HandshakeResponse();else if(this.state===a.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===a.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else if(this.state===a.SocksClientState.BoundWaitingForConnection)4===this.options.proxy.type?this.handleSocks4IncomingConnectionResponse():this.handleSocks5IncomingConnectionResponse();else{this.closeSocket(a.ERRORS.InternalError);break}}onCloseHandler(){this.closeSocket(a.ERRORS.SocketClosed)}onErrorHandler(t){this.closeSocket(t.message)}removeInternalSocketHandlers(){this.socket.pause(),this.socket.removeListener("data",this.onDataReceived),this.socket.removeListener("close",this.onClose),this.socket.removeListener("error",this.onError),this.socket.removeListener("connect",this.onConnect)}closeSocket(t){this.state!==a.SocksClientState.Error&&(this.setState(a.SocksClientState.Error),this.socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new c.SocksClientError(t,this.options)))}sendSocks4InitialHandshake(){let t=this.options.proxy.userId||"",e=new o.SmartBuffer;e.writeUInt8(4),e.writeUInt8(a.SocksCommand[this.options.command]),e.writeUInt16BE(this.options.destination.port),n.isIPv4(this.options.destination.host)?(e.writeBuffer((0,l.ipToBuffer)(this.options.destination.host)),e.writeStringNT(t)):(e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(1),e.writeStringNT(t),e.writeStringNT(this.options.destination.host)),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this.socket.write(e.toBuffer())}handleSocks4FinalHandshakeResponse(){let t=this.receiveBuffer.get(8);if(t[1]!==a.Socks4Response.Granted)this.closeSocket(`${a.ERRORS.Socks4ProxyRejectedConnection} - (${a.Socks4Response[t[1]]})`);else if(a.SocksCommand[this.options.command]===a.SocksCommand.bind){let e=o.SmartBuffer.fromBuffer(t);e.readOffset=2;let i={port:e.readUInt16BE(),host:(0,l.int32ToIpv4)(e.readUInt32BE())};"0.0.0.0"===i.host&&(i.host=this.options.proxy.ipaddress),this.setState(a.SocksClientState.BoundWaitingForConnection),this.emit("bound",{remoteHost:i,socket:this.socket})}else this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{socket:this.socket})}handleSocks4IncomingConnectionResponse(){let t=this.receiveBuffer.get(8);if(t[1]!==a.Socks4Response.Granted)this.closeSocket(`${a.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${a.Socks4Response[t[1]]})`);else{let e=o.SmartBuffer.fromBuffer(t);e.readOffset=2;let i={port:e.readUInt16BE(),host:(0,l.int32ToIpv4)(e.readUInt32BE())};this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:i,socket:this.socket})}}sendSocks5InitialHandshake(){let t=new o.SmartBuffer,e=[a.Socks5Auth.NoAuth];for(let i of((this.options.proxy.userId||this.options.proxy.password)&&e.push(a.Socks5Auth.UserPass),void 0!==this.options.proxy.custom_auth_method&&e.push(this.options.proxy.custom_auth_method),t.writeUInt8(5),t.writeUInt8(e.length),e))t.writeUInt8(i);this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this.socket.write(t.toBuffer()),this.setState(a.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){let t=this.receiveBuffer.get(2);5!==t[0]?this.closeSocket(a.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion):t[1]===a.SOCKS5_NO_ACCEPTABLE_AUTH?this.closeSocket(a.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType):t[1]===a.Socks5Auth.NoAuth?(this.socks5ChosenAuthType=a.Socks5Auth.NoAuth,this.sendSocks5CommandRequest()):t[1]===a.Socks5Auth.UserPass?(this.socks5ChosenAuthType=a.Socks5Auth.UserPass,this.sendSocks5UserPassAuthentication()):t[1]===this.options.proxy.custom_auth_method?(this.socks5ChosenAuthType=this.options.proxy.custom_auth_method,this.sendSocks5CustomAuthentication()):this.closeSocket(a.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){let t=this.options.proxy.userId||"",e=this.options.proxy.password||"",i=new o.SmartBuffer;i.writeUInt8(1),i.writeUInt8(Buffer.byteLength(t)),i.writeString(t),i.writeUInt8(Buffer.byteLength(e)),i.writeString(e),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this.socket.write(i.toBuffer()),this.setState(a.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return r(this,void 0,void 0,function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size,this.socket.write((yield this.options.proxy.custom_auth_request_handler())),this.setState(a.SocksClientState.SentAuthentication)})}handleSocks5CustomAuthHandshakeResponse(t){return r(this,void 0,void 0,function*(){return yield this.options.proxy.custom_auth_response_handler(t)})}handleSocks5AuthenticationNoAuthHandshakeResponse(t){return r(this,void 0,void 0,function*(){return 0===t[1]})}handleSocks5AuthenticationUserPassHandshakeResponse(t){return r(this,void 0,void 0,function*(){return 0===t[1]})}handleInitialSocks5AuthenticationHandshakeResponse(){return r(this,void 0,void 0,function*(){this.setState(a.SocksClientState.ReceivedAuthenticationResponse);let t=!1;this.socks5ChosenAuthType===a.Socks5Auth.NoAuth?t=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===a.Socks5Auth.UserPass?t=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===this.options.proxy.custom_auth_method&&(t=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size))),t?this.sendSocks5CommandRequest():this.closeSocket(a.ERRORS.Socks5AuthenticationFailed)})}sendSocks5CommandRequest(){let t=new o.SmartBuffer;t.writeUInt8(5),t.writeUInt8(a.SocksCommand[this.options.command]),t.writeUInt8(0),n.isIPv4(this.options.destination.host)?(t.writeUInt8(a.Socks5HostType.IPv4),t.writeBuffer((0,l.ipToBuffer)(this.options.destination.host))):n.isIPv6(this.options.destination.host)?(t.writeUInt8(a.Socks5HostType.IPv6),t.writeBuffer((0,l.ipToBuffer)(this.options.destination.host))):(t.writeUInt8(a.Socks5HostType.Hostname),t.writeUInt8(this.options.destination.host.length),t.writeString(this.options.destination.host)),t.writeUInt16BE(this.options.destination.port),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.socket.write(t.toBuffer()),this.setState(a.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){let t=this.receiveBuffer.peek(5);if(5!==t[0]||t[1]!==a.Socks5Response.Granted)this.closeSocket(`${a.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${a.Socks5Response[t[1]]}`);else{let e,i;let r=t[3];if(r===a.Socks5HostType.IPv4){let t=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<t){this.nextRequiredPacketBufferSize=t;return}i=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(t).slice(4)),"0.0.0.0"===(e={host:(0,l.int32ToIpv4)(i.readUInt32BE()),port:i.readUInt16BE()}).host&&(e.host=this.options.proxy.ipaddress)}else if(r===a.Socks5HostType.Hostname){let r=t[4],s=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(r);if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}e={host:(i=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(5))).readString(r),port:i.readUInt16BE()}}else if(r===a.Socks5HostType.IPv6){let t=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<t){this.nextRequiredPacketBufferSize=t;return}i=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(t).slice(4)),e={host:u.Address6.fromByteArray(Array.from(i.readBuffer(16))).canonicalForm(),port:i.readUInt16BE()}}this.setState(a.SocksClientState.ReceivedFinalResponse),a.SocksCommand[this.options.command]===a.SocksCommand.connect?(this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:e,socket:this.socket})):a.SocksCommand[this.options.command]===a.SocksCommand.bind?(this.setState(a.SocksClientState.BoundWaitingForConnection),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{remoteHost:e,socket:this.socket})):a.SocksCommand[this.options.command]===a.SocksCommand.associate&&(this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:e,socket:this.socket}))}}handleSocks5IncomingConnectionResponse(){let t=this.receiveBuffer.peek(5);if(5!==t[0]||t[1]!==a.Socks5Response.Granted)this.closeSocket(`${a.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${a.Socks5Response[t[1]]}`);else{let e,i;let r=t[3];if(r===a.Socks5HostType.IPv4){let t=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<t){this.nextRequiredPacketBufferSize=t;return}i=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(t).slice(4)),"0.0.0.0"===(e={host:(0,l.int32ToIpv4)(i.readUInt32BE()),port:i.readUInt16BE()}).host&&(e.host=this.options.proxy.ipaddress)}else if(r===a.Socks5HostType.Hostname){let r=t[4],s=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(r);if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}e={host:(i=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(5))).readString(r),port:i.readUInt16BE()}}else if(r===a.Socks5HostType.IPv6){let t=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<t){this.nextRequiredPacketBufferSize=t;return}i=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(t).slice(4)),e={host:u.Address6.fromByteArray(Array.from(i.readBuffer(16))).canonicalForm(),port:i.readUInt16BE()}}this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:e,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}}e.SocksClient=d},1243:(t,e)=>{"use strict";var i,r,s,n,o,a;Object.defineProperty(e,"__esModule",{value:!0}),e.SOCKS5_NO_ACCEPTABLE_AUTH=e.SOCKS5_CUSTOM_AUTH_END=e.SOCKS5_CUSTOM_AUTH_START=e.SOCKS_INCOMING_PACKET_SIZES=e.SocksClientState=e.Socks5Response=e.Socks5HostType=e.Socks5Auth=e.Socks4Response=e.SocksCommand=e.ERRORS=e.DEFAULT_TIMEOUT=void 0,e.DEFAULT_TIMEOUT=3e4,e.ERRORS={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"},e.SOCKS_INCOMING_PACKET_SIZES={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:t=>t+7,Socks4Response:8},function(t){t[t.connect=1]="connect",t[t.bind=2]="bind",t[t.associate=3]="associate"}(i||(e.SocksCommand=i={})),function(t){t[t.Granted=90]="Granted",t[t.Failed=91]="Failed",t[t.Rejected=92]="Rejected",t[t.RejectedIdent=93]="RejectedIdent"}(r||(e.Socks4Response=r={})),function(t){t[t.NoAuth=0]="NoAuth",t[t.GSSApi=1]="GSSApi",t[t.UserPass=2]="UserPass"}(s||(e.Socks5Auth=s={})),e.SOCKS5_CUSTOM_AUTH_START=128,e.SOCKS5_CUSTOM_AUTH_END=254,e.SOCKS5_NO_ACCEPTABLE_AUTH=255,function(t){t[t.Granted=0]="Granted",t[t.Failure=1]="Failure",t[t.NotAllowed=2]="NotAllowed",t[t.NetworkUnreachable=3]="NetworkUnreachable",t[t.HostUnreachable=4]="HostUnreachable",t[t.ConnectionRefused=5]="ConnectionRefused",t[t.TTLExpired=6]="TTLExpired",t[t.CommandNotSupported=7]="CommandNotSupported",t[t.AddressNotSupported=8]="AddressNotSupported"}(n||(e.Socks5Response=n={})),function(t){t[t.IPv4=1]="IPv4",t[t.Hostname=3]="Hostname",t[t.IPv6=4]="IPv6"}(o||(e.Socks5HostType=o={})),function(t){t[t.Created=0]="Created",t[t.Connecting=1]="Connecting",t[t.Connected=2]="Connected",t[t.SentInitialHandshake=3]="SentInitialHandshake",t[t.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",t[t.SentAuthentication=5]="SentAuthentication",t[t.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",t[t.SentFinalHandshake=7]="SentFinalHandshake",t[t.ReceivedFinalResponse=8]="ReceivedFinalResponse",t[t.BoundWaitingForConnection=9]="BoundWaitingForConnection",t[t.Established=10]="Established",t[t.Disconnected=11]="Disconnected",t[t.Error=99]="Error"}(a||(e.SocksClientState=a={}))},6929:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ipToBuffer=e.int32ToIpv4=e.ipv4ToInt32=e.validateSocksClientChainOptions=e.validateSocksClientOptions=void 0;let r=i(8462),s=i(1243),n=i(6162),o=i(29),a=i(8216);function l(t,e){if(void 0!==t.custom_auth_method){if(t.custom_auth_method<s.SOCKS5_CUSTOM_AUTH_START||t.custom_auth_method>s.SOCKS5_CUSTOM_AUTH_END)throw new r.SocksClientError(s.ERRORS.InvalidSocksClientOptionsCustomAuthRange,e);if(void 0===t.custom_auth_request_handler||"function"!=typeof t.custom_auth_request_handler||void 0===t.custom_auth_response_size||void 0===t.custom_auth_response_handler||"function"!=typeof t.custom_auth_response_handler)throw new r.SocksClientError(s.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e)}}function h(t){return t&&"string"==typeof t.host&&256>Buffer.byteLength(t.host)&&"number"==typeof t.port&&t.port>=0&&t.port<=65535}function c(t){return t&&("string"==typeof t.host||"string"==typeof t.ipaddress)&&"number"==typeof t.port&&t.port>=0&&t.port<=65535&&(4===t.type||5===t.type)}function u(t){return"number"==typeof t&&t>0}e.validateSocksClientOptions=function(t,e=["connect","bind","associate"]){if(!s.SocksCommand[t.command])throw new r.SocksClientError(s.ERRORS.InvalidSocksCommand,t);if(-1===e.indexOf(t.command))throw new r.SocksClientError(s.ERRORS.InvalidSocksCommandForOperation,t);if(!h(t.destination))throw new r.SocksClientError(s.ERRORS.InvalidSocksClientOptionsDestination,t);if(!c(t.proxy))throw new r.SocksClientError(s.ERRORS.InvalidSocksClientOptionsProxy,t);if(l(t.proxy,t),t.timeout&&!u(t.timeout))throw new r.SocksClientError(s.ERRORS.InvalidSocksClientOptionsTimeout,t);if(t.existing_socket&&!(t.existing_socket instanceof n.Duplex))throw new r.SocksClientError(s.ERRORS.InvalidSocksClientOptionsExistingSocket,t)},e.validateSocksClientChainOptions=function(t){if("connect"!==t.command)throw new r.SocksClientError(s.ERRORS.InvalidSocksCommandChain,t);if(!h(t.destination))throw new r.SocksClientError(s.ERRORS.InvalidSocksClientOptionsDestination,t);if(!(t.proxies&&Array.isArray(t.proxies)&&t.proxies.length>=2))throw new r.SocksClientError(s.ERRORS.InvalidSocksClientOptionsProxiesLength,t);if(t.proxies.forEach(e=>{if(!c(e))throw new r.SocksClientError(s.ERRORS.InvalidSocksClientOptionsProxy,t);l(e,t)}),t.timeout&&!u(t.timeout))throw new r.SocksClientError(s.ERRORS.InvalidSocksClientOptionsTimeout,t)},e.ipv4ToInt32=function(t){return new o.Address4(t).toArray().reduce((t,e)=>(t<<8)+e,0)>>>0},e.int32ToIpv4=function(t){return[t>>>24&255,t>>>16&255,t>>>8&255,255&t].join(".")},e.ipToBuffer=function(t){if(a.isIPv4(t)){let e=new o.Address4(t);return Buffer.from(e.toArray())}if(a.isIPv6(t)){let e=new o.Address6(t);return Buffer.from(e.canonicalForm().split(":").map(t=>t.padStart(4,"0")).join(""),"hex")}throw Error("Invalid IP address format")}},9940:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReceiveBuffer=void 0;class i{constructor(t=4096){this.buffer=Buffer.allocUnsafe(t),this.offset=0,this.originalSize=t}get length(){return this.offset}append(t){if(!Buffer.isBuffer(t))throw Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this.offset+t.length>=this.buffer.length){let e=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+t.length)),e.copy(this.buffer)}return t.copy(this.buffer,this.offset),this.offset+=t.length}peek(t){if(t>this.offset)throw Error("Attempted to read beyond the bounds of the managed internal data.");return this.buffer.slice(0,t)}get(t){if(t>this.offset)throw Error("Attempted to read beyond the bounds of the managed internal data.");let e=Buffer.allocUnsafe(t);return this.buffer.slice(0,t).copy(e),this.buffer.copyWithin(0,t,t+this.offset-t),this.offset-=t,e}}e.ReceiveBuffer=i},8462:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shuffleArray=e.SocksClientError=void 0;class i extends Error{constructor(t,e){super(t),this.options=e}}e.SocksClientError=i,e.shuffleArray=function(t){for(let e=t.length-1;e>0;e--){let i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}}},6771:function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(e,i);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,s)}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),s=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||r(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),s(i(3434),e)},4394:(t,e,i)=>{"use strict";var r=i(892).Buffer,s=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(t){var e;switch(this.encoding=function(t){var e=function(t){var e;if(!t)return"utf8";for(;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===s||!s(t)))throw Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=h,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=u,e=3;break;default:this.write=d,this.end=f;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if((192&e[0])!=128)return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if((192&e[1])!=128)return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&(192&e[2])!=128)return t.lastNeed=2,""}}(this,t,0);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length)}function l(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function c(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=n,n.prototype.write=function(t){var e,i;if(0===t.length)return"";if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},n.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},n.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var s=o(e[r]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--r<i||-2===s?0:(s=o(e[r]))>=0?(s>0&&(t.lastNeed=s-2),s):--r<i||-2===s?0:(s=o(e[r]))>=0?(s>0&&(2===s?s=0:t.lastNeed=s-3),s):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},n.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},752:(t,e,i)=>{"use strict";let r;i.r(e),i.d(e,{clearInterval:()=>m,clearTimeout:()=>b,setInterval:()=>_,setTimeout:()=>y});let s=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,n=new WeakMap,o=(r=(t,e)=>(n.set(t,e),e),t=>{let e=n.get(t),i=void 0===e?t.size:e<1073741824?e+1:0;if(!t.has(i))return r(t,i);if(t.size<536870912){for(;t.has(i);)i=Math.floor(1073741824*Math.random());return r(t,i)}if(t.size>s)throw Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;t.has(i);)i=Math.floor(Math.random()*s);return r(t,i)}),a=t=>"function"==typeof t.start,l=new WeakMap,h=t=>({...t,connect:({call:t})=>async()=>{let{port1:e,port2:i}=new MessageChannel,r=await t("connect",{port:e},[e]);return l.set(i,r),i},disconnect:({call:t})=>async e=>{let i=l.get(e);if(void 0===i)throw Error("The given port is not connected.");await t("disconnect",{portId:i})},isSupported:({call:t})=>()=>t("isSupported")}),c=new WeakMap,u=t=>{if(c.has(t))return c.get(t);let e=new Map;return c.set(t,e),e},d=new Map([[0,null]]),f=new Map([[0,null]]),p=(t=>{let e=h(t);return t=>{let i=u(t);t.addEventListener("message",({data:t})=>{let{id:e}=t;if(null!==e&&i.has(e)){let{reject:r,resolve:s}=i.get(e);i.delete(e),void 0===t.error?s(t.result):r(Error(t.error.message))}}),a(t)&&t.start();let r=(e,r=null,s=[])=>new Promise((n,a)=>{let l=o(i);i.set(l,{reject:a,resolve:n}),null===r?t.postMessage({id:l,method:e},s):t.postMessage({id:l,method:e,params:r},s)}),s=(e,i,r=[])=>{t.postMessage({id:null,method:e,params:i},r)},n={};for(let[t,i]of Object.entries(e))n={...n,[t]:i({call:r,notify:s})};return{...n}}})({clearInterval:({call:t})=>e=>{"symbol"==typeof d.get(e)&&(d.set(e,null),t("clear",{timerId:e,timerType:"interval"}).then(()=>{d.delete(e)}))},clearTimeout:({call:t})=>e=>{"symbol"==typeof f.get(e)&&(f.set(e,null),t("clear",{timerId:e,timerType:"timeout"}).then(()=>{f.delete(e)}))},setInterval:({call:t})=>(e,i=0,...r)=>{let s=Symbol(),n=o(d);d.set(n,s);let a=()=>t("set",{delay:i,now:performance.timeOrigin+performance.now(),timerId:n,timerType:"interval"}).then(()=>{let t=d.get(n);if(void 0===t)throw Error("The timer is in an undefined state.");t===s&&(e(...r),d.get(n)===s&&a())});return a(),n},setTimeout:({call:t})=>(e,i=0,...r)=>{let s=Symbol(),n=o(f);return f.set(n,s),t("set",{delay:i,now:performance.timeOrigin+performance.now(),timerId:n,timerType:"timeout"}).then(()=>{let t=f.get(n);if(void 0===t)throw Error("The timer is in an undefined state.");t===s&&(f.delete(n),e(...r))}),n}}),g=((t,e)=>{let i=null;return()=>{if(null!==i)return i;let r=new Blob([e],{type:"application/javascript; charset=utf-8"}),s=URL.createObjectURL(r);return i=t(s),setTimeout(()=>URL.revokeObjectURL(s)),i}})(t=>p(new Worker(t)),'(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,u=r(i),c=a(u,i),l=t(c);e.addUniqueNumber=l,e.generateUniqueNumber=c}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o(\'The handler of the method called "\'.concat(t,\'" returned an unexpected result.\'),e),a=(t,r)=>async({data:{id:a,method:i,params:u}})=>{const c=r[i];try{if(void 0===c)throw(e=>o(\'The requested method called "\'.concat(e,\'" is not supported.\'),n))(i);const r=void 0===u?c():c(u);if(void 0===r)throw(t=>o(\'The handler of the method called "\'.concat(t,\'" returned no required result.\'),e))(i);const l=r instanceof Promise?await r:r;if(null===a){if(void 0!==l.result)throw s(i)}else{if(void 0===l.result)throw s(i);const{result:e,transferables:r=[]}=l;t.postMessage({id:a,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:a})}};var i=r(455);const u=new Map,c=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),o=(0,i.generateUniqueNumber)(u);return u.set(o,()=>{n(),t.close(),u.delete(o)}),{result:o}},disconnect:({portId:e})=>{const r=u.get(e);if(void 0===r)throw(e=>o(\'The specified parameter called "portId" with the given value "\'.concat(e,\'" does not identify a port connected to this worker.\'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise(e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])})){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),l=(e,t,r=()=>!0)=>{const n=c(l,t,r),o=a(e,n);return e.addEventListener("message",o),()=>e.removeEventListener("message",o)},d=(e,t)=>r=>{const n=t.get(r);if(void 0===n)return Promise.resolve(!1);const[o,s]=n;return e(o),t.delete(r),s(!1),Promise.resolve(!0)},f=(e,t,r,n)=>(o,s,a)=>{const i=o+s-t.timeOrigin,u=i-t.now();return new Promise(t=>{e.set(a,[r(n,u,i,e,t,a),t])})},m=new Map,h=d(globalThis.clearTimeout,m),p=new Map,v=d(globalThis.clearTimeout,p),w=((e,t)=>{const r=(n,o,s,a)=>{const i=n-e.now();i>0?o.set(a,[t(r,i,n,o,s,a),s]):(o.delete(a),s(!0))};return r})(performance,globalThis.setTimeout),g=f(m,performance,globalThis.setTimeout,w),T=f(p,performance,globalThis.setTimeout,w);l(self,{clear:async({timerId:e,timerType:t})=>({result:await("interval"===t?h(e):v(e))}),set:async({delay:e,now:t,timerId:r,timerType:n})=>({result:await("interval"===n?g:T)(e,t,r)})})})()})();'),m=t=>g().clearInterval(t),b=t=>g().clearTimeout(t),_=(...t)=>g().setInterval(...t),y=(...t)=>g().setTimeout(...t)},3154:(t,e,i)=>{"use strict";let r=i(6342);r.createWebSocketStream=i(2504),r.Server=i(359),r.Receiver=i(3958),r.Sender=i(4036),r.WebSocket=r,r.WebSocketServer=r.Server,t.exports=r},7878:(t,e,i)=>{"use strict";let{EMPTY_BUFFER:r}=i(9353),s=Buffer[Symbol.species];function n(t,e,i,r,s){for(let n=0;n<s;n++)i[r+n]=t[n]^e[3&n]}function o(t,e){for(let i=0;i<t.length;i++)t[i]^=e[3&i]}if(t.exports={concat:function(t,e){if(0===t.length)return r;if(1===t.length)return t[0];let i=Buffer.allocUnsafe(e),n=0;for(let e=0;e<t.length;e++){let r=t[e];i.set(r,n),n+=r.length}return n<e?new s(i.buffer,i.byteOffset,n):i},mask:n,toArrayBuffer:function(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)},toBuffer:function t(e){let i;return(t.readOnly=!0,Buffer.isBuffer(e))?e:(e instanceof ArrayBuffer?i=new s(e):ArrayBuffer.isView(e)?i=new s(e.buffer,e.byteOffset,e.byteLength):(i=Buffer.from(e),t.readOnly=!1),i)},unmask:o},!process.env.WS_NO_BUFFER_UTIL)try{let e=i(8359);t.exports.mask=function(t,i,r,s,o){o<48?n(t,i,r,s,o):e.mask(t,i,r,s,o)},t.exports.unmask=function(t,i){t.length<32?o(t,i):e.unmask(t,i)}}catch(t){}},9353:t=>{"use strict";let e=["nodebuffer","arraybuffer","fragments"],i="undefined"!=typeof Blob;i&&e.push("blob"),t.exports={BINARY_TYPES:e,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:i,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},1368:(t,e,i)=>{"use strict";let{kForOnEventAttribute:r,kListener:s}=i(9353),n=Symbol("kCode"),o=Symbol("kData"),a=Symbol("kError"),l=Symbol("kMessage"),h=Symbol("kReason"),c=Symbol("kTarget"),u=Symbol("kType"),d=Symbol("kWasClean");class f{constructor(t){this[c]=null,this[u]=t}get target(){return this[c]}get type(){return this[u]}}Object.defineProperty(f.prototype,"target",{enumerable:!0}),Object.defineProperty(f.prototype,"type",{enumerable:!0});class p extends f{constructor(t,e={}){super(t),this[n]=void 0===e.code?0:e.code,this[h]=void 0===e.reason?"":e.reason,this[d]=void 0!==e.wasClean&&e.wasClean}get code(){return this[n]}get reason(){return this[h]}get wasClean(){return this[d]}}Object.defineProperty(p.prototype,"code",{enumerable:!0}),Object.defineProperty(p.prototype,"reason",{enumerable:!0}),Object.defineProperty(p.prototype,"wasClean",{enumerable:!0});class g extends f{constructor(t,e={}){super(t),this[a]=void 0===e.error?null:e.error,this[l]=void 0===e.message?"":e.message}get error(){return this[a]}get message(){return this[l]}}Object.defineProperty(g.prototype,"error",{enumerable:!0}),Object.defineProperty(g.prototype,"message",{enumerable:!0});class m extends f{constructor(t,e={}){super(t),this[o]=void 0===e.data?null:e.data}get data(){return this[o]}}function b(t,e,i){"object"==typeof t&&t.handleEvent?t.handleEvent.call(t,i):t.call(e,i)}Object.defineProperty(m.prototype,"data",{enumerable:!0}),t.exports={CloseEvent:p,ErrorEvent:g,Event:f,EventTarget:{addEventListener(t,e,i={}){let n;for(let n of this.listeners(t))if(!i[r]&&n[s]===e&&!n[r])return;if("message"===t)n=function(t,i){let r=new m("message",{data:i?t:t.toString()});r[c]=this,b(e,this,r)};else if("close"===t)n=function(t,i){let r=new p("close",{code:t,reason:i.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});r[c]=this,b(e,this,r)};else if("error"===t)n=function(t){let i=new g("error",{error:t,message:t.message});i[c]=this,b(e,this,i)};else{if("open"!==t)return;n=function(){let t=new f("open");t[c]=this,b(e,this,t)}}n[r]=!!i[r],n[s]=e,i.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let i of this.listeners(t))if(i[s]===e&&!i[r]){this.removeListener(t,i);break}}},MessageEvent:m}},9964:(t,e,i)=>{"use strict";let{tokenChars:r}=i(4568);function s(t,e,i){void 0===t[e]?t[e]=[i]:t[e].push(i)}t.exports={format:function(t){return Object.keys(t).map(e=>{let i=t[e];return Array.isArray(i)||(i=[i]),i.map(t=>[e].concat(Object.keys(t).map(e=>{let i=t[e];return Array.isArray(i)||(i=[i]),i.map(t=>!0===t?e:`${e}=${t}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(t){let e,i;let n=Object.create(null),o=Object.create(null),a=!1,l=!1,h=!1,c=-1,u=-1,d=-1,f=0;for(;f<t.length;f++)if(u=t.charCodeAt(f),void 0===e){if(-1===d&&1===r[u])-1===c&&(c=f);else if(0!==f&&(32===u||9===u))-1===d&&-1!==c&&(d=f);else if(59===u||44===u){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);let i=t.slice(c,d);44===u?(s(n,i,o),o=Object.create(null)):e=i,c=d=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}else if(void 0===i){if(-1===d&&1===r[u])-1===c&&(c=f);else if(32===u||9===u)-1===d&&-1!==c&&(d=f);else if(59===u||44===u){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f),s(o,t.slice(c,d),!0),44===u&&(s(n,e,o),o=Object.create(null),e=void 0),c=d=-1}else if(61===u&&-1!==c&&-1===d)i=t.slice(c,f),c=d=-1;else throw SyntaxError(`Unexpected character at index ${f}`)}else if(l){if(1!==r[u])throw SyntaxError(`Unexpected character at index ${f}`);-1===c?c=f:a||(a=!0),l=!1}else if(h){if(1===r[u])-1===c&&(c=f);else if(34===u&&-1!==c)h=!1,d=f;else if(92===u)l=!0;else throw SyntaxError(`Unexpected character at index ${f}`)}else if(34===u&&61===t.charCodeAt(f-1))h=!0;else if(-1===d&&1===r[u])-1===c&&(c=f);else if(-1!==c&&(32===u||9===u))-1===d&&(d=f);else if(59===u||44===u){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);let r=t.slice(c,d);a&&(r=r.replace(/\\/g,""),a=!1),s(o,i,r),44===u&&(s(n,e,o),o=Object.create(null),e=void 0),i=void 0,c=d=-1}else throw SyntaxError(`Unexpected character at index ${f}`);if(-1===c||h||32===u||9===u)throw SyntaxError("Unexpected end of input");-1===d&&(d=f);let p=t.slice(c,d);return void 0===e?s(n,p,o):(void 0===i?s(o,p,!0):a?s(o,i,p.replace(/\\/g,"")):s(o,i,p),s(n,e,o)),n}}},5936:t=>{"use strict";let e=Symbol("kDone"),i=Symbol("kRun");class r{constructor(t){this[e]=()=>{this.pending--,this[i]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[i]()}[i](){if(this.pending!==this.concurrency&&this.jobs.length){let t=this.jobs.shift();this.pending++,t(this[e])}}}t.exports=r},7959:(t,e,i)=>{"use strict";let r;let s=i(1568),n=i(7878),o=i(5936),{kStatusCode:a}=i(9353),l=Buffer[Symbol.species],h=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),u=Symbol("total-length"),d=Symbol("callback"),f=Symbol("buffers"),p=Symbol("error");class g{constructor(t,e,i){this._maxPayload=0|i,this._options=t||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!e,this._deflate=null,this._inflate=null,this.params=null,r||(r=new o(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let t=this._deflate[d];this._deflate.close(),this._deflate=null,t&&t(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){let e=this._options,i=t.find(t=>(!1!==e.serverNoContextTakeover||!t.server_no_context_takeover)&&(!t.server_max_window_bits||!1!==e.serverMaxWindowBits&&("number"!=typeof e.serverMaxWindowBits||!(e.serverMaxWindowBits>t.server_max_window_bits)))&&("number"!=typeof e.clientMaxWindowBits||!!t.client_max_window_bits));if(!i)throw Error("None of the extension offers can be accepted");return e.serverNoContextTakeover&&(i.server_no_context_takeover=!0),e.clientNoContextTakeover&&(i.client_no_context_takeover=!0),"number"==typeof e.serverMaxWindowBits&&(i.server_max_window_bits=e.serverMaxWindowBits),"number"==typeof e.clientMaxWindowBits?i.client_max_window_bits=e.clientMaxWindowBits:(!0===i.client_max_window_bits||!1===e.clientMaxWindowBits)&&delete i.client_max_window_bits,i}acceptAsClient(t){let e=t[0];if(!1===this._options.clientNoContextTakeover&&e.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(e.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&e.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(e.client_max_window_bits=this._options.clientMaxWindowBits);return e}normalizeParams(t){return t.forEach(t=>{Object.keys(t).forEach(e=>{let i=t[e];if(i.length>1)throw Error(`Parameter "${e}" must have only a single value`);if(i=i[0],"client_max_window_bits"===e){if(!0!==i){let t=+i;if(!Number.isInteger(t)||t<8||t>15)throw TypeError(`Invalid value for parameter "${e}": ${i}`);i=t}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${e}": ${i}`)}else if("server_max_window_bits"===e){let t=+i;if(!Number.isInteger(t)||t<8||t>15)throw TypeError(`Invalid value for parameter "${e}": ${i}`);i=t}else if("client_no_context_takeover"===e||"server_no_context_takeover"===e){if(!0!==i)throw TypeError(`Invalid value for parameter "${e}": ${i}`)}else throw Error(`Unknown parameter "${e}"`);t[e]=i})}),t}decompress(t,e,i){r.add(r=>{this._decompress(t,e,(t,e)=>{r(),i(t,e)})})}compress(t,e,i){r.add(r=>{this._compress(t,e,(t,e)=>{r(),i(t,e)})})}_decompress(t,e,i){let r=this._isServer?"client":"server";if(!this._inflate){let t=`${r}_max_window_bits`,e="number"!=typeof this.params[t]?s.Z_DEFAULT_WINDOWBITS:this.params[t];this._inflate=s.createInflateRaw({...this._options.zlibInflateOptions,windowBits:e}),this._inflate[c]=this,this._inflate[u]=0,this._inflate[f]=[],this._inflate.on("error",_),this._inflate.on("data",b)}this._inflate[d]=i,this._inflate.write(t),e&&this._inflate.write(h),this._inflate.flush(()=>{let t=this._inflate[p];if(t){this._inflate.close(),this._inflate=null,i(t);return}let s=n.concat(this._inflate[f],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[f]=[],e&&this.params[`${r}_no_context_takeover`]&&this._inflate.reset()),i(null,s)})}_compress(t,e,i){let r=this._isServer?"server":"client";if(!this._deflate){let t=`${r}_max_window_bits`,e="number"!=typeof this.params[t]?s.Z_DEFAULT_WINDOWBITS:this.params[t];this._deflate=s.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:e}),this._deflate[u]=0,this._deflate[f]=[],this._deflate.on("data",m)}this._deflate[d]=i,this._deflate.write(t),this._deflate.flush(s.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let t=n.concat(this._deflate[f],this._deflate[u]);e&&(t=new l(t.buffer,t.byteOffset,t.length-4)),this._deflate[d]=null,this._deflate[u]=0,this._deflate[f]=[],e&&this.params[`${r}_no_context_takeover`]&&this._deflate.reset(),i(null,t)})}}function m(t){this[f].push(t),this[u]+=t.length}function b(t){if(this[u]+=t.length,this[c]._maxPayload<1||this[u]<=this[c]._maxPayload){this[f].push(t);return}this[p]=RangeError("Max payload size exceeded"),this[p].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[p][a]=1009,this.removeListener("data",b),this.reset()}function _(t){if(this[c]._inflate=null,this[p]){this[d](this[p]);return}t[a]=1007,this[d](t)}t.exports=g},3958:(t,e,i)=>{"use strict";let{Writable:r}=i(6162),s=i(7959),{BINARY_TYPES:n,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:l}=i(9353),{concat:h,toArrayBuffer:c,unmask:u}=i(7878),{isValidStatusCode:d,isValidUTF8:f}=i(4568),p=Buffer[Symbol.species];class g extends r{constructor(t={}){super(),this._allowSynchronousEvents=void 0===t.allowSynchronousEvents||t.allowSynchronousEvents,this._binaryType=t.binaryType||n[0],this._extensions=t.extensions||{},this._isServer=!!t.isServer,this._maxPayload=0|t.maxPayload,this._skipUTF8Validation=!!t.skipUTF8Validation,this[l]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(t,e,i){if(8===this._opcode&&0==this._state)return i();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(i)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){let e=this._buffers[0];return this._buffers[0]=new p(e.buffer,e.byteOffset+t,e.length-t),new p(e.buffer,e.byteOffset,t)}let e=Buffer.allocUnsafe(t);do{let i=this._buffers[0],r=e.length-t;t>=i.length?e.set(this._buffers.shift(),r):(e.set(new Uint8Array(i.buffer,i.byteOffset,t),r),this._buffers[0]=new p(i.buffer,i.byteOffset+t,i.length-t)),t-=i.length}while(t>0);return e}startLoop(t){this._loop=!0;do switch(this._state){case 0:this.getInfo(t);break;case 1:this.getPayloadLength16(t);break;case 2:this.getPayloadLength64(t);break;case 3:this.getMask();break;case 4:this.getData(t);break;case 5:case 6:this._loop=!1;return}while(this._loop);this._errored||t()}getInfo(t){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if((48&e[0])!=0){t(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));return}let i=(64&e[0])==64;if(i&&!this._extensions[s.extensionName]){t(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(this._fin=(128&e[0])==128,this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(i){t(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(!this._fragmented){t(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));return}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){t(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));return}this._compressed=i}else if(this._opcode>7&&this._opcode<11){if(!this._fin){t(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));return}if(i){t(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){t(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"));return}}else{t(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));return}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&e[1])==128,this._isServer){if(!this._masked){t(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"));return}}else if(this._masked){t(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));return}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(t)}getPayloadLength16(t){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(t)}getPayloadLength64(t){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),i=e.readUInt32BE(0);if(i>2097151){t(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"));return}this._payloadLength=4294967296*i+e.readUInt32BE(4),this.haveLength(t)}haveLength(t){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){t(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));return}this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(t){let e=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}e=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&u(e,this._mask)}if(this._opcode>7){this.controlMessage(e,t);return}if(this._compressed){this._state=5,this.decompress(e,t);return}e.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(e)),this.dataMessage(t)}decompress(t,e){this._extensions[s.extensionName].decompress(t,this._fin,(t,i)=>{if(t)return e(t);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));return}this._fragments.push(i)}this.dataMessage(e),0===this._state&&this.startLoop(e)})}dataMessage(t){if(!this._fin){this._state=0;return}let e=this._messageLength,i=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?h(i,e):"arraybuffer"===this._binaryType?c(h(i,e)):"blob"===this._binaryType?new Blob(i):i,this._allowSynchronousEvents?(this.emit("message",r,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",r,!0),this._state=0,this.startLoop(t)}))}else{let r=h(i,e);if(!this._skipUTF8Validation&&!f(r)){t(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));return}5===this._state||this._allowSynchronousEvents?(this.emit("message",r,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",r,!1),this._state=0,this.startLoop(t)}))}}controlMessage(t,e){if(8===this._opcode){if(0===t.length)this._loop=!1,this.emit("conclude",1005,o),this.end();else{let i=t.readUInt16BE(0);if(!d(i)){e(this.createError(RangeError,`invalid status code ${i}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));return}let r=new p(t.buffer,t.byteOffset+2,t.length-2);if(!this._skipUTF8Validation&&!f(r)){e(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));return}this._loop=!1,this.emit("conclude",i,r),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",t),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",t),this._state=0,this.startLoop(e)}))}createError(t,e,i,r,s){this._loop=!1,this._errored=!0;let n=new t(i?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(n,this.createError),n.code=s,n[a]=r,n}}t.exports=g},4036:(t,e,i)=>{"use strict";let r;let{Duplex:s}=i(6162),{randomFillSync:n}=i(4770),o=i(7959),{EMPTY_BUFFER:a,kWebSocket:l,NOOP:h}=i(9353),{isBlob:c,isValidStatusCode:u}=i(4568),{mask:d,toBuffer:f}=i(7878),p=Symbol("kByteLength"),g=Buffer.alloc(4),m=8192;class b{constructor(t,e,i){this._extensions=e||{},i&&(this._generateMask=i,this._maskBuffer=Buffer.alloc(4)),this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=h,this[l]=void 0}static frame(t,e){let i,s;let o=!1,a=2,l=!1;e.mask&&(i=e.maskBuffer||g,e.generateMask?e.generateMask(i):(8192===m&&(void 0===r&&(r=Buffer.alloc(8192)),n(r,0,8192),m=0),i[0]=r[m++],i[1]=r[m++],i[2]=r[m++],i[3]=r[m++]),l=(i[0]|i[1]|i[2]|i[3])==0,a=6),"string"==typeof t?s=(!e.mask||l)&&void 0!==e[p]?e[p]:(t=Buffer.from(t)).length:(s=t.length,o=e.mask&&e.readOnly&&!l);let h=s;s>=65536?(a+=8,h=127):s>125&&(a+=2,h=126);let c=Buffer.allocUnsafe(o?s+a:a);return(c[0]=e.fin?128|e.opcode:e.opcode,e.rsv1&&(c[0]|=64),c[1]=h,126===h?c.writeUInt16BE(s,2):127===h&&(c[2]=c[3]=0,c.writeUIntBE(s,4,6)),e.mask)?(c[1]|=128,c[a-4]=i[0],c[a-3]=i[1],c[a-2]=i[2],c[a-1]=i[3],l)?[c,t]:o?(d(t,i,c,a,s),[c]):(d(t,i,t,0,s),[c,t]):[c,t]}close(t,e,i,r){let s;if(void 0===t)s=a;else if("number"==typeof t&&u(t)){if(void 0!==e&&e.length){let i=Buffer.byteLength(e);if(i>123)throw RangeError("The message must not be greater than 123 bytes");(s=Buffer.allocUnsafe(2+i)).writeUInt16BE(t,0),"string"==typeof e?s.write(e,2):s.set(e,2)}else(s=Buffer.allocUnsafe(2)).writeUInt16BE(t,0)}else throw TypeError("First argument must be a valid error code number");let n={[p]:s.length,fin:!0,generateMask:this._generateMask,mask:i,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,s,!1,n,r]):this.sendFrame(b.frame(s,n),r)}ping(t,e,i){let r,s;if("string"==typeof t?(r=Buffer.byteLength(t),s=!1):c(t)?(r=t.size,s=!1):(r=(t=f(t)).length,s=f.readOnly),r>125)throw RangeError("The data size must not be greater than 125 bytes");let n={[p]:r,fin:!0,generateMask:this._generateMask,mask:e,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};c(t)?0!==this._state?this.enqueue([this.getBlobData,t,!1,n,i]):this.getBlobData(t,!1,n,i):0!==this._state?this.enqueue([this.dispatch,t,!1,n,i]):this.sendFrame(b.frame(t,n),i)}pong(t,e,i){let r,s;if("string"==typeof t?(r=Buffer.byteLength(t),s=!1):c(t)?(r=t.size,s=!1):(r=(t=f(t)).length,s=f.readOnly),r>125)throw RangeError("The data size must not be greater than 125 bytes");let n={[p]:r,fin:!0,generateMask:this._generateMask,mask:e,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};c(t)?0!==this._state?this.enqueue([this.getBlobData,t,!1,n,i]):this.getBlobData(t,!1,n,i):0!==this._state?this.enqueue([this.dispatch,t,!1,n,i]):this.sendFrame(b.frame(t,n),i)}send(t,e,i){let r,s;let n=this._extensions[o.extensionName],a=e.binary?2:1,l=e.compress;"string"==typeof t?(r=Buffer.byteLength(t),s=!1):c(t)?(r=t.size,s=!1):(r=(t=f(t)).length,s=f.readOnly),this._firstFragment?(this._firstFragment=!1,l&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=r>=n._threshold),this._compress=l):(l=!1,a=0),e.fin&&(this._firstFragment=!0);let h={[p]:r,fin:e.fin,generateMask:this._generateMask,mask:e.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:s,rsv1:l};c(t)?0!==this._state?this.enqueue([this.getBlobData,t,this._compress,h,i]):this.getBlobData(t,this._compress,h,i):0!==this._state?this.enqueue([this.dispatch,t,this._compress,h,i]):this.dispatch(t,this._compress,h,i)}getBlobData(t,e,i,r){this._bufferedBytes+=i[p],this._state=2,t.arrayBuffer().then(t=>{if(this._socket.destroyed){let t=Error("The socket was closed while the blob was being read");process.nextTick(_,this,t,r);return}this._bufferedBytes-=i[p];let s=f(t);e?this.dispatch(s,e,i,r):(this._state=0,this.sendFrame(b.frame(s,i),r),this.dequeue())}).catch(t=>{process.nextTick(y,this,t,r)})}dispatch(t,e,i,r){if(!e){this.sendFrame(b.frame(t,i),r);return}let s=this._extensions[o.extensionName];this._bufferedBytes+=i[p],this._state=1,s.compress(t,i.fin,(t,e)=>{if(this._socket.destroyed){_(this,Error("The socket was closed while data was being compressed"),r);return}this._bufferedBytes-=i[p],this._state=0,i.readOnly=!1,this.sendFrame(b.frame(e,i),r),this.dequeue()})}dequeue(){for(;0===this._state&&this._queue.length;){let t=this._queue.shift();this._bufferedBytes-=t[3][p],Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[3][p],this._queue.push(t)}sendFrame(t,e){2===t.length?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],e),this._socket.uncork()):this._socket.write(t[0],e)}}function _(t,e,i){"function"==typeof i&&i(e);for(let i=0;i<t._queue.length;i++){let r=t._queue[i],s=r[r.length-1];"function"==typeof s&&s(e)}}function y(t,e,i){_(t,e,i),t.onerror(e)}t.exports=b},2504:(t,e,i)=>{"use strict";i(6342);let{Duplex:r}=i(6162);function s(t){t.emit("close")}function n(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(t){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",t)}t.exports=function(t,e){let i=!0,a=new r({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(e,i){let r=!i&&a._readableState.objectMode?e.toString():e;a.push(r)||t.pause()}),t.once("error",function(t){a.destroyed||(i=!1,a.destroy(t))}),t.once("close",function(){a.destroyed||a.push(null)}),a._destroy=function(e,r){if(t.readyState===t.CLOSED){r(e),process.nextTick(s,a);return}let n=!1;t.once("error",function(t){n=!0,r(t)}),t.once("close",function(){n||r(e),process.nextTick(s,a)}),i&&t.terminate()},a._final=function(e){if(t.readyState===t.CONNECTING){t.once("open",function(){a._final(e)});return}null!==t._socket&&(t._socket._writableState.finished?(e(),a._readableState.endEmitted&&a.destroy()):(t._socket.once("finish",function(){e()}),t.close()))},a._read=function(){t.isPaused&&t.resume()},a._write=function(e,i,r){if(t.readyState===t.CONNECTING){t.once("open",function(){a._write(e,i,r)});return}t.send(e,r)},a.on("end",n),a.on("error",o),a}},2444:(t,e,i)=>{"use strict";let{tokenChars:r}=i(4568);t.exports={parse:function(t){let e=new Set,i=-1,s=-1,n=0;for(;n<t.length;n++){let o=t.charCodeAt(n);if(-1===s&&1===r[o])-1===i&&(i=n);else if(0!==n&&(32===o||9===o))-1===s&&-1!==i&&(s=n);else if(44===o){if(-1===i)throw SyntaxError(`Unexpected character at index ${n}`);-1===s&&(s=n);let r=t.slice(i,s);if(e.has(r))throw SyntaxError(`The "${r}" subprotocol is duplicated`);e.add(r),i=s=-1}else throw SyntaxError(`Unexpected character at index ${n}`)}if(-1===i||-1!==s)throw SyntaxError("Unexpected end of input");let o=t.slice(i,n);if(e.has(o))throw SyntaxError(`The "${o}" subprotocol is duplicated`);return e.add(o),e}}},4568:(t,e,i)=>{"use strict";let{isUtf8:r}=i(8893),{hasBlob:s}=i(9353);function n(t){let e=t.length,i=0;for(;i<e;)if((128&t[i])==0)i++;else if((224&t[i])==192){if(i+1===e||(192&t[i+1])!=128||(254&t[i])==192)return!1;i+=2}else if((240&t[i])==224){if(i+2>=e||(192&t[i+1])!=128||(192&t[i+2])!=128||224===t[i]&&(224&t[i+1])==128||237===t[i]&&(224&t[i+1])==160)return!1;i+=3}else{if((248&t[i])!=240||i+3>=e||(192&t[i+1])!=128||(192&t[i+2])!=128||(192&t[i+3])!=128||240===t[i]&&(240&t[i+1])==128||244===t[i]&&t[i+1]>143||t[i]>244)return!1;i+=4}return!0}if(t.exports={isBlob:function(t){return s&&"object"==typeof t&&"function"==typeof t.arrayBuffer&&"string"==typeof t.type&&"function"==typeof t.stream&&("Blob"===t[Symbol.toStringTag]||"File"===t[Symbol.toStringTag])},isValidStatusCode:function(t){return t>=1e3&&t<=1014&&1004!==t&&1005!==t&&1006!==t||t>=3e3&&t<=4999},isValidUTF8:n,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},r)t.exports.isValidUTF8=function(t){return t.length<24?n(t):r(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let e=i(3739);t.exports.isValidUTF8=function(t){return t.length<32?n(t):e(t)}}catch(t){}},359:(t,e,i)=>{"use strict";let r=i(7702),s=i(2615),{Duplex:n}=i(6162),{createHash:o}=i(4770),a=i(9964),l=i(7959),h=i(2444),c=i(6342),{GUID:u,kWebSocket:d}=i(9353),f=/^[+/0-9A-Za-z]{22}==$/;class p extends r{constructor(t,e){if(super(),null==(t={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:c,...t}).port&&!t.server&&!t.noServer||null!=t.port&&(t.server||t.noServer)||t.server&&t.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=t.port?(this._server=s.createServer((t,e)=>{let i=s.STATUS_CODES[426];e.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),e.end(i)}),this._server.listen(t.port,t.host,t.backlog,e)):t.server&&(this._server=t.server),this._server){let t=this.emit.bind(this,"connection");this._removeListeners=function(t,e){for(let i of Object.keys(e))t.on(i,e[i]);return function(){for(let i of Object.keys(e))t.removeListener(i,e[i])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,i,r)=>{this.handleUpgrade(e,i,r,t)}})}!0===t.perMessageDeflate&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=t,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(2===this._state){t&&this.once("close",()=>{t(Error("The server is not running"))}),process.nextTick(g,this);return}if(t&&this.once("close",t),1!==this._state){if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(g,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{g(this)})}}}shouldHandle(t){if(this.options.path){let e=t.url.indexOf("?");if((-1!==e?t.url.slice(0,e):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,e,i,r){e.on("error",m);let s=t.headers["sec-websocket-key"],n=t.headers.upgrade,o=+t.headers["sec-websocket-version"];if("GET"!==t.method){_(this,t,e,405,"Invalid HTTP method");return}if(void 0===n||"websocket"!==n.toLowerCase()){_(this,t,e,400,"Invalid Upgrade header");return}if(void 0===s||!f.test(s)){_(this,t,e,400,"Missing or invalid Sec-WebSocket-Key header");return}if(13!==o&&8!==o){_(this,t,e,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});return}if(!this.shouldHandle(t)){b(e,400);return}let c=t.headers["sec-websocket-protocol"],u=new Set;if(void 0!==c)try{u=h.parse(c)}catch(i){_(this,t,e,400,"Invalid Sec-WebSocket-Protocol header");return}let d=t.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&void 0!==d){let i=new l(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let t=a.parse(d);t[l.extensionName]&&(i.accept(t[l.extensionName]),p[l.extensionName]=i)}catch(i){_(this,t,e,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let n={origin:t.headers[`${8===o?"sec-websocket-origin":"origin"}`],secure:!!(t.socket.authorized||t.socket.encrypted),req:t};if(2===this.options.verifyClient.length){this.options.verifyClient(n,(n,o,a,l)=>{if(!n)return b(e,o||401,a,l);this.completeUpgrade(p,s,u,t,e,i,r)});return}if(!this.options.verifyClient(n))return b(e,401)}this.completeUpgrade(p,s,u,t,e,i,r)}completeUpgrade(t,e,i,r,s,n,h){if(!s.readable||!s.writable)return s.destroy();if(s[d])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return b(s,503);let c=o("sha1").update(e+u).digest("base64"),f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${c}`],p=new this.options.WebSocket(null,void 0,this.options);if(i.size){let t=this.options.handleProtocols?this.options.handleProtocols(i,r):i.values().next().value;t&&(f.push(`Sec-WebSocket-Protocol: ${t}`),p._protocol=t)}if(t[l.extensionName]){let e=t[l.extensionName].params,i=a.format({[l.extensionName]:[e]});f.push(`Sec-WebSocket-Extensions: ${i}`),p._extensions=t}this.emit("headers",f,r),s.write(f.concat("\r\n").join("\r\n")),s.removeListener("error",m),p.setSocket(s,n,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(p),p.on("close",()=>{this.clients.delete(p),this._shouldEmitClose&&!this.clients.size&&process.nextTick(g,this)})),h(p,r)}}function g(t){t._state=2,t.emit("close")}function m(){this.destroy()}function b(t,e,i,r){i=i||s.STATUS_CODES[e],r={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(i),...r},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${s.STATUS_CODES[e]}\r
`+Object.keys(r).map(t=>`${t}: ${r[t]}`).join("\r\n")+"\r\n\r\n"+i)}function _(t,e,i,r,s,n){if(t.listenerCount("wsClientError")){let r=Error(s);Error.captureStackTrace(r,_),t.emit("wsClientError",r,i,e)}else b(i,r,s,n)}t.exports=p},6342:(t,e,i)=>{"use strict";let r=i(7702),s=i(8791),n=i(2615),o=i(8216),a=i(2452),{randomBytes:l,createHash:h}=i(4770),{Duplex:c,Readable:u}=i(6162),{URL:d}=i(7360),f=i(7959),p=i(3958),g=i(4036),{isBlob:m}=i(4568),{BINARY_TYPES:b,EMPTY_BUFFER:_,GUID:y,kForOnEventAttribute:v,kListener:w,kStatusCode:x,kWebSocket:S,NOOP:k}=i(9353),{EventTarget:{addEventListener:E,removeEventListener:M}}=i(1368),{format:I,parse:T}=i(9964),{toBuffer:O}=i(7878),A=Symbol("kAborted"),C=[8,13],P=["CONNECTING","OPEN","CLOSING","CLOSED"],R=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class B extends r{constructor(t,e,i){super(),this._binaryType=b[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=_,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=B.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==t?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===e?e=[]:Array.isArray(e)||("object"==typeof e&&null!==e?(i=e,e=[]):e=[e]),function t(e,i,r,o){let a,c,u,p;let g={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:C[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=g.autoPong,!C.includes(g.protocolVersion))throw RangeError(`Unsupported protocol version: ${g.protocolVersion} (supported versions: ${C.join(", ")})`);if(i instanceof d)a=i;else try{a=new d(i)}catch(t){throw SyntaxError(`Invalid URL: ${i}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),e._url=a.href;let m="wss:"===a.protocol,b="ws+unix:"===a.protocol;if("ws:"===a.protocol||m||b?b&&!a.pathname?c="The URL's pathname is empty":a.hash&&(c="The URL contains a fragment identifier"):c='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',c){let t=SyntaxError(c);if(0===e._redirects)throw t;N(e,t);return}let _=m?443:80,v=l(16).toString("base64"),w=m?s.request:n.request,x=new Set;if(g.createConnection=g.createConnection||(m?L:D),g.defaultPort=g.defaultPort||_,g.port=a.port||_,g.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,g.headers={...g.headers,"Sec-WebSocket-Version":g.protocolVersion,"Sec-WebSocket-Key":v,Connection:"Upgrade",Upgrade:"websocket"},g.path=a.pathname+a.search,g.timeout=g.handshakeTimeout,g.perMessageDeflate&&(u=new f(!0!==g.perMessageDeflate?g.perMessageDeflate:{},!1,g.maxPayload),g.headers["Sec-WebSocket-Extensions"]=I({[f.extensionName]:u.offer()})),r.length){for(let t of r){if("string"!=typeof t||!R.test(t)||x.has(t))throw SyntaxError("An invalid or duplicated subprotocol was specified");x.add(t)}g.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(g.origin&&(g.protocolVersion<13?g.headers["Sec-WebSocket-Origin"]=g.origin:g.headers.Origin=g.origin),(a.username||a.password)&&(g.auth=`${a.username}:${a.password}`),b){let t=g.path.split(":");g.socketPath=t[0],g.path=t[1]}if(g.followRedirects){if(0===e._redirects){e._originalIpc=b,e._originalSecure=m,e._originalHostOrSocketPath=b?g.socketPath:a.host;let t=o&&o.headers;if(o={...o,headers:{}},t)for(let[e,i]of Object.entries(t))o.headers[e.toLowerCase()]=i}else if(0===e.listenerCount("redirect")){let t=b?!!e._originalIpc&&g.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;t&&(!e._originalSecure||m)||(delete g.headers.authorization,delete g.headers.cookie,t||delete g.headers.host,g.auth=void 0)}g.auth&&!o.headers.authorization&&(o.headers.authorization="Basic "+Buffer.from(g.auth).toString("base64")),p=e._req=w(g),e._redirects&&e.emit("redirect",e.url,p)}else p=e._req=w(g);g.timeout&&p.on("timeout",()=>{j(e,p,"Opening handshake has timed out")}),p.on("error",t=>{null===p||p[A]||(p=e._req=null,N(e,t))}),p.on("response",s=>{let n=s.headers.location,a=s.statusCode;if(n&&g.followRedirects&&a>=300&&a<400){let s;if(++e._redirects>g.maxRedirects){j(e,p,"Maximum redirects exceeded");return}p.abort();try{s=new d(n,i)}catch(t){N(e,SyntaxError(`Invalid URL: ${n}`));return}t(e,s,r,o)}else e.emit("unexpected-response",p,s)||j(e,p,`Unexpected server response: ${s.statusCode}`)}),p.on("upgrade",(t,i,r)=>{let s;if(e.emit("upgrade",t),e.readyState!==B.CONNECTING)return;p=e._req=null;let n=t.headers.upgrade;if(void 0===n||"websocket"!==n.toLowerCase()){j(e,i,"Invalid Upgrade header");return}let o=h("sha1").update(v+y).digest("base64");if(t.headers["sec-websocket-accept"]!==o){j(e,i,"Invalid Sec-WebSocket-Accept header");return}let a=t.headers["sec-websocket-protocol"];if(void 0!==a?x.size?x.has(a)||(s="Server sent an invalid subprotocol"):s="Server sent a subprotocol but none was requested":x.size&&(s="Server sent no subprotocol"),s){j(e,i,s);return}a&&(e._protocol=a);let l=t.headers["sec-websocket-extensions"];if(void 0!==l){let t;if(!u){j(e,i,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}try{t=T(l)}catch(t){j(e,i,"Invalid Sec-WebSocket-Extensions header");return}let r=Object.keys(t);if(1!==r.length||r[0]!==f.extensionName){j(e,i,"Server indicated an extension that was not requested");return}try{u.accept(t[f.extensionName])}catch(t){j(e,i,"Invalid Sec-WebSocket-Extensions header");return}e._extensions[f.extensionName]=u}e.setSocket(i,r,{allowSynchronousEvents:g.allowSynchronousEvents,generateMask:g.generateMask,maxPayload:g.maxPayload,skipUTF8Validation:g.skipUTF8Validation})}),g.finishRequest?g.finishRequest(p,e):p.end()}(this,t,e,i)):(this._autoPong=i.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(t){b.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,e,i){let r=new p({allowSynchronousEvents:i.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation}),s=new g(t,this._extensions,i.generateMask);this._receiver=r,this._sender=s,this._socket=t,r[S]=this,s[S]=this,t[S]=this,r.on("conclude",U),r.on("drain",W),r.on("error",H),r.on("message",V),r.on("ping",$),r.on("pong",q),s.onerror=G,t.setTimeout&&t.setTimeout(0),t.setNoDelay&&t.setNoDelay(),e.length>0&&t.unshift(e),t.on("close",Q),t.on("data",X),t.on("end",Z),t.on("error",J),this._readyState=B.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=B.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=B.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,e){if(this.readyState!==B.CLOSED){if(this.readyState===B.CONNECTING){j(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===B.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=B.CLOSING,this._sender.close(t,e,!this._isServer,t=>{!t&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),Y(this)}}pause(){this.readyState!==B.CONNECTING&&this.readyState!==B.CLOSED&&(this._paused=!0,this._socket.pause())}ping(t,e,i){if(this.readyState===B.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t?(i=t,t=e=void 0):"function"==typeof e&&(i=e,e=void 0),"number"==typeof t&&(t=t.toString()),this.readyState!==B.OPEN){F(this,t,i);return}void 0===e&&(e=!this._isServer),this._sender.ping(t||_,e,i)}pong(t,e,i){if(this.readyState===B.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t?(i=t,t=e=void 0):"function"==typeof e&&(i=e,e=void 0),"number"==typeof t&&(t=t.toString()),this.readyState!==B.OPEN){F(this,t,i);return}void 0===e&&(e=!this._isServer),this._sender.pong(t||_,e,i)}resume(){this.readyState!==B.CONNECTING&&this.readyState!==B.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(t,e,i){if(this.readyState===B.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e&&(i=e,e={}),"number"==typeof t&&(t=t.toString()),this.readyState!==B.OPEN){F(this,t,i);return}let r={binary:"string"!=typeof t,mask:!this._isServer,compress:!0,fin:!0,...e};this._extensions[f.extensionName]||(r.compress=!1),this._sender.send(t||_,r,i)}terminate(){if(this.readyState!==B.CLOSED){if(this.readyState===B.CONNECTING){j(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=B.CLOSING,this._socket.destroy())}}}function N(t,e){t._readyState=B.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function D(t){return t.path=t.socketPath,o.connect(t)}function L(t){return t.path=void 0,t.servername||""===t.servername||(t.servername=o.isIP(t.host)?"":t.host),a.connect(t)}function j(t,e,i){t._readyState=B.CLOSING;let r=Error(i);Error.captureStackTrace(r,j),e.setHeader?(e[A]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(N,t,r)):(e.destroy(r),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function F(t,e,i){if(e){let i=m(e)?e.size:O(e).length;t._socket?t._sender._bufferedBytes+=i:t._bufferedAmount+=i}if(i){let e=Error(`WebSocket is not open: readyState ${t.readyState} (${P[t.readyState]})`);process.nextTick(i,e)}}function U(t,e){let i=this[S];i._closeFrameReceived=!0,i._closeMessage=e,i._closeCode=t,void 0!==i._socket[S]&&(i._socket.removeListener("data",X),process.nextTick(K,i._socket),1005===t?i.close():i.close(t,e))}function W(){let t=this[S];t.isPaused||t._socket.resume()}function H(t){let e=this[S];void 0!==e._socket[S]&&(e._socket.removeListener("data",X),process.nextTick(K,e._socket),e.close(t[x])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function z(){this[S].emitClose()}function V(t,e){this[S].emit("message",t,e)}function $(t){let e=this[S];e._autoPong&&e.pong(t,!this._isServer,k),e.emit("ping",t)}function q(t){this[S].emit("pong",t)}function K(t){t.resume()}function G(t){let e=this[S];e.readyState===B.CLOSED||(e.readyState===B.OPEN&&(e._readyState=B.CLOSING,Y(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function Y(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),3e4)}function Q(){let t;let e=this[S];this.removeListener("close",Q),this.removeListener("data",X),this.removeListener("end",Z),e._readyState=B.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[S]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",z),e._receiver.on("finish",z))}function X(t){this[S]._receiver.write(t)||this.pause()}function Z(){let t=this[S];t._readyState=B.CLOSING,t._receiver.end(),this.end()}function J(){let t=this[S];this.removeListener("error",J),this.on("error",k),t&&(t._readyState=B.CLOSING,this.destroy())}Object.defineProperty(B,"CONNECTING",{enumerable:!0,value:P.indexOf("CONNECTING")}),Object.defineProperty(B.prototype,"CONNECTING",{enumerable:!0,value:P.indexOf("CONNECTING")}),Object.defineProperty(B,"OPEN",{enumerable:!0,value:P.indexOf("OPEN")}),Object.defineProperty(B.prototype,"OPEN",{enumerable:!0,value:P.indexOf("OPEN")}),Object.defineProperty(B,"CLOSING",{enumerable:!0,value:P.indexOf("CLOSING")}),Object.defineProperty(B.prototype,"CLOSING",{enumerable:!0,value:P.indexOf("CLOSING")}),Object.defineProperty(B,"CLOSED",{enumerable:!0,value:P.indexOf("CLOSED")}),Object.defineProperty(B.prototype,"CLOSED",{enumerable:!0,value:P.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(B.prototype,t,{enumerable:!0})}),["open","error","close","message"].forEach(t=>{Object.defineProperty(B.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[v])return e[w];return null},set(e){for(let e of this.listeners(t))if(e[v]){this.removeListener(t,e);break}"function"==typeof e&&this.addEventListener(t,e,{[v]:!0})}})}),B.prototype.addEventListener=E,B.prototype.removeEventListener=M,t.exports=B},1506:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a,metadata:()=>o});var r=i(9510),s=i(7366),n=i.n(s);i(1159),i(7272);let o={title:"Cold Storage Monitoring",description:"Real-time storage monitoring"};function a({children:t}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:t})})}},908:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});let r=(0,i(8570).createProxy)(String.raw`C:\Users\hp\Desktop\smart monitoring\app\page.tsx#default`)},7272:()=>{},7168:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;let i="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,r=new Set,s="object"==typeof process&&process?process:{},n=(t,e,i,r)=>{"function"==typeof s.emitWarning?s.emitWarning(t,e,i,r):console.error(`[${i}] ${e}: ${t}`)},o=globalThis.AbortController,a=globalThis.AbortSignal;if(void 0===o){a=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,e){this._onabort.push(e)}},o=class{constructor(){e()}signal=new a;abort(t){if(!this.signal.aborted){for(let e of(this.signal.reason=t,this.signal.aborted=!0,this.signal._onabort))e(t);this.signal.onabort?.(t)}}};let t=s.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}let l=t=>!r.has(t);Symbol("type");let h=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),c=t=>h(t)?t<=256?Uint8Array:t<=65536?Uint16Array:t<=4294967296?Uint32Array:t<=Number.MAX_SAFE_INTEGER?u:null:null;class u extends Array{constructor(t){super(t),this.fill(0)}}class d{heap;length;static #t=!1;static create(t){let e=c(t);if(!e)return[];d.#t=!0;let i=new d(t,e);return d.#t=!1,i}constructor(t,e){if(!d.#t)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class f{#e;#i;#r;#s;#n;#o;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#l;#h;#c;#u;#d;#f;#p;#g;#m;#b;#_;#y;#v;#w;#x;#S;static unsafeExposeInternals(t){return{starts:t.#y,ttls:t.#v,sizes:t.#_,keyMap:t.#h,keyList:t.#c,valList:t.#u,next:t.#d,prev:t.#f,get head(){return t.#p},get tail(){return t.#g},free:t.#m,isBackgroundFetch:e=>t.#k(e),backgroundFetch:(e,i,r,s)=>t.#E(e,i,r,s),moveToTail:e=>t.#M(e),indexes:e=>t.#I(e),rindexes:e=>t.#T(e),isStale:e=>t.#O(e)}}get max(){return this.#e}get maxSize(){return this.#i}get calculatedSize(){return this.#l}get size(){return this.#a}get fetchMethod(){return this.#n}get memoMethod(){return this.#o}get dispose(){return this.#r}get disposeAfter(){return this.#s}constructor(t){let{max:e=0,ttl:i,ttlResolution:s=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:u,allowStale:p,dispose:g,disposeAfter:m,noDisposeOnSet:b,noUpdateTTL:_,maxSize:y=0,maxEntrySize:v=0,sizeCalculation:w,fetchMethod:x,memoMethod:S,noDeleteOnFetchRejection:k,noDeleteOnStaleGet:E,allowStaleOnFetchRejection:M,allowStaleOnFetchAbort:I,ignoreFetchAbort:T}=t;if(0!==e&&!h(e))throw TypeError("max option must be a nonnegative integer");let O=e?c(e):Array;if(!O)throw Error("invalid max value: "+e);if(this.#e=e,this.#i=y,this.maxEntrySize=v||this.#i,this.sizeCalculation=w,this.sizeCalculation){if(!this.#i&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==S&&"function"!=typeof S)throw TypeError("memoMethod must be a function if defined");if(this.#o=S,void 0!==x&&"function"!=typeof x)throw TypeError("fetchMethod must be a function if specified");if(this.#n=x,this.#x=!!x,this.#h=new Map,this.#c=Array(e).fill(void 0),this.#u=Array(e).fill(void 0),this.#d=new O(e),this.#f=new O(e),this.#p=0,this.#g=0,this.#m=d.create(e),this.#a=0,this.#l=0,"function"==typeof g&&(this.#r=g),"function"==typeof m?(this.#s=m,this.#b=[]):(this.#s=void 0,this.#b=void 0),this.#w=!!this.#r,this.#S=!!this.#s,this.noDisposeOnSet=!!b,this.noUpdateTTL=!!_,this.noDeleteOnFetchRejection=!!k,this.allowStaleOnFetchRejection=!!M,this.allowStaleOnFetchAbort=!!I,this.ignoreFetchAbort=!!T,0!==this.maxEntrySize){if(0!==this.#i&&!h(this.#i))throw TypeError("maxSize must be a positive integer if specified");if(!h(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!u,this.ttlResolution=h(s)||0===s?s:1,this.ttlAutopurge=!!o,this.ttl=i||0,this.ttl){if(!h(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#C()}if(0===this.#e&&0===this.ttl&&0===this.#i)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#i){let t="LRU_CACHE_UNBOUNDED";l(t)&&(r.add(t),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,f))}}getRemainingTTL(t){return this.#h.has(t)?1/0:0}#C(){let t=new u(this.#e),e=new u(this.#e);this.#v=t,this.#y=e,this.#P=(r,s,n=i.now())=>{if(e[r]=0!==s?n:0,t[r]=s,0!==s&&this.ttlAutopurge){let t=setTimeout(()=>{this.#O(r)&&this.#R(this.#c[r],"expire")},s+1);t.unref&&t.unref()}},this.#B=r=>{e[r]=0!==t[r]?i.now():0},this.#N=(i,n)=>{if(t[n]){let o=t[n],a=e[n];if(!o||!a)return;i.ttl=o,i.start=a,i.now=r||s();let l=i.now-a;i.remainingTTL=o-l}};let r=0,s=()=>{let t=i.now();if(this.ttlResolution>0){r=t;let e=setTimeout(()=>r=0,this.ttlResolution);e.unref&&e.unref()}return t};this.getRemainingTTL=i=>{let n=this.#h.get(i);if(void 0===n)return 0;let o=t[n],a=e[n];return o&&a?o-((r||s())-a):1/0},this.#O=i=>{let n=e[i],o=t[i];return!!o&&!!n&&(r||s())-n>o}}#B=()=>{};#N=()=>{};#P=()=>{};#O=()=>!1;#A(){let t=new u(this.#e);this.#l=0,this.#_=t,this.#D=e=>{this.#l-=t[e],t[e]=0},this.#L=(t,e,i,r)=>{if(this.#k(e))return 0;if(!h(i)){if(r){if("function"!=typeof r)throw TypeError("sizeCalculation must be a function");if(!h(i=r(e,t)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return i},this.#j=(e,i,r)=>{if(t[e]=i,this.#i){let i=this.#i-t[e];for(;this.#l>i;)this.#F(!0)}this.#l+=t[e],r&&(r.entrySize=i,r.totalCalculatedSize=this.#l)}}#D=t=>{};#j=(t,e,i)=>{};#L=(t,e,i,r)=>{if(i||r)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#I({allowStale:t=this.allowStale}={}){if(this.#a)for(let e=this.#g;this.#U(e)&&((t||!this.#O(e))&&(yield e),e!==this.#p);)e=this.#f[e]}*#T({allowStale:t=this.allowStale}={}){if(this.#a)for(let e=this.#p;this.#U(e)&&((t||!this.#O(e))&&(yield e),e!==this.#g);)e=this.#d[e]}#U(t){return void 0!==t&&this.#h.get(this.#c[t])===t}*entries(){for(let t of this.#I())void 0===this.#u[t]||void 0===this.#c[t]||this.#k(this.#u[t])||(yield[this.#c[t],this.#u[t]])}*rentries(){for(let t of this.#T())void 0===this.#u[t]||void 0===this.#c[t]||this.#k(this.#u[t])||(yield[this.#c[t],this.#u[t]])}*keys(){for(let t of this.#I()){let e=this.#c[t];void 0===e||this.#k(this.#u[t])||(yield e)}}*rkeys(){for(let t of this.#T()){let e=this.#c[t];void 0===e||this.#k(this.#u[t])||(yield e)}}*values(){for(let t of this.#I())void 0===this.#u[t]||this.#k(this.#u[t])||(yield this.#u[t])}*rvalues(){for(let t of this.#T())void 0===this.#u[t]||this.#k(this.#u[t])||(yield this.#u[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let i of this.#I()){let r=this.#u[i],s=this.#k(r)?r.__staleWhileFetching:r;if(void 0!==s&&t(s,this.#c[i],this))return this.get(this.#c[i],e)}}forEach(t,e=this){for(let i of this.#I()){let r=this.#u[i],s=this.#k(r)?r.__staleWhileFetching:r;void 0!==s&&t.call(e,s,this.#c[i],this)}}rforEach(t,e=this){for(let i of this.#T()){let r=this.#u[i],s=this.#k(r)?r.__staleWhileFetching:r;void 0!==s&&t.call(e,s,this.#c[i],this)}}purgeStale(){let t=!1;for(let e of this.#T({allowStale:!0}))this.#O(e)&&(this.#R(this.#c[e],"expire"),t=!0);return t}info(t){let e=this.#h.get(t);if(void 0===e)return;let r=this.#u[e],s=this.#k(r)?r.__staleWhileFetching:r;if(void 0===s)return;let n={value:s};if(this.#v&&this.#y){let t=this.#v[e],r=this.#y[e];if(t&&r){let e=t-(i.now()-r);n.ttl=e,n.start=Date.now()}}return this.#_&&(n.size=this.#_[e]),n}dump(){let t=[];for(let e of this.#I({allowStale:!0})){let r=this.#c[e],s=this.#u[e],n=this.#k(s)?s.__staleWhileFetching:s;if(void 0===n||void 0===r)continue;let o={value:n};if(this.#v&&this.#y){o.ttl=this.#v[e];let t=i.now()-this.#y[e];o.start=Math.floor(Date.now()-t)}this.#_&&(o.size=this.#_[e]),t.unshift([r,o])}return t}load(t){for(let[e,r]of(this.clear(),t)){if(r.start){let t=Date.now()-r.start;r.start=i.now()-t}this.set(e,r.value,r)}}set(t,e,i={}){if(void 0===e)return this.delete(t),this;let{ttl:r=this.ttl,start:s,noDisposeOnSet:n=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=i,{noUpdateTTL:l=this.noUpdateTTL}=i,h=this.#L(t,e,i.size||0,o);if(this.maxEntrySize&&h>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#R(t,"set"),this;let c=0===this.#a?void 0:this.#h.get(t);if(void 0===c)c=0===this.#a?this.#g:0!==this.#m.length?this.#m.pop():this.#a===this.#e?this.#F(!1):this.#a,this.#c[c]=t,this.#u[c]=e,this.#h.set(t,c),this.#d[this.#g]=c,this.#f[c]=this.#g,this.#g=c,this.#a++,this.#j(c,h,a),a&&(a.set="add"),l=!1;else{this.#M(c);let i=this.#u[c];if(e!==i){if(this.#x&&this.#k(i)){i.__abortController.abort(Error("replaced"));let{__staleWhileFetching:e}=i;void 0!==e&&!n&&(this.#w&&this.#r?.(e,t,"set"),this.#S&&this.#b?.push([e,t,"set"]))}else!n&&(this.#w&&this.#r?.(i,t,"set"),this.#S&&this.#b?.push([i,t,"set"]));if(this.#D(c),this.#j(c,h,a),this.#u[c]=e,a){a.set="replace";let t=i&&this.#k(i)?i.__staleWhileFetching:i;void 0!==t&&(a.oldValue=t)}}else a&&(a.set="update")}if(0===r||this.#v||this.#C(),this.#v&&(l||this.#P(c,r,s),a&&this.#N(a,c)),!n&&this.#S&&this.#b){let t;let e=this.#b;for(;t=e?.shift();)this.#s?.(...t)}return this}pop(){try{for(;this.#a;){let t=this.#u[this.#p];if(this.#F(!0),this.#k(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(this.#S&&this.#b){let t;let e=this.#b;for(;t=e?.shift();)this.#s?.(...t)}}}#F(t){let e=this.#p,i=this.#c[e],r=this.#u[e];return this.#x&&this.#k(r)?r.__abortController.abort(Error("evicted")):(this.#w||this.#S)&&(this.#w&&this.#r?.(r,i,"evict"),this.#S&&this.#b?.push([r,i,"evict"])),this.#D(e),t&&(this.#c[e]=void 0,this.#u[e]=void 0,this.#m.push(e)),1===this.#a?(this.#p=this.#g=0,this.#m.length=0):this.#p=this.#d[e],this.#h.delete(i),this.#a--,e}has(t,e={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:r}=e,s=this.#h.get(t);if(void 0!==s){let t=this.#u[s];if(this.#k(t)&&void 0===t.__staleWhileFetching)return!1;if(!this.#O(s))return i&&this.#B(s),r&&(r.has="hit",this.#N(r,s)),!0;r&&(r.has="stale",this.#N(r,s))}else r&&(r.has="miss");return!1}peek(t,e={}){let{allowStale:i=this.allowStale}=e,r=this.#h.get(t);if(void 0===r||!i&&this.#O(r))return;let s=this.#u[r];return this.#k(s)?s.__staleWhileFetching:s}#E(t,e,i,r){let s=void 0===e?void 0:this.#u[e];if(this.#k(s))return s;let n=new o,{signal:a}=i;a?.addEventListener("abort",()=>n.abort(a.reason),{signal:n.signal});let l={signal:n.signal,options:i,context:r},h=(r,s=!1)=>{let{aborted:o}=n.signal,a=i.ignoreFetchAbort&&void 0!==r;return(i.status&&(o&&!s?(i.status.fetchAborted=!0,i.status.fetchError=n.signal.reason,a&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),!o||a||s)?(this.#u[e]===u&&(void 0===r?u.__staleWhileFetching?this.#u[e]=u.__staleWhileFetching:this.#R(t,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(t,r,l.options))),r):c(n.signal.reason)},c=r=>{let{aborted:s}=n.signal,o=s&&i.allowStaleOnFetchAbort,a=o||i.allowStaleOnFetchRejection,l=a||i.noDeleteOnFetchRejection;if(this.#u[e]!==u||(l&&void 0!==u.__staleWhileFetching?o||(this.#u[e]=u.__staleWhileFetching):this.#R(t,"fetch")),a)return i.status&&void 0!==u.__staleWhileFetching&&(i.status.returnedStale=!0),u.__staleWhileFetching;if(u.__returned===u)throw r};i.status&&(i.status.fetchDispatched=!0);let u=new Promise((e,r)=>{let o=this.#n?.(t,s,l);o&&o instanceof Promise&&o.then(t=>e(void 0===t?void 0:t),r),n.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(e(void 0),i.allowStaleOnFetchAbort&&(e=t=>h(t,!0)))})}).then(h,t=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=t),c(t))),d=Object.assign(u,{__abortController:n,__staleWhileFetching:s,__returned:void 0});return void 0===e?(this.set(t,d,{...l.options,status:void 0}),e=this.#h.get(t)):this.#u[e]=d,d}#k(t){return!!this.#x&&!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof o}async fetch(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:u=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:p,forceRefresh:g=!1,status:m,signal:b}=e;if(!this.#x)return m&&(m.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:s,status:m});let _={allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:s,ttl:n,noDisposeOnSet:o,size:a,sizeCalculation:l,noUpdateTTL:h,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:u,allowStaleOnFetchAbort:f,ignoreFetchAbort:d,status:m,signal:b},y=this.#h.get(t);if(void 0===y){m&&(m.fetch="miss");let e=this.#E(t,y,_,p);return e.__returned=e}{let e=this.#u[y];if(this.#k(e)){let t=i&&void 0!==e.__staleWhileFetching;return m&&(m.fetch="inflight",t&&(m.returnedStale=!0)),t?e.__staleWhileFetching:e.__returned=e}let s=this.#O(y);if(!g&&!s)return m&&(m.fetch="hit"),this.#M(y),r&&this.#B(y),m&&this.#N(m,y),e;let n=this.#E(t,y,_,p),o=void 0!==n.__staleWhileFetching&&i;return m&&(m.fetch=s?"stale":"refresh",o&&s&&(m.returnedStale=!0)),o?n.__staleWhileFetching:n.__returned=n}}async forceFetch(t,e={}){let i=await this.fetch(t,e);if(void 0===i)throw Error("fetch() returned undefined");return i}memo(t,e={}){let i=this.#o;if(!i)throw Error("no memoMethod provided to constructor");let{context:r,forceRefresh:s,...n}=e,o=this.get(t,n);if(!s&&void 0!==o)return o;let a=i(t,o,{options:n,context:r});return this.set(t,a,n),a}get(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:n}=e,o=this.#h.get(t);if(void 0!==o){let e=this.#u[o],a=this.#k(e);return(n&&this.#N(n,o),this.#O(o))?(n&&(n.get="stale"),a)?(n&&i&&void 0!==e.__staleWhileFetching&&(n.returnedStale=!0),i?e.__staleWhileFetching:void 0):(s||this.#R(t,"expire"),n&&i&&(n.returnedStale=!0),i?e:void 0):(n&&(n.get="hit"),a)?e.__staleWhileFetching:(this.#M(o),r&&this.#B(o),e)}n&&(n.get="miss")}#W(t,e){this.#f[e]=t,this.#d[t]=e}#M(t){t!==this.#g&&(t===this.#p?this.#p=this.#d[t]:this.#W(this.#f[t],this.#d[t]),this.#W(this.#g,t),this.#g=t)}delete(t){return this.#R(t,"delete")}#R(t,e){let i=!1;if(0!==this.#a){let r=this.#h.get(t);if(void 0!==r){if(i=!0,1===this.#a)this.#H(e);else{this.#D(r);let i=this.#u[r];if(this.#k(i)?i.__abortController.abort(Error("deleted")):(this.#w||this.#S)&&(this.#w&&this.#r?.(i,t,e),this.#S&&this.#b?.push([i,t,e])),this.#h.delete(t),this.#c[r]=void 0,this.#u[r]=void 0,r===this.#g)this.#g=this.#f[r];else if(r===this.#p)this.#p=this.#d[r];else{let t=this.#f[r];this.#d[t]=this.#d[r];let e=this.#d[r];this.#f[e]=this.#f[r]}this.#a--,this.#m.push(r)}}}if(this.#S&&this.#b?.length){let t;let e=this.#b;for(;t=e?.shift();)this.#s?.(...t)}return i}clear(){return this.#H("delete")}#H(t){for(let e of this.#T({allowStale:!0})){let i=this.#u[e];if(this.#k(i))i.__abortController.abort(Error("deleted"));else{let r=this.#c[e];this.#w&&this.#r?.(i,r,t),this.#S&&this.#b?.push([i,r,t])}}if(this.#h.clear(),this.#u.fill(void 0),this.#c.fill(void 0),this.#v&&this.#y&&(this.#v.fill(0),this.#y.fill(0)),this.#_&&this.#_.fill(0),this.#p=0,this.#g=0,this.#m.length=0,this.#l=0,this.#a=0,this.#S&&this.#b){let t;let e=this.#b;for(;t=e?.shift();)this.#s?.(...t)}}}e.LRUCache=f},1624:t=>{"use strict";t.exports={version:"5.14.1"}}};var e=require("../webpack-runtime.js");e.C(t);var i=t=>e(e.s=t),r=e.X(0,[480],()=>i(4374));module.exports=r})();